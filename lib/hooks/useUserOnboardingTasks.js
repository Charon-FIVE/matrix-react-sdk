"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useUserOnboardingTasks = useUserOnboardingTasks;

var _react = require("react");

var _AppDownloadDialog = require("../components/views/dialogs/AppDownloadDialog");

var _UserTab = require("../components/views/dialogs/UserTab");

var _actions = require("../dispatcher/actions");

var _dispatcher = _interopRequireDefault(require("../dispatcher/dispatcher"));

var _languageHandler = require("../languageHandler");

var _Modal = _interopRequireDefault(require("../Modal"));

var _Notifier = require("../Notifier");

var _PosthogTrackers = _interopRequireDefault(require("../PosthogTrackers"));

var _SdkConfig = _interopRequireDefault(require("../SdkConfig"));

var _UseCase = require("../settings/enums/UseCase");

var _useSettings = require("./useSettings");

/*
Copyright 2022 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const onClickStartDm = ev => {
  _PosthogTrackers.default.trackInteraction("WebUserOnboardingTaskSendDm", ev);

  _dispatcher.default.dispatch({
    action: 'view_create_chat'
  });
};

const tasks = [{
  id: "create-account",
  title: (0, _languageHandler._t)("Create account"),
  description: (0, _languageHandler._t)("You made it!"),
  completed: () => true
}, {
  id: "find-friends",
  title: (0, _languageHandler._t)("Find and invite your friends"),
  description: (0, _languageHandler._t)("It’s what you’re here for, so lets get to it"),
  completed: ctx => ctx.hasDmRooms,
  relevant: [_UseCase.UseCase.PersonalMessaging, _UseCase.UseCase.Skip],
  action: {
    label: (0, _languageHandler._t)("Find friends"),
    onClick: onClickStartDm
  }
}, {
  id: "find-coworkers",
  title: (0, _languageHandler._t)("Find and invite your co-workers"),
  description: (0, _languageHandler._t)("Get stuff done by finding your teammates"),
  completed: ctx => ctx.hasDmRooms,
  relevant: [_UseCase.UseCase.WorkMessaging],
  action: {
    label: (0, _languageHandler._t)("Find people"),
    onClick: onClickStartDm
  }
}, {
  id: "find-community-members",
  title: (0, _languageHandler._t)("Find and invite your community members"),
  description: (0, _languageHandler._t)("Get stuff done by finding your teammates"),
  completed: ctx => ctx.hasDmRooms,
  relevant: [_UseCase.UseCase.CommunityMessaging],
  action: {
    label: (0, _languageHandler._t)("Find people"),
    onClick: onClickStartDm
  }
}, {
  id: "download-apps",
  title: () => (0, _languageHandler._t)("Download %(brand)s", {
    brand: _SdkConfig.default.get("brand")
  }),
  description: () => (0, _languageHandler._t)("Don’t miss a thing by taking %(brand)s with you", {
    brand: _SdkConfig.default.get("brand")
  }),
  completed: ctx => ctx.hasDevices,
  action: {
    label: (0, _languageHandler._t)("Download apps"),
    onClick: ev => {
      _PosthogTrackers.default.trackInteraction("WebUserOnboardingTaskDownloadApps", ev);

      _Modal.default.createDialog(_AppDownloadDialog.AppDownloadDialog, {}, "mx_AppDownloadDialog_wrapper", false, true);
    }
  }
}, {
  id: "setup-profile",
  title: (0, _languageHandler._t)("Set up your profile"),
  description: (0, _languageHandler._t)("Make sure people know it’s really you"),
  completed: ctx => ctx.hasAvatar,
  action: {
    label: (0, _languageHandler._t)("Your profile"),
    onClick: ev => {
      _PosthogTrackers.default.trackInteraction("WebUserOnboardingTaskSetupProfile", ev);

      _dispatcher.default.dispatch({
        action: _actions.Action.ViewUserSettings,
        initialTabId: _UserTab.UserTab.General
      });
    }
  }
}, {
  id: "permission-notifications",
  title: (0, _languageHandler._t)("Turn on notifications"),
  description: (0, _languageHandler._t)("Don’t miss a reply or important message"),
  completed: ctx => ctx.hasNotificationsEnabled,
  action: {
    label: (0, _languageHandler._t)("Enable notifications"),
    onClick: ev => {
      _PosthogTrackers.default.trackInteraction("WebUserOnboardingTaskEnableNotifications", ev);

      _Notifier.Notifier.setEnabled(true);
    },
    hideOnComplete: true
  }
}];

function useUserOnboardingTasks(context) {
  const useCase = (0, _useSettings.useSettingValue)("FTUE.useCaseSelection") ?? _UseCase.UseCase.Skip;

  const relevantTasks = (0, _react.useMemo)(() => tasks.filter(it => !it.relevant || it.relevant.includes(useCase)), [useCase]);
  const completedTasks = relevantTasks.filter(it => context && it.completed(context));
  return [completedTasks, relevantTasks.filter(it => !completedTasks.includes(it))];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvbkNsaWNrU3RhcnREbSIsImV2IiwiUG9zdGhvZ1RyYWNrZXJzIiwidHJhY2tJbnRlcmFjdGlvbiIsImRlZmF1bHREaXNwYXRjaGVyIiwiZGlzcGF0Y2giLCJhY3Rpb24iLCJ0YXNrcyIsImlkIiwidGl0bGUiLCJfdCIsImRlc2NyaXB0aW9uIiwiY29tcGxldGVkIiwiY3R4IiwiaGFzRG1Sb29tcyIsInJlbGV2YW50IiwiVXNlQ2FzZSIsIlBlcnNvbmFsTWVzc2FnaW5nIiwiU2tpcCIsImxhYmVsIiwib25DbGljayIsIldvcmtNZXNzYWdpbmciLCJDb21tdW5pdHlNZXNzYWdpbmciLCJicmFuZCIsIlNka0NvbmZpZyIsImdldCIsImhhc0RldmljZXMiLCJNb2RhbCIsImNyZWF0ZURpYWxvZyIsIkFwcERvd25sb2FkRGlhbG9nIiwiaGFzQXZhdGFyIiwiQWN0aW9uIiwiVmlld1VzZXJTZXR0aW5ncyIsImluaXRpYWxUYWJJZCIsIlVzZXJUYWIiLCJHZW5lcmFsIiwiaGFzTm90aWZpY2F0aW9uc0VuYWJsZWQiLCJOb3RpZmllciIsInNldEVuYWJsZWQiLCJoaWRlT25Db21wbGV0ZSIsInVzZVVzZXJPbmJvYXJkaW5nVGFza3MiLCJjb250ZXh0IiwidXNlQ2FzZSIsInVzZVNldHRpbmdWYWx1ZSIsInJlbGV2YW50VGFza3MiLCJ1c2VNZW1vIiwiZmlsdGVyIiwiaXQiLCJpbmNsdWRlcyIsImNvbXBsZXRlZFRhc2tzIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2hvb2tzL3VzZVVzZXJPbmJvYXJkaW5nVGFza3MudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIyIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IHsgdXNlTWVtbyB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBBcHBEb3dubG9hZERpYWxvZyB9IGZyb20gXCIuLi9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvQXBwRG93bmxvYWREaWFsb2dcIjtcbmltcG9ydCB7IFVzZXJUYWIgfSBmcm9tIFwiLi4vY29tcG9uZW50cy92aWV3cy9kaWFsb2dzL1VzZXJUYWJcIjtcbmltcG9ydCB7IEJ1dHRvbkV2ZW50IH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdmlld3MvZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uL2Rpc3BhdGNoZXIvYWN0aW9uc1wiO1xuaW1wb3J0IGRlZmF1bHREaXNwYXRjaGVyIGZyb20gXCIuLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXJcIjtcbmltcG9ydCB7IF90IH0gZnJvbSBcIi4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9Nb2RhbFwiO1xuaW1wb3J0IHsgTm90aWZpZXIgfSBmcm9tIFwiLi4vTm90aWZpZXJcIjtcbmltcG9ydCBQb3N0aG9nVHJhY2tlcnMgZnJvbSBcIi4uL1Bvc3Rob2dUcmFja2Vyc1wiO1xuaW1wb3J0IFNka0NvbmZpZyBmcm9tIFwiLi4vU2RrQ29uZmlnXCI7XG5pbXBvcnQgeyBVc2VDYXNlIH0gZnJvbSBcIi4uL3NldHRpbmdzL2VudW1zL1VzZUNhc2VcIjtcbmltcG9ydCB7IHVzZVNldHRpbmdWYWx1ZSB9IGZyb20gXCIuL3VzZVNldHRpbmdzXCI7XG5pbXBvcnQgeyBVc2VyT25ib2FyZGluZ0NvbnRleHQgfSBmcm9tIFwiLi91c2VVc2VyT25ib2FyZGluZ0NvbnRleHRcIjtcblxuZXhwb3J0IGludGVyZmFjZSBVc2VyT25ib2FyZGluZ1Rhc2sge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZyB8ICgoKSA9PiBzdHJpbmcpO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcgfCAoKCkgPT4gc3RyaW5nKTtcbiAgICByZWxldmFudD86IFVzZUNhc2VbXTtcbiAgICBhY3Rpb24/OiB7XG4gICAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICAgIG9uQ2xpY2s/OiAoZXY/OiBCdXR0b25FdmVudCkgPT4gdm9pZDtcbiAgICAgICAgaHJlZj86IHN0cmluZztcbiAgICAgICAgaGlkZU9uQ29tcGxldGU/OiBib29sZWFuO1xuICAgIH07XG59XG5cbmludGVyZmFjZSBJbnRlcm5hbFVzZXJPbmJvYXJkaW5nVGFzayBleHRlbmRzIFVzZXJPbmJvYXJkaW5nVGFzayB7XG4gICAgY29tcGxldGVkOiAoY3R4OiBVc2VyT25ib2FyZGluZ0NvbnRleHQpID0+IGJvb2xlYW47XG59XG5cbmNvbnN0IG9uQ2xpY2tTdGFydERtID0gKGV2OiBCdXR0b25FdmVudCkgPT4ge1xuICAgIFBvc3Rob2dUcmFja2Vycy50cmFja0ludGVyYWN0aW9uKFwiV2ViVXNlck9uYm9hcmRpbmdUYXNrU2VuZERtXCIsIGV2KTtcbiAgICBkZWZhdWx0RGlzcGF0Y2hlci5kaXNwYXRjaCh7IGFjdGlvbjogJ3ZpZXdfY3JlYXRlX2NoYXQnIH0pO1xufTtcblxuY29uc3QgdGFza3M6IEludGVybmFsVXNlck9uYm9hcmRpbmdUYXNrW10gPSBbXG4gICAge1xuICAgICAgICBpZDogXCJjcmVhdGUtYWNjb3VudFwiLFxuICAgICAgICB0aXRsZTogX3QoXCJDcmVhdGUgYWNjb3VudFwiKSxcbiAgICAgICAgZGVzY3JpcHRpb246IF90KFwiWW91IG1hZGUgaXQhXCIpLFxuICAgICAgICBjb21wbGV0ZWQ6ICgpID0+IHRydWUsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiBcImZpbmQtZnJpZW5kc1wiLFxuICAgICAgICB0aXRsZTogX3QoXCJGaW5kIGFuZCBpbnZpdGUgeW91ciBmcmllbmRzXCIpLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJJdOKAmXMgd2hhdCB5b3XigJlyZSBoZXJlIGZvciwgc28gbGV0cyBnZXQgdG8gaXRcIiksXG4gICAgICAgIGNvbXBsZXRlZDogKGN0eDogVXNlck9uYm9hcmRpbmdDb250ZXh0KSA9PiBjdHguaGFzRG1Sb29tcyxcbiAgICAgICAgcmVsZXZhbnQ6IFtVc2VDYXNlLlBlcnNvbmFsTWVzc2FnaW5nLCBVc2VDYXNlLlNraXBdLFxuICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgIGxhYmVsOiBfdChcIkZpbmQgZnJpZW5kc1wiKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tTdGFydERtLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICBpZDogXCJmaW5kLWNvd29ya2Vyc1wiLFxuICAgICAgICB0aXRsZTogX3QoXCJGaW5kIGFuZCBpbnZpdGUgeW91ciBjby13b3JrZXJzXCIpLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJHZXQgc3R1ZmYgZG9uZSBieSBmaW5kaW5nIHlvdXIgdGVhbW1hdGVzXCIpLFxuICAgICAgICBjb21wbGV0ZWQ6IChjdHg6IFVzZXJPbmJvYXJkaW5nQ29udGV4dCkgPT4gY3R4Lmhhc0RtUm9vbXMsXG4gICAgICAgIHJlbGV2YW50OiBbVXNlQ2FzZS5Xb3JrTWVzc2FnaW5nXSxcbiAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICBsYWJlbDogX3QoXCJGaW5kIHBlb3BsZVwiKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IG9uQ2xpY2tTdGFydERtLFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICBpZDogXCJmaW5kLWNvbW11bml0eS1tZW1iZXJzXCIsXG4gICAgICAgIHRpdGxlOiBfdChcIkZpbmQgYW5kIGludml0ZSB5b3VyIGNvbW11bml0eSBtZW1iZXJzXCIpLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJHZXQgc3R1ZmYgZG9uZSBieSBmaW5kaW5nIHlvdXIgdGVhbW1hdGVzXCIpLFxuICAgICAgICBjb21wbGV0ZWQ6IChjdHg6IFVzZXJPbmJvYXJkaW5nQ29udGV4dCkgPT4gY3R4Lmhhc0RtUm9vbXMsXG4gICAgICAgIHJlbGV2YW50OiBbVXNlQ2FzZS5Db21tdW5pdHlNZXNzYWdpbmddLFxuICAgICAgICBhY3Rpb246IHtcbiAgICAgICAgICAgIGxhYmVsOiBfdChcIkZpbmQgcGVvcGxlXCIpLFxuICAgICAgICAgICAgb25DbGljazogb25DbGlja1N0YXJ0RG0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiBcImRvd25sb2FkLWFwcHNcIixcbiAgICAgICAgdGl0bGU6ICgpID0+IF90KFwiRG93bmxvYWQgJShicmFuZClzXCIsIHtcbiAgICAgICAgICAgIGJyYW5kOiBTZGtDb25maWcuZ2V0KFwiYnJhbmRcIiksXG4gICAgICAgIH0pLFxuICAgICAgICBkZXNjcmlwdGlvbjogKCkgPT4gX3QoXCJEb27igJl0IG1pc3MgYSB0aGluZyBieSB0YWtpbmcgJShicmFuZClzIHdpdGggeW91XCIsIHtcbiAgICAgICAgICAgIGJyYW5kOiBTZGtDb25maWcuZ2V0KFwiYnJhbmRcIiksXG4gICAgICAgIH0pLFxuICAgICAgICBjb21wbGV0ZWQ6IChjdHg6IFVzZXJPbmJvYXJkaW5nQ29udGV4dCkgPT4gY3R4Lmhhc0RldmljZXMsXG4gICAgICAgIGFjdGlvbjoge1xuICAgICAgICAgICAgbGFiZWw6IF90KFwiRG93bmxvYWQgYXBwc1wiKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChldjogQnV0dG9uRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBQb3N0aG9nVHJhY2tlcnMudHJhY2tJbnRlcmFjdGlvbihcIldlYlVzZXJPbmJvYXJkaW5nVGFza0Rvd25sb2FkQXBwc1wiLCBldik7XG4gICAgICAgICAgICAgICAgTW9kYWwuY3JlYXRlRGlhbG9nKEFwcERvd25sb2FkRGlhbG9nLCB7fSwgXCJteF9BcHBEb3dubG9hZERpYWxvZ193cmFwcGVyXCIsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAgIGlkOiBcInNldHVwLXByb2ZpbGVcIixcbiAgICAgICAgdGl0bGU6IF90KFwiU2V0IHVwIHlvdXIgcHJvZmlsZVwiKSxcbiAgICAgICAgZGVzY3JpcHRpb246IF90KFwiTWFrZSBzdXJlIHBlb3BsZSBrbm93IGl04oCZcyByZWFsbHkgeW91XCIpLFxuICAgICAgICBjb21wbGV0ZWQ6IChjdHg6IFVzZXJPbmJvYXJkaW5nQ29udGV4dCkgPT4gY3R4Lmhhc0F2YXRhcixcbiAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICBsYWJlbDogX3QoXCJZb3VyIHByb2ZpbGVcIiksXG4gICAgICAgICAgICBvbkNsaWNrOiAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgUG9zdGhvZ1RyYWNrZXJzLnRyYWNrSW50ZXJhY3Rpb24oXCJXZWJVc2VyT25ib2FyZGluZ1Rhc2tTZXR1cFByb2ZpbGVcIiwgZXYpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHREaXNwYXRjaGVyLmRpc3BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1VzZXJTZXR0aW5ncyxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFRhYklkOiBVc2VyVGFiLkdlbmVyYWwsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgICBpZDogXCJwZXJtaXNzaW9uLW5vdGlmaWNhdGlvbnNcIixcbiAgICAgICAgdGl0bGU6IF90KFwiVHVybiBvbiBub3RpZmljYXRpb25zXCIpLFxuICAgICAgICBkZXNjcmlwdGlvbjogX3QoXCJEb27igJl0IG1pc3MgYSByZXBseSBvciBpbXBvcnRhbnQgbWVzc2FnZVwiKSxcbiAgICAgICAgY29tcGxldGVkOiAoY3R4OiBVc2VyT25ib2FyZGluZ0NvbnRleHQpID0+IGN0eC5oYXNOb3RpZmljYXRpb25zRW5hYmxlZCxcbiAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICBsYWJlbDogX3QoXCJFbmFibGUgbm90aWZpY2F0aW9uc1wiKSxcbiAgICAgICAgICAgIG9uQ2xpY2s6IChldjogQnV0dG9uRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBQb3N0aG9nVHJhY2tlcnMudHJhY2tJbnRlcmFjdGlvbihcIldlYlVzZXJPbmJvYXJkaW5nVGFza0VuYWJsZU5vdGlmaWNhdGlvbnNcIiwgZXYpO1xuICAgICAgICAgICAgICAgIE5vdGlmaWVyLnNldEVuYWJsZWQodHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGlkZU9uQ29tcGxldGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgfSxcbl07XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VVc2VyT25ib2FyZGluZ1Rhc2tzKGNvbnRleHQ6IFVzZXJPbmJvYXJkaW5nQ29udGV4dCk6IFtVc2VyT25ib2FyZGluZ1Rhc2tbXSwgVXNlck9uYm9hcmRpbmdUYXNrW11dIHtcbiAgICBjb25zdCB1c2VDYXNlID0gdXNlU2V0dGluZ1ZhbHVlPFVzZUNhc2UgfCBudWxsPihcIkZUVUUudXNlQ2FzZVNlbGVjdGlvblwiKSA/PyBVc2VDYXNlLlNraXA7XG4gICAgY29uc3QgcmVsZXZhbnRUYXNrcyA9IHVzZU1lbW8oXG4gICAgICAgICgpID0+IHRhc2tzLmZpbHRlcihpdCA9PiAhaXQucmVsZXZhbnQgfHwgaXQucmVsZXZhbnQuaW5jbHVkZXModXNlQ2FzZSkpLFxuICAgICAgICBbdXNlQ2FzZV0sXG4gICAgKTtcbiAgICBjb25zdCBjb21wbGV0ZWRUYXNrcyA9IHJlbGV2YW50VGFza3MuZmlsdGVyKGl0ID0+IGNvbnRleHQgJiYgaXQuY29tcGxldGVkKGNvbnRleHQpKTtcbiAgICByZXR1cm4gW2NvbXBsZXRlZFRhc2tzLCByZWxldmFudFRhc2tzLmZpbHRlcihpdCA9PiAhY29tcGxldGVkVGFza3MuaW5jbHVkZXMoaXQpKV07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQWdCQTs7QUFFQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUE3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbUNBLE1BQU1BLGNBQWMsR0FBSUMsRUFBRCxJQUFxQjtFQUN4Q0Msd0JBQUEsQ0FBZ0JDLGdCQUFoQixDQUFpQyw2QkFBakMsRUFBZ0VGLEVBQWhFOztFQUNBRyxtQkFBQSxDQUFrQkMsUUFBbEIsQ0FBMkI7SUFBRUMsTUFBTSxFQUFFO0VBQVYsQ0FBM0I7QUFDSCxDQUhEOztBQUtBLE1BQU1DLEtBQW1DLEdBQUcsQ0FDeEM7RUFDSUMsRUFBRSxFQUFFLGdCQURSO0VBRUlDLEtBQUssRUFBRSxJQUFBQyxtQkFBQSxFQUFHLGdCQUFILENBRlg7RUFHSUMsV0FBVyxFQUFFLElBQUFELG1CQUFBLEVBQUcsY0FBSCxDQUhqQjtFQUlJRSxTQUFTLEVBQUUsTUFBTTtBQUpyQixDQUR3QyxFQU94QztFQUNJSixFQUFFLEVBQUUsY0FEUjtFQUVJ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