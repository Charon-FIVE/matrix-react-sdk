"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getSlashCommand = getSlashCommand;
exports.isSlashCommand = isSlashCommand;
exports.runSlashCommand = runSlashCommand;
exports.shouldSendAnyway = shouldSendAnyway;

var _react = _interopRequireDefault(require("react"));

var _logger = require("matrix-js-sdk/src/logger");

var _parts = require("./parts");

var _SlashCommands = require("../SlashCommands");

var _languageHandler = require("../languageHandler");

var _Modal = _interopRequireDefault(require("../Modal"));

var _ErrorDialog = _interopRequireDefault(require("../components/views/dialogs/ErrorDialog"));

var _QuestionDialog = _interopRequireDefault(require("../components/views/dialogs/QuestionDialog"));

/*
Copyright 2019 - 2022 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
function isSlashCommand(model) {
  const parts = model.parts;
  const firstPart = parts[0];

  if (firstPart) {
    if (firstPart.type === _parts.Type.Command && firstPart.text.startsWith("/") && !firstPart.text.startsWith("//")) {
      return true;
    }

    if (firstPart.text.startsWith("/") && !firstPart.text.startsWith("//") && (firstPart.type === _parts.Type.Plain || firstPart.type === _parts.Type.PillCandidate)) {
      return true;
    }
  }

  return false;
}

function getSlashCommand(model) {
  const commandText = model.parts.reduce((text, part) => {
    // use mxid to textify user pills in a command and room alias/id for room pills
    if (part.type === _parts.Type.UserPill || part.type === _parts.Type.RoomPill) {
      return text + part.resourceId;
    }

    return text + part.text;
  }, "");
  const {
    cmd,
    args
  } = (0, _SlashCommands.getCommand)(commandText);
  return [cmd, args, commandText];
}

async function runSlashCommand(cmd, args, roomId, threadId) {
  const result = cmd.run(roomId, threadId, args);
  let messageContent = null;
  let error = result.error;

  if (result.promise) {
    try {
      if (cmd.category === _SlashCommands.CommandCategories.messages || cmd.category === _SlashCommands.CommandCategories.effects) {
        messageContent = await result.promise;
      } else {
        await result.promise;
      }
    } catch (err) {
      error = err;
    }
  }

  if (error) {
    _logger.logger.error("Command failure: %s", error); // assume the error is a server error when the command is async


    const isServerError = !!result.promise;
    const title = isServerError ? (0, _languageHandler._td)("Server error") : (0, _languageHandler._td)("Command error");
    let errText;

    if (typeof error === 'string') {
      errText = error;
    } else if (error.translatedMessage) {
      // Check for translatable errors (newTranslatableError)
      errText = error.translatedMessage;
    } else if (error.message) {
      errText = error.message;
    } else {
      errText = (0, _languageHandler._t)("Server unavailable, overloaded, or something else went wrong.");
    }

    _Modal.default.createDialog(_ErrorDialog.default, {
      title: (0, _languageHandler._t)(title),
      description: errText
    });

    return [null, false];
  } else {
    _logger.logger.log("Command success.");

    return [messageContent, true];
  }
}

async function shouldSendAnyway(commandText) {
  // ask the user if their unknown command should be sent as a message
  const {
    finished
  } = _Modal.default.createDialog(_QuestionDialog.default, {
    title: (0, _languageHandler._t)("Unknown Command"),
    description: /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Unrecognised command: %(commandText)s", {
      commandText
    })), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("You can use <code>/help</code> to list available commands. " + "Did you mean to send this as a message?", {}, {
      code: t => /*#__PURE__*/_react.default.createElement("code", null, t)
    })), /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Hint: Begin your message with <code>//</code> to start it with a slash.", {}, {
      code: t => /*#__PURE__*/_react.default.createElement("code", null, t)
    }))),
    button: (0, _languageHandler._t)('Send as message')
  });

  const [sendAnyway] = await finished;
  return sendAnyway;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc1NsYXNoQ29tbWFuZCIsIm1vZGVsIiwicGFydHMiLCJmaXJzdFBhcnQiLCJ0eXBlIiwiVHlwZSIsIkNvbW1hbmQiLCJ0ZXh0Iiwic3RhcnRzV2l0aCIsIlBsYWluIiwiUGlsbENhbmRpZGF0ZSIsImdldFNsYXNoQ29tbWFuZCIsImNvbW1hbmRUZXh0IiwicmVkdWNlIiwicGFydCIsIlVzZXJQaWxsIiwiUm9vbVBpbGwiLCJyZXNvdXJjZUlkIiwiY21kIiwiYXJncyIsImdldENvbW1hbmQiLCJydW5TbGFzaENvbW1hbmQiLCJyb29tSWQiLCJ0aHJlYWRJZCIsInJlc3VsdCIsInJ1biIsIm1lc3NhZ2VDb250ZW50IiwiZXJyb3IiLCJwcm9taXNlIiwiY2F0ZWdvcnkiLCJDb21tYW5kQ2F0ZWdvcmllcyIsIm1lc3NhZ2VzIiwiZWZmZWN0cyIsImVyciIsImxvZ2dlciIsImlzU2VydmVyRXJyb3IiLCJ0aXRsZSIsIl90ZCIsImVyclRleHQiLCJ0cmFuc2xhdGVkTWVzc2FnZSIsIm1lc3NhZ2UiLCJfdCIsIk1vZGFsIiwiY3JlYXRlRGlhbG9nIiwiRXJyb3JEaWFsb2ciLCJkZXNjcmlwdGlvbiIsImxvZyIsInNob3VsZFNlbmRBbnl3YXkiLCJmaW5pc2hlZCIsIlF1ZXN0aW9uRGlhbG9nIiwiY29kZSIsInQiLCJidXR0b24iLCJzZW5kQW55d2F5Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2VkaXRvci9jb21tYW5kcy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE5IC0gMjAyMiBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9sb2dnZXJcIjtcbmltcG9ydCB7IElDb250ZW50IH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9ldmVudFwiO1xuXG5pbXBvcnQgRWRpdG9yTW9kZWwgZnJvbSBcIi4vbW9kZWxcIjtcbmltcG9ydCB7IFR5cGUgfSBmcm9tIFwiLi9wYXJ0c1wiO1xuaW1wb3J0IHsgQ29tbWFuZCwgQ29tbWFuZENhdGVnb3JpZXMsIGdldENvbW1hbmQgfSBmcm9tIFwiLi4vU2xhc2hDb21tYW5kc1wiO1xuaW1wb3J0IHsgSVRyYW5zbGF0YWJsZUVycm9yLCBfdCwgX3RkIH0gZnJvbSBcIi4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IE1vZGFsIGZyb20gXCIuLi9Nb2RhbFwiO1xuaW1wb3J0IEVycm9yRGlhbG9nIGZyb20gXCIuLi9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvRXJyb3JEaWFsb2dcIjtcbmltcG9ydCBRdWVzdGlvbkRpYWxvZyBmcm9tIFwiLi4vY29tcG9uZW50cy92aWV3cy9kaWFsb2dzL1F1ZXN0aW9uRGlhbG9nXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1NsYXNoQ29tbWFuZChtb2RlbDogRWRpdG9yTW9kZWwpOiBib29sZWFuIHtcbiAgICBjb25zdCBwYXJ0cyA9IG1vZGVsLnBhcnRzO1xuICAgIGNvbnN0IGZpcnN0UGFydCA9IHBhcnRzWzBdO1xuICAgIGlmIChmaXJzdFBhcnQpIHtcbiAgICAgICAgaWYgKGZpcnN0UGFydC50eXBlID09PSBUeXBlLkNvbW1hbmQgJiYgZmlyc3RQYXJ0LnRleHQuc3RhcnRzV2l0aChcIi9cIikgJiYgIWZpcnN0UGFydC50ZXh0LnN0YXJ0c1dpdGgoXCIvL1wiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZmlyc3RQYXJ0LnRleHQuc3RhcnRzV2l0aChcIi9cIikgJiYgIWZpcnN0UGFydC50ZXh0LnN0YXJ0c1dpdGgoXCIvL1wiKVxuICAgICAgICAgICAgJiYgKGZpcnN0UGFydC50eXBlID09PSBUeXBlLlBsYWluIHx8IGZpcnN0UGFydC50eXBlID09PSBUeXBlLlBpbGxDYW5kaWRhdGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTbGFzaENvbW1hbmQobW9kZWw6IEVkaXRvck1vZGVsKTogW0NvbW1hbmQsIHN0cmluZywgc3RyaW5nXSB7XG4gICAgY29uc3QgY29tbWFuZFRleHQgPSBtb2RlbC5wYXJ0cy5yZWR1Y2UoKHRleHQsIHBhcnQpID0+IHtcbiAgICAgICAgLy8gdXNlIG14aWQgdG8gdGV4dGlmeSB1c2VyIHBpbGxzIGluIGEgY29tbWFuZCBhbmQgcm9vbSBhbGlhcy9pZCBmb3Igcm9vbSBwaWxsc1xuICAgICAgICBpZiAocGFydC50eXBlID09PSBUeXBlLlVzZXJQaWxsIHx8IHBhcnQudHlwZSA9PT0gVHlwZS5Sb29tUGlsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRleHQgKyBwYXJ0LnJlc291cmNlSWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRleHQgKyBwYXJ0LnRleHQ7XG4gICAgfSwgXCJcIik7XG4gICAgY29uc3QgeyBjbWQsIGFyZ3MgfSA9IGdldENvbW1hbmQoY29tbWFuZFRleHQpO1xuICAgIHJldHVybiBbY21kLCBhcmdzLCBjb21tYW5kVGV4dF07XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5TbGFzaENvbW1hbmQoXG4gICAgY21kOiBDb21tYW5kLFxuICAgIGFyZ3M6IHN0cmluZyxcbiAgICByb29tSWQ6IHN0cmluZyxcbiAgICB0aHJlYWRJZDogc3RyaW5nIHwgbnVsbCxcbik6IFByb21pc2U8W2NvbnRlbnQ6IElDb250ZW50IHwgbnVsbCwgc3VjY2VzczogYm9vbGVhbl0+IHtcbiAgICBjb25zdCByZXN1bHQgPSBjbWQucnVuKHJvb21JZCwgdGhyZWFkSWQsIGFyZ3MpO1xuICAgIGxldCBtZXNzYWdlQ29udGVudDogSUNvbnRlbnQgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgZXJyb3IgPSByZXN1bHQuZXJyb3I7XG4gICAgaWYgKHJlc3VsdC5wcm9taXNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoY21kLmNhdGVnb3J5ID09PSBDb21tYW5kQ2F0ZWdvcmllcy5tZXNzYWdlcyB8fCBjbWQuY2F0ZWdvcnkgPT09IENvbW1hbmRDYXRlZ29yaWVzLmVmZmVjdHMpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGVudCA9IGF3YWl0IHJlc3VsdC5wcm9taXNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCByZXN1bHQucHJvbWlzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBlcnJvciA9IGVycjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiQ29tbWFuZCBmYWlsdXJlOiAlc1wiLCBlcnJvcik7XG4gICAgICAgIC8vIGFzc3VtZSB0aGUgZXJyb3IgaXMgYSBzZXJ2ZXIgZXJyb3Igd2hlbiB0aGUgY29tbWFuZCBpcyBhc3luY1xuICAgICAgICBjb25zdCBpc1NlcnZlckVycm9yID0gISFyZXN1bHQucHJvbWlzZTtcbiAgICAgICAgY29uc3QgdGl0bGUgPSBpc1NlcnZlckVycm9yID8gX3RkKFwiU2VydmVyIGVycm9yXCIpIDogX3RkKFwiQ29tbWFuZCBlcnJvclwiKTtcblxuICAgICAgICBsZXQgZXJyVGV4dDtcbiAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGVyclRleHQgPSBlcnJvcjtcbiAgICAgICAgfSBlbHNlIGlmICgoZXJyb3IgYXMgSVRyYW5zbGF0YWJsZUVycm9yKS50cmFuc2xhdGVkTWVzc2FnZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHRyYW5zbGF0YWJsZSBlcnJvcnMgKG5ld1RyYW5zbGF0YWJsZUVycm9yKVxuICAgICAgICAgICAgZXJyVGV4dCA9IChlcnJvciBhcyBJVHJhbnNsYXRhYmxlRXJyb3IpLnRyYW5zbGF0ZWRNZXNzYWdlO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgIGVyclRleHQgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZXJyVGV4dCA9IF90KFwiU2VydmVyIHVuYXZhaWxhYmxlLCBvdmVybG9hZGVkLCBvciBzb21ldGhpbmcgZWxzZSB3ZW50IHdyb25nLlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE1vZGFsLmNyZWF0ZURpYWxvZyhFcnJvckRpYWxvZywge1xuICAgICAgICAgICAgdGl0bGU6IF90KHRpdGxlKSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBlcnJUZXh0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFtudWxsLCBmYWxzZV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkNvbW1hbmQgc3VjY2Vzcy5cIik7XG4gICAgICAgIHJldHVybiBbbWVzc2FnZUNvbnRlbnQsIHRydWVdO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNob3VsZFNlbmRBbnl3YXkoY29tbWFuZFRleHQ6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIGFzayB0aGUgdXNlciBpZiB0aGVpciB1bmtub3duIGNvbW1hbmQgc2hvdWxkIGJlIHNlbnQgYXMgYSBtZXNzYWdlXG4gICAgY29uc3QgeyBmaW5pc2hlZCB9ID0gTW9kYWwuY3JlYXRlRGlhbG9nKFF1ZXN0aW9uRGlhbG9nLCB7XG4gICAgICAgIHRpdGxlOiBfdChcIlVua25vd24gQ29tbWFuZFwiKSxcbiAgICAgICAgZGVzY3JpcHRpb246IDxkaXY+XG4gICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICB7IF90KFwiVW5yZWNvZ25pc2VkIGNvbW1hbmQ6ICUoY29tbWFuZFRleHQpc1wiLCB7IGNvbW1hbmRUZXh0IH0pIH1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgIHsgX3QoXCJZb3UgY2FuIHVzZSA8Y29kZT4vaGVscDwvY29kZT4gdG8gbGlzdCBhdmFpbGFibGUgY29tbWFuZHMuIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJEaWQgeW91IG1lYW4gdG8gc2VuZCB0aGlzIGFzIGEgbWVzc2FnZT9cIiwge30sIHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogdCA9PiA8Y29kZT57IHQgfTwvY29kZT4sXG4gICAgICAgICAgICAgICAgfSkgfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgeyBfdChcIkhpbnQ6IEJlZ2luIHlvdXIgbWVzc2FnZSB3aXRoIDxjb2RlPi8vPC9jb2RlPiB0byBzdGFydCBpdCB3aXRoIGEgc2xhc2guXCIsIHt9LCB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IHQgPT4gPGNvZGU+eyB0IH08L2NvZGU+LFxuICAgICAgICAgICAgICAgIH0pIH1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgPC9kaXY+LFxuICAgICAgICBidXR0b246IF90KCdTZW5kIGFzIG1lc3NhZ2UnKSxcbiAgICB9KTtcbiAgICBjb25zdCBbc2VuZEFueXdheV0gPSBhd2FpdCBmaW5pc2hlZDtcbiAgICByZXR1cm4gc2VuZEFueXdheTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUlBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQTFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjTyxTQUFTQSxjQUFULENBQXdCQyxLQUF4QixFQUFxRDtFQUN4RCxNQUFNQyxLQUFLLEdBQUdELEtBQUssQ0FBQ0MsS0FBcEI7RUFDQSxNQUFNQyxTQUFTLEdBQUdELEtBQUssQ0FBQyxDQUFELENBQXZCOztFQUNBLElBQUlDLFNBQUosRUFBZTtJQUNYLElBQUlBLFNBQVMsQ0FBQ0MsSUFBVixLQUFtQkMsV0FBQSxDQUFLQyxPQUF4QixJQUFtQ0gsU0FBUyxDQUFDSSxJQUFWLENBQWVDLFVBQWYsQ0FBMEIsR0FBMUIsQ0FBbkMsSUFBcUUsQ0FBQ0wsU0FBUyxDQUFDSSxJQUFWLENBQWVDLFVBQWYsQ0FBMEIsSUFBMUIsQ0FBMUUsRUFBMkc7TUFDdkcsT0FBTyxJQUFQO0lBQ0g7O0lBRUQsSUFBSUwsU0FBUyxDQUFDSSxJQUFWLENBQWVDLFVBQWYsQ0FBMEIsR0FBMUIsS0FBa0MsQ0FBQ0wsU0FBUyxDQUFDSSxJQUFWLENBQWVDLFVBQWYsQ0FBMEIsSUFBMUIsQ0FBbkMsS0FDSUwsU0FBUyxDQUFDQyxJQUFWLEtBQW1CQyxXQUFBLENBQUtJLEtBQXhCLElBQWlDTixTQUFTLENBQUNDLElBQVYs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