"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _offset = _interopRequireDefault(require("./offset"));

/*
Copyright 2019 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class DocumentPosition {
  constructor(index, offset) {
    this.index = index;
    this.offset = offset;
  }

  compare(otherPos) {
    if (this.index === otherPos.index) {
      return this.offset - otherPos.offset;
    } else {
      return this.index - otherPos.index;
    }
  }

  iteratePartsBetween(other, model, callback) {
    if (this.index === -1 || other.index === -1) {
      return;
    }

    const [startPos, endPos] = this.compare(other) < 0 ? [this, other] : [other, this];

    if (startPos.index === endPos.index) {
      callback(model.parts[this.index], startPos.offset, endPos.offset);
    } else {
      const firstPart = model.parts[startPos.index];
      callback(firstPart, startPos.offset, firstPart.text.length);

      for (let i = startPos.index + 1; i < endPos.index; ++i) {
        const part = model.parts[i];
        callback(part, 0, part.text.length);
      }

      const lastPart = model.parts[endPos.index];
      callback(lastPart, 0, endPos.offset);
    }
  }

  forwardsWhile(model, predicate) {
    if (this.index === -1) {
      return this;
    }

    let {
      index,
      offset
    } = this;
    const {
      parts
    } = model;

    while (index < parts.length) {
      const part = parts[index];

      while (offset < part.text.length) {
        if (!predicate(index, offset, part)) {
          return new DocumentPosition(index, offset);
        }

        offset += 1;
      } // end reached


      if (index === parts.length - 1) {
        return new DocumentPosition(index, offset);
      } else {
        index += 1;
        offset = 0;
      }
    }
  }

  backwardsWhile(model, predicate) {
    if (this.index === -1) {
      return this;
    }

    let {
      index,
      offset
    } = this;
    const parts = model.parts;

    while (index >= 0) {
      const part = parts[index];

      while (offset > 0) {
        if (!predicate(index, offset - 1, part)) {
          return new DocumentPosition(index, offset);
        }

        offset -= 1;
      } // start reached


      if (index === 0) {
        return new DocumentPosition(index, offset);
      } else {
        index -= 1;
        offset = parts[index].text.length;
      }
    }
  }

  asOffset(model) {
    if (this.index === -1) {
      return new _offset.default(0, true);
    }

    let offset = 0;

    for (let i = 0; i < this.index; ++i) {
      offset += model.parts[i].text.length;
    }

    offset += this.offset;
    const lastPart = model.parts[this.index];
    const atEnd = !lastPart || offset >= lastPart.text.length; // if no last part, we're at the end

    return new _offset.default(offset, atEnd);
  }

  isAtEnd(model) {
    if (model.parts.length === 0) {
      return true;
    }

    const lastPartIdx = model.parts.length - 1;
    const lastPart = model.parts[lastPartIdx];
    return this.index === lastPartIdx && this.offset === lastPart.text.length;
  }

  isAtStart() {
    return this.index === 0 && this.offset === 0;
  }

}

exports.default = DocumentPosition;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEb2N1bWVudFBvc2l0aW9uIiwiY29uc3RydWN0b3IiLCJpbmRleCIsIm9mZnNldCIsImNvbXBhcmUiLCJvdGhlclBvcyIsIml0ZXJhdGVQYXJ0c0JldHdlZW4iLCJvdGhlciIsIm1vZGVsIiwiY2FsbGJhY2siLCJzdGFydFBvcyIsImVuZFBvcyIsInBhcnRzIiwiZmlyc3RQYXJ0IiwidGV4dCIsImxlbmd0aCIsImkiLCJwYXJ0IiwibGFzdFBhcnQiLCJmb3J3YXJkc1doaWxlIiwicHJlZGljYXRlIiwiYmFja3dhcmRzV2hpbGUiLCJhc09mZnNldCIsIkRvY3VtZW50T2Zmc2V0IiwiYXRFbmQiLCJpc0F0RW5kIiwibGFzdFBhcnRJZHgiLCJpc0F0U3RhcnQiXSwic291cmNlcyI6WyIuLi8uLi9zcmMvZWRpdG9yL3Bvc2l0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxOSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBEb2N1bWVudE9mZnNldCBmcm9tIFwiLi9vZmZzZXRcIjtcbmltcG9ydCBFZGl0b3JNb2RlbCBmcm9tIFwiLi9tb2RlbFwiO1xuaW1wb3J0IHsgUGFydCB9IGZyb20gXCIuL3BhcnRzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVBvc2l0aW9uIHtcbiAgICBpbmRleDogbnVtYmVyO1xuICAgIG9mZnNldDogbnVtYmVyO1xufVxuXG50eXBlIENhbGxiYWNrID0gKHBhcnQ6IFBhcnQsIHN0YXJ0SWR4OiBudW1iZXIsIGVuZElkeDogbnVtYmVyKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgUHJlZGljYXRlID0gKGluZGV4OiBudW1iZXIsIG9mZnNldDogbnVtYmVyLCBwYXJ0OiBQYXJ0KSA9PiBib29sZWFuO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb2N1bWVudFBvc2l0aW9uIGltcGxlbWVudHMgSVBvc2l0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgaW5kZXg6IG51bWJlciwgcHVibGljIHJlYWRvbmx5IG9mZnNldDogbnVtYmVyKSB7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBhcmUob3RoZXJQb3M6IERvY3VtZW50UG9zaXRpb24pOiBudW1iZXIge1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gb3RoZXJQb3MuaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZnNldCAtIG90aGVyUG9zLm9mZnNldDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4IC0gb3RoZXJQb3MuaW5kZXg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgaXRlcmF0ZVBhcnRzQmV0d2VlbihvdGhlcjogRG9jdW1lbnRQb3NpdGlvbiwgbW9kZWw6IEVkaXRvck1vZGVsLCBjYWxsYmFjazogQ2FsbGJhY2spOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT09IC0xIHx8IG90aGVyLmluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IFtzdGFydFBvcywgZW5kUG9zXSA9IHRoaXMuY29tcGFyZShvdGhlcikgPCAwID8gW3RoaXMsIG90aGVyXSA6IFtvdGhlciwgdGhpc107XG4gICAgICAgIGlmIChzdGFydFBvcy5pbmRleCA9PT0gZW5kUG9zLmluZGV4KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhtb2RlbC5wYXJ0c1t0aGlzLmluZGV4XSwgc3RhcnRQb3Mub2Zmc2V0LCBlbmRQb3Mub2Zmc2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0UGFydCA9IG1vZGVsLnBhcnRzW3N0YXJ0UG9zLmluZGV4XTtcbiAgICAgICAgICAgIGNhbGxiYWNrKGZpcnN0UGFydCwgc3RhcnRQb3Mub2Zmc2V0LCBmaXJzdFBhcnQudGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0UG9zLmluZGV4ICsgMTsgaSA8IGVuZFBvcy5pbmRleDsgKytpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydCA9IG1vZGVsLnBhcnRzW2ldO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKHBhcnQsIDAsIHBhcnQudGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGFzdFBhcnQgPSBtb2RlbC5wYXJ0c1tlbmRQb3MuaW5kZXhdO1xuICAgICAgICAgICAgY2FsbGJhY2sobGFzdFBhcnQsIDAsIGVuZFBvcy5vZmZzZXQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGZvcndhcmRzV2hpbGUobW9kZWw6IEVkaXRvck1vZGVsLCBwcmVkaWNhdGU6IFByZWRpY2F0ZSk6IERvY3VtZW50UG9zaXRpb24ge1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgeyBwYXJ0cyB9ID0gbW9kZWw7XG4gICAgICAgIHdoaWxlIChpbmRleCA8IHBhcnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2luZGV4XTtcbiAgICAgICAgICAgIHdoaWxlIChvZmZzZXQgPCBwYXJ0LnRleHQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmVkaWNhdGUoaW5kZXgsIG9mZnNldCwgcGFydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFBvc2l0aW9uKGluZGV4LCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVuZCByZWFjaGVkXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IChwYXJ0cy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRQb3NpdGlvbihpbmRleCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggKz0gMTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGJhY2t3YXJkc1doaWxlKG1vZGVsOiBFZGl0b3JNb2RlbCwgcHJlZGljYXRlOiBQcmVkaWNhdGUpOiBEb2N1bWVudFBvc2l0aW9uIHtcbiAgICAgICAgaWYgKHRoaXMuaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gbW9kZWwucGFydHM7XG4gICAgICAgIHdoaWxlIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJ0ID0gcGFydHNbaW5kZXhdO1xuICAgICAgICAgICAgd2hpbGUgKG9mZnNldCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByZWRpY2F0ZShpbmRleCwgb2Zmc2V0IC0gMSwgcGFydCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFBvc2l0aW9uKGluZGV4LCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmZzZXQgLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHN0YXJ0IHJlYWNoZWRcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRQb3NpdGlvbihpbmRleCwgb2Zmc2V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5kZXggLT0gMTtcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBwYXJ0c1tpbmRleF0udGV4dC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYXNPZmZzZXQobW9kZWw6IEVkaXRvck1vZGVsKTogRG9jdW1lbnRPZmZzZXQge1xuICAgICAgICBpZiAodGhpcy5pbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRPZmZzZXQoMCwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5pbmRleDsgKytpKSB7XG4gICAgICAgICAgICBvZmZzZXQgKz0gbW9kZWwucGFydHNbaV0udGV4dC5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgb2Zmc2V0ICs9IHRoaXMub2Zmc2V0O1xuICAgICAgICBjb25zdCBsYXN0UGFydCA9IG1vZGVsLnBhcnRzW3RoaXMuaW5kZXhdO1xuICAgICAgICBjb25zdCBhdEVuZCA9ICFsYXN0UGFydCB8fCBvZmZzZXQgPj0gbGFzdFBhcnQudGV4dC5sZW5ndGg7IC8vIGlmIG5vIGxhc3QgcGFydCwgd2UncmUgYXQgdGhlIGVuZFxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50T2Zmc2V0KG9mZnNldCwgYXRFbmQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0F0RW5kKG1vZGVsOiBFZGl0b3JNb2RlbCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAobW9kZWwucGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsYXN0UGFydElkeCA9IG1vZGVsLnBhcnRzLmxlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IGxhc3RQYXJ0ID0gbW9kZWwucGFydHNbbGFzdFBhcnRJZHhdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleCA9PT0gbGFzdFBhcnRJZHggJiYgdGhpcy5vZmZzZXQgPT09IGxhc3RQYXJ0LnRleHQubGVuZ3RoO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0F0U3RhcnQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4ID09PSAwICYmIHRoaXMub2Zmc2V0ID09PSAwO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBZ0JBOztBQWhCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFjZSxNQUFNQSxnQkFBTixDQUE0QztFQUN2REMsV0FBVyxDQUFpQkMsS0FBakIsRUFBZ0RDLE1BQWhELEVBQWdFO0lBQUEsS0FBL0NELEtBQStDLEdBQS9DQSxLQUErQztJQUFBLEtBQWhCQyxNQUFn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