"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

/*
Copyright 2019 New Vector Ltd
Copyright 2019 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class AutocompleteWrapperModel {
  constructor(updateCallback, getAutocompleterComponent, updateQuery, partCreator) {
    this.updateCallback = updateCallback;
    this.getAutocompleterComponent = getAutocompleterComponent;
    this.updateQuery = updateQuery;
    this.partCreator = partCreator;
    (0, _defineProperty2.default)(this, "partIndex", void 0);
  }

  onEscape(e) {
    this.getAutocompleterComponent().onEscape(e);
  }

  close() {
    this.updateCallback({
      close: true
    });
  }

  hasSelection() {
    return this.getAutocompleterComponent().hasSelection();
  }

  hasCompletions() {
    const ac = this.getAutocompleterComponent();
    return ac && ac.countCompletions() > 0;
  }

  confirmCompletion() {
    this.getAutocompleterComponent().onConfirmCompletion();
    this.updateCallback({
      close: true
    });
  }
  /**
   * If there is no current autocompletion, start one and move to the first selection.
   */


  async startSelection() {
    const acComponent = this.getAutocompleterComponent();

    if (acComponent.countCompletions() === 0) {
      // Force completions to show for the text currently entered
      await acComponent.forceComplete();
    }
  }

  selectPreviousSelection() {
    this.getAutocompleterComponent().moveSelection(-1);
  }

  selectNextSelection() {
    this.getAutocompleterComponent().moveSelection(+1);
  }

  onPartUpdate(part, pos) {
    this.partIndex = pos.index;
    return this.updateQuery(part.text);
  }

  onComponentConfirm(completion) {
    this.updateCallback({
      replaceParts: this.partForCompletion(completion),
      close: true
    });
  }

  partForCompletion(completion) {
    const {
      completionId
    } = completion;
    const text = completion.completion;

    switch (completion.type) {
      case "room":
        return [this.partCreator.roomPill(text, completionId), this.partCreator.plain(completion.suffix)];

      case "at-room":
        return [this.partCreator.atRoomPill(completionId), this.partCreator.plain(completion.suffix)];

      case "user":
        // Insert suffix only if the pill is the part with index 0 - we are at the start of the composer
        return this.partCreator.createMentionParts(this.partIndex === 0, text, completionId);

      case "command":
        // command needs special handling for auto complete, but also renders as plain texts
        return [this.partCreator.command(text)];

      default:
        // used for emoji and other plain text completion replacement
        return this.partCreator.plainWithEmoji(text);
    }
  }

}

exports.default = AutocompleteWrapperModel;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdXRvY29tcGxldGVXcmFwcGVyTW9kZWwiLCJjb25zdHJ1Y3RvciIsInVwZGF0ZUNhbGxiYWNrIiwiZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCIsInVwZGF0ZVF1ZXJ5IiwicGFydENyZWF0b3IiLCJvbkVzY2FwZSIsImUiLCJjbG9zZSIsImhhc1NlbGVjdGlvbiIsImhhc0NvbXBsZXRpb25zIiwiYWMiLCJjb3VudENvbXBsZXRpb25zIiwiY29uZmlybUNvbXBsZXRpb24iLCJvbkNvbmZpcm1Db21wbGV0aW9uIiwic3RhcnRTZWxlY3Rpb24iLCJhY0NvbXBvbmVudCIsImZvcmNlQ29tcGxldGUiLCJzZWxlY3RQcmV2aW91c1NlbGVjdGlvbiIsIm1vdmVTZWxlY3Rpb24iLCJzZWxlY3ROZXh0U2VsZWN0aW9uIiwib25QYXJ0VXBkYXRlIiwicGFydCIsInBvcyIsInBhcnRJbmRleCIsImluZGV4IiwidGV4dCIsIm9uQ29tcG9uZW50Q29uZmlybSIsImNvbXBsZXRpb24iLCJyZXBsYWNlUGFydHMiLCJwYXJ0Rm9yQ29tcGxldGlvbiIsImNvbXBsZXRpb25JZCIsInR5cGUiLCJyb29tUGlsbCIsInBsYWluIiwic3VmZml4IiwiYXRSb29tUGlsbCIsImNyZWF0ZU1lbnRpb25QYXJ0cyIsImNvbW1hbmQiLCJwbGFpbldpdGhFbW9qaSJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9lZGl0b3IvYXV0b2NvbXBsZXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxOSBOZXcgVmVjdG9yIEx0ZFxuQ29weXJpZ2h0IDIwMTkgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgeyBLZXlib2FyZEV2ZW50IH0gZnJvbSBcInJlYWN0XCI7XG5cbmltcG9ydCB7IFBhcnQsIENvbW1hbmRQYXJ0Q3JlYXRvciwgUGFydENyZWF0b3IgfSBmcm9tIFwiLi9wYXJ0c1wiO1xuaW1wb3J0IERvY3VtZW50UG9zaXRpb24gZnJvbSBcIi4vcG9zaXRpb25cIjtcbmltcG9ydCB7IElDb21wbGV0aW9uIH0gZnJvbSBcIi4uL2F1dG9jb21wbGV0ZS9BdXRvY29tcGxldGVyXCI7XG5pbXBvcnQgQXV0b2NvbXBsZXRlIGZyb20gXCIuLi9jb21wb25lbnRzL3ZpZXdzL3Jvb21zL0F1dG9jb21wbGV0ZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDYWxsYmFjayB7XG4gICAgcmVwbGFjZVBhcnRzPzogUGFydFtdO1xuICAgIGNsb3NlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IHR5cGUgVXBkYXRlQ2FsbGJhY2sgPSAoZGF0YTogSUNhbGxiYWNrKSA9PiB2b2lkO1xuZXhwb3J0IHR5cGUgR2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCA9ICgpID0+IEF1dG9jb21wbGV0ZTtcbmV4cG9ydCB0eXBlIFVwZGF0ZVF1ZXJ5ID0gKHRlc3Q6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXV0b2NvbXBsZXRlV3JhcHBlck1vZGVsIHtcbiAgICBwcml2YXRlIHBhcnRJbmRleDogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgdXBkYXRlQ2FsbGJhY2s6IFVwZGF0ZUNhbGxiYWNrLFxuICAgICAgICBwcml2YXRlIGdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQ6IEdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQsXG4gICAgICAgIHByaXZhdGUgdXBkYXRlUXVlcnk6IFVwZGF0ZVF1ZXJ5LFxuICAgICAgICBwcml2YXRlIHBhcnRDcmVhdG9yOiBQYXJ0Q3JlYXRvciB8IENvbW1hbmRQYXJ0Q3JlYXRvcixcbiAgICApIHtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25Fc2NhcGUoZTogS2V5Ym9hcmRFdmVudCk6IHZvaWQge1xuICAgICAgICB0aGlzLmdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQoKS5vbkVzY2FwZShlKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbGJhY2soeyBjbG9zZTogdHJ1ZSB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaGFzU2VsZWN0aW9uKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdXRvY29tcGxldGVyQ29tcG9uZW50KCkuaGFzU2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGhhc0NvbXBsZXRpb25zKCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBhYyA9IHRoaXMuZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCgpO1xuICAgICAgICByZXR1cm4gYWMgJiYgYWMuY291bnRDb21wbGV0aW9ucygpID4gMDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29uZmlybUNvbXBsZXRpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCgpLm9uQ29uZmlybUNvbXBsZXRpb24oKTtcbiAgICAgICAgdGhpcy51cGRhdGVDYWxsYmFjayh7IGNsb3NlOiB0cnVlIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIElmIHRoZXJlIGlzIG5vIGN1cnJlbnQgYXV0b2NvbXBsZXRpb24sIHN0YXJ0IG9uZSBhbmQgbW92ZSB0byB0aGUgZmlyc3Qgc2VsZWN0aW9uLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBzdGFydFNlbGVjdGlvbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgYWNDb21wb25lbnQgPSB0aGlzLmdldEF1dG9jb21wbGV0ZXJDb21wb25lbnQoKTtcbiAgICAgICAgaWYgKGFjQ29tcG9uZW50LmNvdW50Q29tcGxldGlvbnMoKSA9PT0gMCkge1xuICAgICAgICAgICAgLy8gRm9yY2UgY29tcGxldGlvbnMgdG8gc2hvdyBmb3IgdGhlIHRleHQgY3VycmVudGx5IGVudGVyZWRcbiAgICAgICAgICAgIGF3YWl0IGFjQ29tcG9uZW50LmZvcmNlQ29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzZWxlY3RQcmV2aW91c1NlbGVjdGlvbigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5nZXRBdXRvY29tcGxldGVyQ29tcG9uZW50KCkubW92ZVNlbGVjdGlvbigtMSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNlbGVjdE5leHRTZWxlY3Rpb24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZ2V0QXV0b2NvbXBsZXRlckNvbXBvbmVudCgpLm1vdmVTZWxlY3Rpb24oKzEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvblBhcnRVcGRhdGUocGFydDogUGFydCwgcG9zOiBEb2N1bWVudFBvc2l0aW9uKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgICAgIHRoaXMucGFydEluZGV4ID0gcG9zLmluZGV4O1xuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVRdWVyeShwYXJ0LnRleHQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBvbkNvbXBvbmVudENvbmZpcm0oY29tcGxldGlvbjogSUNvbXBsZXRpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy51cGRhdGVDYWxsYmFjayh7XG4gICAgICAgICAgICByZXBsYWNlUGFydHM6IHRoaXMucGFydEZvckNvbXBsZXRpb24oY29tcGxldGlvbiksXG4gICAgICAgICAgICBjbG9zZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBwYXJ0Rm9yQ29tcGxldGlvbihjb21wbGV0aW9uOiBJQ29tcGxldGlvbik6IFBhcnRbXSB7XG4gICAgICAgIGNvbnN0IHsgY29tcGxldGlvbklkIH0gPSBjb21wbGV0aW9uO1xuICAgICAgICBjb25zdCB0ZXh0ID0gY29tcGxldGlvbi5jb21wbGV0aW9uO1xuICAgICAgICBzd2l0Y2ggKGNvbXBsZXRpb24udHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInJvb21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMucGFydENyZWF0b3Iucm9vbVBpbGwodGV4dCwgY29tcGxldGlvbklkKSwgdGhpcy5wYXJ0Q3JlYXRvci5wbGFpbihjb21wbGV0aW9uLnN1ZmZpeCldO1xuICAgICAgICAgICAgY2FzZSBcImF0LXJvb21cIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMucGFydENyZWF0b3IuYXRSb29tUGlsbChjb21wbGV0aW9uSWQpLCB0aGlzLnBhcnRDcmVhdG9yLnBsYWluKGNvbXBsZXRpb24uc3VmZml4KV07XG4gICAgICAgICAgICBjYXNlIFwidXNlclwiOlxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBzdWZmaXggb25seSBpZiB0aGUgcGlsbCBpcyB0aGUgcGFydCB3aXRoIGluZGV4IDAgLSB3ZSBhcmUgYXQgdGhlIHN0YXJ0IG9mIHRoZSBjb21wb3NlclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnRDcmVhdG9yLmNyZWF0ZU1lbnRpb25QYXJ0cyh0aGlzLnBhcnRJbmRleCA9PT0gMCwgdGV4dCwgY29tcGxldGlvbklkKTtcbiAgICAgICAgICAgIGNhc2UgXCJjb21tYW5kXCI6XG4gICAgICAgICAgICAgICAgLy8gY29tbWFuZCBuZWVkcyBzcGVjaWFsIGhhbmRsaW5nIGZvciBhdXRvIGNvbXBsZXRlLCBidXQgYWxzbyByZW5kZXJzIGFzIHBsYWluIHRleHRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIFsodGhpcy5wYXJ0Q3JlYXRvciBhcyBDb21tYW5kUGFydENyZWF0b3IpLmNvbW1hbmQodGV4dCldO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvLyB1c2VkIGZvciBlbW9qaSBhbmQgb3RoZXIgcGxhaW4gdGV4dCBjb21wbGV0aW9uIHJlcGxhY2VtZW50XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFydENyZWF0b3IucGxhaW5XaXRoRW1vamkodGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFrQmUsTUFBTUEsd0JBQU4sQ0FBK0I7RUFHMUNDLFdBQVcsQ0FDQ0MsY0FERCxFQUVDQyx5QkFGRCxFQUdDQyxXQUhELEVBSUNDLFdBSkQsRUFLVDtJQUFBLEtBSlVILGNBSVYsR0FKVUEsY0FJVjtJQUFBLEtBSFVDLHlCQUdWLEdBSFVBLHlCQUdWO0lBQUEsS0FGVUMsV0FFVixHQUZVQSxXQUVWO0lBQUEsS0FEVUMsV0FDVixHQURVQSxXQUNWO0lBQUE7RUFDRDs7RUFFTUMsUUFBUSxDQUFDQyxDQUFELEVBQXlCO0lBQ3BDLEtBQUtKLHlCQUFMLEdBQWlDRyxRQUFqQyxDQUEwQ0MsQ0FBMUM7RUFDSDs7RUFFTUMsS0FBSyxHQUFTO0lBQ2pCLEtBQUtOLGNBQUwsQ0FBb0I7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