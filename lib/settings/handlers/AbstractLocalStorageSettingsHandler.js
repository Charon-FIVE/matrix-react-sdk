"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _SettingsHandler = _interopRequireDefault(require("./SettingsHandler"));

/*
Copyright 2019 - 2022 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

/**
 * Abstract settings handler wrapping around localStorage making getValue calls cheaper
 * by caching the values and listening for localStorage updates from other tabs.
 */
class AbstractLocalStorageSettingsHandler extends _SettingsHandler.default {
  // Shared cache between all subclass instances
  // Expose the clear event for Lifecycle to call, the storage listener only fires for changes from other tabs
  static clear() {
    AbstractLocalStorageSettingsHandler.itemCache.clear();
    AbstractLocalStorageSettingsHandler.objectCache.clear();
  }

  constructor() {
    super();

    if (!AbstractLocalStorageSettingsHandler.storageListenerBound) {
      AbstractLocalStorageSettingsHandler.storageListenerBound = true; // Listen for storage changes from other tabs to bust the cache

      window.addEventListener("storage", AbstractLocalStorageSettingsHandler.onStorageEvent);
    }
  }

  getItem(key) {
    if (!AbstractLocalStorageSettingsHandler.itemCache.has(key)) {
      const value = localStorage.getItem(key);
      AbstractLocalStorageSettingsHandler.itemCache.set(key, value);
      return value;
    }

    return AbstractLocalStorageSettingsHandler.itemCache.get(key);
  }

  getBoolean(key) {
    const item = this.getItem(key);
    if (item === "true") return true;
    if (item === "false") return false; // Fall back to the next config level

    return null;
  }

  getObject(key) {
    if (!AbstractLocalStorageSettingsHandler.objectCache.has(key)) {
      try {
        const value = JSON.parse(localStorage.getItem(key));
        AbstractLocalStorageSettingsHandler.objectCache.set(key, value);
        return value;
      } catch (err) {
        console.error("Failed to parse localStorage object", err);
        return null;
      }
    }

    return AbstractLocalStorageSettingsHandler.objectCache.get(key);
  }

  setItem(key, value) {
    AbstractLocalStorageSettingsHandler.itemCache.set(key, value);
    localStorage.setItem(key, value);
  }

  setBoolean(key, value) {
    this.setItem(key, `${value}`);
  }

  setObject(key, value) {
    AbstractLocalStorageSettingsHandler.objectCache.set(key, value);
    localStorage.setItem(key, JSON.stringify(value));
  } // handles both items and objects


  removeItem(key) {
    localStorage.removeItem(key);
    AbstractLocalStorageSettingsHandler.itemCache.delete(key);
    AbstractLocalStorageSettingsHandler.objectCache.delete(key);
  }

  isSupported() {
    return localStorage !== undefined && localStorage !== null;
  }

}

exports.default = AbstractLocalStorageSettingsHandler;
(0, _defineProperty2.default)(AbstractLocalStorageSettingsHandler, "itemCache", new Map());
(0, _defineProperty2.default)(AbstractLocalStorageSettingsHandler, "objectCache", new Map());
(0, _defineProperty2.default)(AbstractLocalStorageSettingsHandler, "storageListenerBound", false);
(0, _defineProperty2.default)(AbstractLocalStorageSettingsHandler, "onStorageEvent", e => {
  if (e.key === null) {
    AbstractLocalStorageSettingsHandler.clear();
  } else {
    AbstractLocalStorageSettingsHandler.itemCache.delete(e.key);
    AbstractLocalStorageSettingsHandler.objectCache.delete(e.key);
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlciIsIlNldHRpbmdzSGFuZGxlciIsImNsZWFyIiwiaXRlbUNhY2hlIiwib2JqZWN0Q2FjaGUiLCJjb25zdHJ1Y3RvciIsInN0b3JhZ2VMaXN0ZW5lckJvdW5kIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uU3RvcmFnZUV2ZW50IiwiZ2V0SXRlbSIsImtleSIsImhhcyIsInZhbHVlIiwibG9jYWxTdG9yYWdlIiwic2V0IiwiZ2V0IiwiZ2V0Qm9vbGVhbiIsIml0ZW0iLCJnZXRPYmplY3QiLCJKU09OIiwicGFyc2UiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJzZXRJdGVtIiwic2V0Qm9vbGVhbiIsInNldE9iamVjdCIsInN0cmluZ2lmeSIsInJlbW92ZUl0ZW0iLCJkZWxldGUiLCJpc1N1cHBvcnRlZCIsInVuZGVmaW5lZCIsIk1hcCIsImUiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2V0dGluZ3MvaGFuZGxlcnMvQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE5IC0gMjAyMiBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBTZXR0aW5nc0hhbmRsZXIgZnJvbSBcIi4vU2V0dGluZ3NIYW5kbGVyXCI7XG5cbi8qKlxuICogQWJzdHJhY3Qgc2V0dGluZ3MgaGFuZGxlciB3cmFwcGluZyBhcm91bmQgbG9jYWxTdG9yYWdlIG1ha2luZyBnZXRWYWx1ZSBjYWxscyBjaGVhcGVyXG4gKiBieSBjYWNoaW5nIHRoZSB2YWx1ZXMgYW5kIGxpc3RlbmluZyBmb3IgbG9jYWxTdG9yYWdlIHVwZGF0ZXMgZnJvbSBvdGhlciB0YWJzLlxuICovXG5leHBvcnQgZGVmYXVsdCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlciBleHRlbmRzIFNldHRpbmdzSGFuZGxlciB7XG4gICAgLy8gU2hhcmVkIGNhY2hlIGJldHdlZW4gYWxsIHN1YmNsYXNzIGluc3RhbmNlc1xuICAgIHByaXZhdGUgc3RhdGljIGl0ZW1DYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmc+KCk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgb2JqZWN0Q2FjaGUgPSBuZXcgTWFwPHN0cmluZywgb2JqZWN0PigpO1xuICAgIHByaXZhdGUgc3RhdGljIHN0b3JhZ2VMaXN0ZW5lckJvdW5kID0gZmFsc2U7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBvblN0b3JhZ2VFdmVudCA9IChlOiBTdG9yYWdlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGUua2V5ID09PSBudWxsKSB7XG4gICAgICAgICAgICBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5jbGVhcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIuaXRlbUNhY2hlLmRlbGV0ZShlLmtleSk7XG4gICAgICAgICAgICBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5vYmplY3RDYWNoZS5kZWxldGUoZS5rZXkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIEV4cG9zZSB0aGUgY2xlYXIgZXZlbnQgZm9yIExpZmVjeWNsZSB0byBjYWxsLCB0aGUgc3RvcmFnZSBsaXN0ZW5lciBvbmx5IGZpcmVzIGZvciBjaGFuZ2VzIGZyb20gb3RoZXIgdGFic1xuICAgIHB1YmxpYyBzdGF0aWMgY2xlYXIoKSB7XG4gICAgICAgIEFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLml0ZW1DYWNoZS5jbGVhcigpO1xuICAgICAgICBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5vYmplY3RDYWNoZS5jbGVhcigpO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcblxuICAgICAgICBpZiAoIUFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLnN0b3JhZ2VMaXN0ZW5lckJvdW5kKSB7XG4gICAgICAgICAgICBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5zdG9yYWdlTGlzdGVuZXJCb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAvLyBMaXN0ZW4gZm9yIHN0b3JhZ2UgY2hhbmdlcyBmcm9tIG90aGVyIHRhYnMgdG8gYnVzdCB0aGUgY2FjaGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5vblN0b3JhZ2VFdmVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0SXRlbShrZXk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIuaXRlbUNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgICAgICBBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5pdGVtQ2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLml0ZW1DYWNoZS5nZXQoa2V5KTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0Qm9vbGVhbihrZXk6IHN0cmluZyk6IGJvb2xlYW4gfCBudWxsIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZ2V0SXRlbShrZXkpO1xuICAgICAgICBpZiAoaXRlbSA9PT0gXCJ0cnVlXCIpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoaXRlbSA9PT0gXCJmYWxzZVwiKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgbmV4dCBjb25maWcgbGV2ZWxcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIGdldE9iamVjdDxUIGV4dGVuZHMgb2JqZWN0PihrZXk6IHN0cmluZyk6IFQgfCBudWxsIHtcbiAgICAgICAgaWYgKCFBYnN0cmFjdExvY2FsU3RvcmFnZVNldHRpbmdzSGFuZGxlci5vYmplY3RDYWNoZS5oYXMoa2V5KSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XG4gICAgICAgICAgICAgICAgQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIub2JqZWN0Q2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gcGFyc2UgbG9jYWxTdG9yYWdlIG9iamVjdFwiLCBlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIEFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLm9iamVjdENhY2hlLmdldChrZXkpIGFzIFQ7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNldEl0ZW0oa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIuaXRlbUNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHNldEJvb2xlYW4oa2V5OiBzdHJpbmcsIHZhbHVlOiBib29sZWFuIHwgbnVsbCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldEl0ZW0oa2V5LCBgJHt2YWx1ZX1gKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgc2V0T2JqZWN0KGtleTogc3RyaW5nLCB2YWx1ZTogb2JqZWN0KTogdm9pZCB7XG4gICAgICAgIEFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLm9iamVjdENhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgIH1cblxuICAgIC8vIGhhbmRsZXMgYm90aCBpdGVtcyBhbmQgb2JqZWN0c1xuICAgIHByb3RlY3RlZCByZW1vdmVJdGVtKGtleTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIEFic3RyYWN0TG9jYWxTdG9yYWdlU2V0dGluZ3NIYW5kbGVyLml0ZW1DYWNoZS5kZWxldGUoa2V5KTtcbiAgICAgICAgQWJzdHJhY3RMb2NhbFN0b3JhZ2VTZXR0aW5nc0hhbmRsZXIub2JqZWN0Q2FjaGUuZGVsZXRlKGtleSk7XG4gICAgfVxuXG4gICAgcHVibGljIGlzU3VwcG9ydGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlICE9PSB1bmRlZmluZWQgJiYgbG9jYWxTdG9yYWdlICE9PSBudWxsO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFnQkE7O0FBaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNlLE1BQWVBLG1DQUFmLFNBQTJEQyx3QkFBM0QsQ0FBMkU7RUFDdEY7RUFjQTtFQUNtQixPQUFMQyxLQUFLLEdBQUc7SUFDbEJGLG1DQUFtQyxDQUFDRyxTQUFwQyxDQUE4Q0QsS0FBOUM7SUFDQUYsbUNBQW1DLENBQUNJLFdBQXBDLENBQWdERixLQUFoRDtFQUNIOztFQUVTRyxXQUFXLEdBQUc7SUFDcEI7O0lBRUEsSUFBSSxDQUFDTCxtQ0FBbUMsQ0FBQ00sb0JBQXpDLEVBQStEO01BQzNETixtQ0FBbUMsQ0FBQ00sb0JBQXBDLEdBQTJELElBQTNELENBRDJELENBRTNEOztNQUNBQyxNQUFNLENBQUNDLGdCQUFQLENBQXdCLFNBQXhCLEVBQW1DUixtQ0FBbUMsQ0FBQ1MsY0FBdkU7SUFDSDtFQUNKOztFQUVTQyxPQUFPLENBQUNDLEdBQUQsRUFBc0I7SUFDbkMsSUFBSSxDQUFDWCxtQ0FBbUMsQ0FBQ0csU0FBcEMsQ0FBOENTLEdBQTlDLENBQWtERCxHQUFs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