"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getIncomingLegacyCallToastKey = exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _call = require("matrix-js-sdk/src/webrtc/call");

var _classnames = _interopRequireDefault(require("classnames"));

var _LegacyCallHandler = _interopRequireWildcard(require("../LegacyCallHandler"));

var _MatrixClientPeg = require("../MatrixClientPeg");

var _languageHandler = require("../languageHandler");

var _RoomAvatar = _interopRequireDefault(require("../components/views/avatars/RoomAvatar"));

var _AccessibleTooltipButton = _interopRequireDefault(require("../components/views/elements/AccessibleTooltipButton"));

var _AccessibleButton = _interopRequireDefault(require("../components/views/elements/AccessibleButton"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/*
Copyright 2015, 2016 OpenMarket Ltd
Copyright 2018 New Vector Ltd
Copyright 2019, 2020 The Matrix.org Foundation C.I.C.
Copyright 2021 Å imon Brandner <simon.bra.ag@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const getIncomingLegacyCallToastKey = callId => `call_${callId}`;

exports.getIncomingLegacyCallToastKey = getIncomingLegacyCallToastKey;

class IncomingLegacyCallToast extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "componentDidMount", () => {
      _LegacyCallHandler.default.instance.addListener(_LegacyCallHandler.LegacyCallHandlerEvent.SilencedCallsChanged, this.onSilencedCallsChanged);
    });
    (0, _defineProperty2.default)(this, "onSilencedCallsChanged", () => {
      this.setState({
        silenced: _LegacyCallHandler.default.instance.isCallSilenced(this.props.call.callId)
      });
    });
    (0, _defineProperty2.default)(this, "onAnswerClick", e => {
      e.stopPropagation();

      _LegacyCallHandler.default.instance.answerCall(_LegacyCallHandler.default.instance.roomIdForCall(this.props.call));
    });
    (0, _defineProperty2.default)(this, "onRejectClick", e => {
      e.stopPropagation();

      _LegacyCallHandler.default.instance.hangupOrReject(_LegacyCallHandler.default.instance.roomIdForCall(this.props.call), true);
    });
    (0, _defineProperty2.default)(this, "onSilenceClick", e => {
      e.stopPropagation();
      const callId = this.props.call.callId;
      this.state.silenced ? _LegacyCallHandler.default.instance.unSilenceCall(callId) : _LegacyCallHandler.default.instance.silenceCall(callId);
    });
    this.state = {
      silenced: _LegacyCallHandler.default.instance.isCallSilenced(this.props.call.callId)
    };
  }

  componentWillUnmount() {
    _LegacyCallHandler.default.instance.removeListener(_LegacyCallHandler.LegacyCallHandlerEvent.SilencedCallsChanged, this.onSilencedCallsChanged);
  }

  render() {
    const call = this.props.call;

    const room = _MatrixClientPeg.MatrixClientPeg.get().getRoom(_LegacyCallHandler.default.instance.roomIdForCall(call));

    const isVoice = call.type === _call.CallType.Voice;
    const contentClass = (0, _classnames.default)("mx_IncomingLegacyCallToast_content", {
      "mx_IncomingLegacyCallToast_content_voice": isVoice,
      "mx_IncomingLegacyCallToast_content_video": !isVoice
    });
    const silenceClass = (0, _classnames.default)("mx_IncomingLegacyCallToast_iconButton", {
      "mx_IncomingLegacyCallToast_unSilence": this.state.silenced,
      "mx_IncomingLegacyCallToast_silence": !this.state.silenced
    });
    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
      room: room ?? undefined,
      height: 32,
      width: 32
    }), /*#__PURE__*/_react.default.createElement("div", {
      className: contentClass
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_LegacyCallEvent_caller"
    }, room ? room.name : (0, _languageHandler._t)("Unknown caller")), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_LegacyCallEvent_type"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_LegacyCallEvent_type_icon"
    }), isVoice ? (0, _languageHandler._t)("Voice call") : (0, _languageHandler._t)("Video call")), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_IncomingLegacyCallToast_buttons"
    }, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_IncomingLegacyCallToast_button mx_IncomingLegacyCallToast_button_decline",
      onClick: this.onRejectClick,
      kind: "danger"
    }, /*#__PURE__*/_react.default.createElement("span", null, " ", (0, _languageHandler._t)("Decline"), " ")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      className: "mx_IncomingLegacyCallToast_button mx_IncomingLegacyCallToast_button_accept",
      onClick: this.onAnswerClick,
      kind: "primary"
    }, /*#__PURE__*/_react.default.createElement("span", null, " ", (0, _languageHandler._t)("Accept"), " ")))), /*#__PURE__*/_react.default.createElement(_AccessibleTooltipButton.default, {
      className: silenceClass,
      onClick: this.onSilenceClick,
      title: this.state.silenced ? (0, _languageHandler._t)("Sound on") : (0, _languageHandler._t)("Silence call")
    }));
  }

}

exports.default = IncomingLegacyCallToast;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRJbmNvbWluZ0xlZ2FjeUNhbGxUb2FzdEtleSIsImNhbGxJZCIsIkluY29taW5nTGVnYWN5Q2FsbFRvYXN0IiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiTGVnYWN5Q2FsbEhhbmRsZXIiLCJpbnN0YW5jZSIsImFkZExpc3RlbmVyIiwiTGVnYWN5Q2FsbEhhbmRsZXJFdmVudCIsIlNpbGVuY2VkQ2FsbHNDaGFuZ2VkIiwib25TaWxlbmNlZENhbGxzQ2hhbmdlZCIsInNldFN0YXRlIiwic2lsZW5jZWQiLCJpc0NhbGxTaWxlbmNlZCIsImNhbGwiLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiYW5zd2VyQ2FsbCIsInJvb21JZEZvckNhbGwiLCJoYW5ndXBPclJlamVjdCIsInN0YXRlIiwidW5TaWxlbmNlQ2FsbCIsInNpbGVuY2VDYWxsIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW1vdmVMaXN0ZW5lciIsInJlbmRlciIsInJvb20iLCJNYXRyaXhDbGllbnRQZWciLCJnZXQiLCJnZXRSb29tIiwiaXNWb2ljZSIsInR5cGUiLCJDYWxsVHlwZSIsIlZvaWNlIiwiY29udGVudENsYXNzIiwiY2xhc3NOYW1lcyIsInNpbGVuY2VDbGFzcyIsInVuZGVmaW5lZCIsIm5hbWUiLCJfdCIsIm9uUmVqZWN0Q2xpY2siLCJvbkFuc3dlckNsaWNrIiwib25TaWxlbmNlQ2xpY2siXSwic291cmNlcyI6WyIuLi8uLi9zcmMvdG9hc3RzL0luY29taW5nTGVnYWN5Q2FsbFRvYXN0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTUsIDIwMTYgT3Blbk1hcmtldCBMdGRcbkNvcHlyaWdodCAyMDE4IE5ldyBWZWN0b3IgTHRkXG5Db3B5cmlnaHQgMjAxOSwgMjAyMCBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuQ29weXJpZ2h0IDIwMjEgxaBpbW9uIEJyYW5kbmVyIDxzaW1vbi5icmEuYWdAZ21haWwuY29tPlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDYWxsVHlwZSwgTWF0cml4Q2FsbCB9IGZyb20gJ21hdHJpeC1qcy1zZGsvc3JjL3dlYnJ0Yy9jYWxsJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuXG5pbXBvcnQgTGVnYWN5Q2FsbEhhbmRsZXIsIHsgTGVnYWN5Q2FsbEhhbmRsZXJFdmVudCB9IGZyb20gJy4uL0xlZ2FjeUNhbGxIYW5kbGVyJztcbmltcG9ydCB7IE1hdHJpeENsaWVudFBlZyB9IGZyb20gJy4uL01hdHJpeENsaWVudFBlZyc7XG5pbXBvcnQgeyBfdCB9IGZyb20gJy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgUm9vbUF2YXRhciBmcm9tICcuLi9jb21wb25lbnRzL3ZpZXdzL2F2YXRhcnMvUm9vbUF2YXRhcic7XG5pbXBvcnQgQWNjZXNzaWJsZVRvb2x0aXBCdXR0b24gZnJvbSAnLi4vY29tcG9uZW50cy92aWV3cy9lbGVtZW50cy9BY2Nlc3NpYmxlVG9vbHRpcEJ1dHRvbic7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tICcuLi9jb21wb25lbnRzL3ZpZXdzL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b24nO1xuXG5leHBvcnQgY29uc3QgZ2V0SW5jb21pbmdMZWdhY3lDYWxsVG9hc3RLZXkgPSAoY2FsbElkOiBzdHJpbmcpID0+IGBjYWxsXyR7Y2FsbElkfWA7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIGNhbGw6IE1hdHJpeENhbGw7XG59XG5cbmludGVyZmFjZSBJU3RhdGUge1xuICAgIHNpbGVuY2VkOiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbmNvbWluZ0xlZ2FjeUNhbGxUb2FzdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzaWxlbmNlZDogTGVnYWN5Q2FsbEhhbmRsZXIuaW5zdGFuY2UuaXNDYWxsU2lsZW5jZWQodGhpcy5wcm9wcy5jYWxsLmNhbGxJZCksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHVibGljIGNvbXBvbmVudERpZE1vdW50ID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBMZWdhY3lDYWxsSGFuZGxlci5pbnN0YW5jZS5hZGRMaXN0ZW5lcihcbiAgICAgICAgICAgIExlZ2FjeUNhbGxIYW5kbGVyRXZlbnQuU2lsZW5jZWRDYWxsc0NoYW5nZWQsIHRoaXMub25TaWxlbmNlZENhbGxzQ2hhbmdlZCxcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgcHVibGljIGNvbXBvbmVudFdpbGxVbm1vdW50KCk6IHZvaWQge1xuICAgICAgICBMZWdhY3lDYWxsSGFuZGxlci5pbnN0YW5jZS5yZW1vdmVMaXN0ZW5lcihcbiAgICAgICAgICAgIExlZ2FjeUNhbGxIYW5kbGVyRXZlbnQuU2lsZW5jZWRDYWxsc0NoYW5nZWQsIHRoaXMub25TaWxlbmNlZENhbGxzQ2hhbmdlZCxcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uU2lsZW5jZWRDYWxsc0NoYW5nZWQgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBzaWxlbmNlZDogTGVnYWN5Q2FsbEhhbmRsZXIuaW5zdGFuY2UuaXNDYWxsU2lsZW5jZWQodGhpcy5wcm9wcy5jYWxsLmNhbGxJZCkgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25BbnN3ZXJDbGljayA9IChlOiBSZWFjdC5Nb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIExlZ2FjeUNhbGxIYW5kbGVyLmluc3RhbmNlLmFuc3dlckNhbGwoTGVnYWN5Q2FsbEhhbmRsZXIuaW5zdGFuY2Uucm9vbUlkRm9yQ2FsbCh0aGlzLnByb3BzLmNhbGwpKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvblJlamVjdENsaWNrPSAoZTogUmVhY3QuTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBMZWdhY3lDYWxsSGFuZGxlci5pbnN0YW5jZS5oYW5ndXBPclJlamVjdChMZWdhY3lDYWxsSGFuZGxlci5pbnN0YW5jZS5yb29tSWRGb3JDYWxsKHRoaXMucHJvcHMuY2FsbCksIHRydWUpO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uU2lsZW5jZUNsaWNrID0gKGU6IFJlYWN0Lk1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY29uc3QgY2FsbElkID0gdGhpcy5wcm9wcy5jYWxsLmNhbGxJZDtcbiAgICAgICAgdGhpcy5zdGF0ZS5zaWxlbmNlZCA/XG4gICAgICAgICAgICBMZWdhY3lDYWxsSGFuZGxlci5pbnN0YW5jZS51blNpbGVuY2VDYWxsKGNhbGxJZCkgOlxuICAgICAgICAgICAgTGVnYWN5Q2FsbEhhbmRsZXIuaW5zdGFuY2Uuc2lsZW5jZUNhbGwoY2FsbElkKTtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgY2FsbCA9IHRoaXMucHJvcHMuY2FsbDtcbiAgICAgICAgY29uc3Qgcm9vbSA9IE1hdHJpeENsaWVudFBlZy5nZXQoKS5nZXRSb29tKExlZ2FjeUNhbGxIYW5kbGVyLmluc3RhbmNlLnJvb21JZEZvckNhbGwoY2FsbCkpO1xuICAgICAgICBjb25zdCBpc1ZvaWNlID0gY2FsbC50eXBlID09PSBDYWxsVHlwZS5Wb2ljZTtcblxuICAgICAgICBjb25zdCBjb250ZW50Q2xhc3MgPSBjbGFzc05hbWVzKFwibXhfSW5jb21pbmdMZWdhY3lDYWxsVG9hc3RfY29udGVudFwiLCB7XG4gICAgICAgICAgICBcIm14X0luY29taW5nTGVnYWN5Q2FsbFRvYXN0X2NvbnRlbnRfdm9pY2VcIjogaXNWb2ljZSxcbiAgICAgICAgICAgIFwibXhfSW5jb21pbmdMZWdhY3lDYWxsVG9hc3RfY29udGVudF92aWRlb1wiOiAhaXNWb2ljZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHNpbGVuY2VDbGFzcyA9IGNsYXNzTmFtZXMoXCJteF9JbmNvbWluZ0xlZ2FjeUNhbGxUb2FzdF9pY29uQnV0dG9uXCIsIHtcbiAgICAgICAgICAgIFwibXhfSW5jb21pbmdMZWdhY3lDYWxsVG9hc3RfdW5TaWxlbmNlXCI6IHRoaXMuc3RhdGUuc2lsZW5jZWQsXG4gICAgICAgICAgICBcIm14X0luY29taW5nTGVnYWN5Q2FsbFRvYXN0X3NpbGVuY2VcIjogIXRoaXMuc3RhdGUuc2lsZW5jZWQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICA8Um9vbUF2YXRhclxuICAgICAgICAgICAgICAgIHJvb209e3Jvb20gPz8gdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgIGhlaWdodD17MzJ9XG4gICAgICAgICAgICAgICAgd2lkdGg9ezMyfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjb250ZW50Q2xhc3N9PlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cIm14X0xlZ2FjeUNhbGxFdmVudF9jYWxsZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgeyByb29tID8gcm9vbS5uYW1lIDogX3QoXCJVbmtub3duIGNhbGxlclwiKSB9XG4gICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfTGVnYWN5Q2FsbEV2ZW50X3R5cGVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9MZWdhY3lDYWxsRXZlbnRfdHlwZV9pY29uXCIgLz5cbiAgICAgICAgICAgICAgICAgICAgeyBpc1ZvaWNlID8gX3QoXCJWb2ljZSBjYWxsXCIpIDogX3QoXCJWaWRlbyBjYWxsXCIpIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X0luY29taW5nTGVnYWN5Q2FsbFRvYXN0X2J1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0luY29taW5nTGVnYWN5Q2FsbFRvYXN0X2J1dHRvbiBteF9JbmNvbWluZ0xlZ2FjeUNhbGxUb2FzdF9idXR0b25fZGVjbGluZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uUmVqZWN0Q2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kPVwiZGFuZ2VyXCJcbiAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+IHsgX3QoXCJEZWNsaW5lXCIpIH0gPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJteF9JbmNvbWluZ0xlZ2FjeUNhbGxUb2FzdF9idXR0b24gbXhfSW5jb21pbmdMZWdhY3lDYWxsVG9hc3RfYnV0dG9uX2FjY2VwdFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXt0aGlzLm9uQW5zd2VyQ2xpY2t9XG4gICAgICAgICAgICAgICAgICAgICAgICBraW5kPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPiB7IF90KFwiQWNjZXB0XCIpIH0gPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxBY2Nlc3NpYmxlVG9vbHRpcEJ1dHRvblxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17c2lsZW5jZUNsYXNzfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMub25TaWxlbmNlQ2xpY2t9XG4gICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMuc3RhdGUuc2lsZW5jZWQgPyBfdChcIlNvdW5kIG9uXCIpIDogX3QoXCJTaWxlbmNlIGNhbGxcIil9XG4gICAgICAgICAgICAvPlxuICAgICAgICA8L1JlYWN0LkZyYWdtZW50PjtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBbUJBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztB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