"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getPolicyUrl = getPolicyUrl;
exports.showToast = exports.hideToast = void 0;

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../languageHandler");

var _SdkConfig = _interopRequireDefault(require("../SdkConfig"));

var _dispatcher = _interopRequireDefault(require("../dispatcher/dispatcher"));

var _AccessibleButton = _interopRequireDefault(require("../components/views/elements/AccessibleButton"));

var _GenericToast = _interopRequireDefault(require("../components/views/toasts/GenericToast"));

var _ToastStore = _interopRequireDefault(require("../stores/ToastStore"));

var _AnalyticsLearnMoreDialog = require("../components/views/dialogs/AnalyticsLearnMoreDialog");

var _actions = require("../dispatcher/actions");

var _SnakedObject = require("../utils/SnakedObject");

var _SettingsStore = _interopRequireDefault(require("../settings/SettingsStore"));

/*
Copyright 2020 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const onAccept = () => {
  _dispatcher.default.dispatch({
    action: _actions.Action.PseudonymousAnalyticsAccept
  });
};

const onReject = () => {
  _dispatcher.default.dispatch({
    action: _actions.Action.PseudonymousAnalyticsReject
  });
};

const onLearnMoreNoOptIn = () => {
  (0, _AnalyticsLearnMoreDialog.showDialog)({
    onFinished: buttonClicked => {
      if (buttonClicked === _AnalyticsLearnMoreDialog.ButtonClicked.Primary) {
        // user clicked "Enable"
        onAccept();
      } // otherwise, the user either clicked "Cancel", or closed the dialog without making a choice,
      // leave the toast open

    },
    primaryButton: (0, _languageHandler._t)("Enable")
  });
};

const onLearnMorePreviouslyOptedIn = () => {
  (0, _AnalyticsLearnMoreDialog.showDialog)({
    onFinished: buttonClicked => {
      if (buttonClicked === _AnalyticsLearnMoreDialog.ButtonClicked.Primary) {
        // user clicked "That's fine"
        onAccept();
      } else if (buttonClicked === _AnalyticsLearnMoreDialog.ButtonClicked.Cancel) {
        // user clicked "Stop"
        onReject();
      } // otherwise, the user closed the dialog without making a choice, leave the toast open

    },
    primaryButton: (0, _languageHandler._t)("That's fine"),
    cancelButton: (0, _languageHandler._t)("Stop")
  });
};

const TOAST_KEY = "analytics";

function getPolicyUrl() {
  const policyUrl = _SdkConfig.default.get("privacy_policy_url");

  if (policyUrl) return policyUrl; // Try get from legacy config location

  const piwikConfig = _SdkConfig.default.get("piwik");

  let piwik;

  if (typeof piwikConfig === 'object') {
    piwik = new _SnakedObject.SnakedObject(piwikConfig);
  }

  return piwik?.get("policy_url");
}

const showToast = () => {
  const legacyAnalyticsOptIn = _SettingsStore.default.getValue("analyticsOptIn", null, true);

  let props;

  if (legacyAnalyticsOptIn) {
    // The user previously opted into our old analytics system - let them know things have changed and ask
    // them to opt in again.
    props = {
      description: (0, _languageHandler._t)("You previously consented to share anonymous usage data with us. We're updating how that works."),
      acceptLabel: (0, _languageHandler._t)("That's fine"),
      onAccept,
      rejectLabel: (0, _languageHandler._t)("Learn more"),
      onReject: onLearnMorePreviouslyOptedIn
    };
  } else if (legacyAnalyticsOptIn === null || legacyAnalyticsOptIn === undefined) {
    // The user had no analytics setting previously set, so we just need to prompt to opt-in, rather than
    // explaining any change.
    const learnMoreLink = sub => /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      kind: "link_inline",
      onClick: onLearnMoreNoOptIn
    }, sub);

    props = {
      description: (0, _languageHandler._t)("Share anonymous data to help us identify issues. Nothing personal. No third parties. " + "<LearnMoreLink>Learn More</LearnMoreLink>", {}, {
        "LearnMoreLink": learnMoreLink
      }),
      acceptLabel: (0, _languageHandler._t)("Yes"),
      onAccept,
      rejectLabel: (0, _languageHandler._t)("No"),
      onReject
    };
  } else {
    // false
    // The user previously opted out of analytics, don't ask again
    return;
  }

  const analyticsOwner = _SdkConfig.default.get("analytics_owner") ?? _SdkConfig.default.get().brand;

  _ToastStore.default.sharedInstance().addOrReplaceToast({
    key: TOAST_KEY,
    title: (0, _languageHandler._t)("Help improve %(analyticsOwner)s", {
      analyticsOwner
    }),
    props,
    component: _GenericToast.default,
    className: "mx_AnalyticsToast",
    priority: 10
  });
};

exports.showToast = showToast;

const hideToast = () => {
  _ToastStore.default.sharedInstance().dismissToast(TOAST_KEY);
};

exports.hideToast = hideToast;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvbkFjY2VwdCIsImRpcyIsImRpc3BhdGNoIiwiYWN0aW9uIiwiQWN0aW9uIiwiUHNldWRvbnltb3VzQW5hbHl0aWNzQWNjZXB0Iiwib25SZWplY3QiLCJQc2V1ZG9ueW1vdXNBbmFseXRpY3NSZWplY3QiLCJvbkxlYXJuTW9yZU5vT3B0SW4iLCJzaG93QW5hbHl0aWNzTGVhcm5Nb3JlRGlhbG9nIiwib25GaW5pc2hlZCIsImJ1dHRvbkNsaWNrZWQiLCJCdXR0b25DbGlja2VkIiwiUHJpbWFyeSIsInByaW1hcnlCdXR0b24iLCJfdCIsIm9uTGVhcm5Nb3JlUHJldmlvdXNseU9wdGVkSW4iLCJDYW5jZWwiLCJjYW5jZWxCdXR0b24iLCJUT0FTVF9LRVkiLCJnZXRQb2xpY3lVcmwiLCJwb2xpY3lVcmwiLCJTZGtDb25maWciLCJnZXQiLCJwaXdpa0NvbmZpZyIsInBpd2lrIiwiU25ha2VkT2JqZWN0Iiwic2hvd1RvYXN0IiwibGVnYWN5QW5hbHl0aWNzT3B0SW4iLCJTZXR0aW5nc1N0b3JlIiwiZ2V0VmFsdWUiLCJwcm9wcyIsImRlc2NyaXB0aW9uIiwiYWNjZXB0TGFiZWwiLCJyZWplY3RMYWJlbCIsInVuZGVmaW5lZCIsImxlYXJuTW9yZUxpbmsiLCJzdWIiLCJhbmFseXRpY3NPd25lciIsImJyYW5kIiwiVG9hc3RTdG9yZSIsInNoYXJlZEluc3RhbmNlIiwiYWRkT3JSZXBsYWNlVG9hc3QiLCJrZXkiLCJ0aXRsZSIsImNvbXBvbmVudCIsIkdlbmVyaWNUb2FzdCIsImNsYXNzTmFtZSIsInByaW9yaXR5IiwiaGlkZVRvYXN0IiwiZGlzbWlzc1RvYXN0Il0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL3RvYXN0cy9BbmFseXRpY3NUb2FzdC50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIwIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBPcHRpb25hbCB9IGZyb20gXCJtYXRyaXgtZXZlbnRzLXNka1wiO1xuXG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCBTZGtDb25maWcgZnJvbSBcIi4uL1Nka0NvbmZpZ1wiO1xuaW1wb3J0IGRpcyBmcm9tIFwiLi4vZGlzcGF0Y2hlci9kaXNwYXRjaGVyXCI7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tIFwiLi4vY29tcG9uZW50cy92aWV3cy9lbGVtZW50cy9BY2Nlc3NpYmxlQnV0dG9uXCI7XG5pbXBvcnQgR2VuZXJpY1RvYXN0IGZyb20gXCIuLi9jb21wb25lbnRzL3ZpZXdzL3RvYXN0cy9HZW5lcmljVG9hc3RcIjtcbmltcG9ydCBUb2FzdFN0b3JlIGZyb20gXCIuLi9zdG9yZXMvVG9hc3RTdG9yZVwiO1xuaW1wb3J0IHtcbiAgICBCdXR0b25DbGlja2VkLFxuICAgIHNob3dEaWFsb2cgYXMgc2hvd0FuYWx5dGljc0xlYXJuTW9yZURpYWxvZyxcbn0gZnJvbSBcIi4uL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9BbmFseXRpY3NMZWFybk1vcmVEaWFsb2dcIjtcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gXCIuLi9kaXNwYXRjaGVyL2FjdGlvbnNcIjtcbmltcG9ydCB7IFNuYWtlZE9iamVjdCB9IGZyb20gXCIuLi91dGlscy9TbmFrZWRPYmplY3RcIjtcbmltcG9ydCB7IElDb25maWdPcHRpb25zIH0gZnJvbSBcIi4uL0lDb25maWdPcHRpb25zXCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi4vc2V0dGluZ3MvU2V0dGluZ3NTdG9yZVwiO1xuXG5jb25zdCBvbkFjY2VwdCA9ICgpID0+IHtcbiAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICBhY3Rpb246IEFjdGlvbi5Qc2V1ZG9ueW1vdXNBbmFseXRpY3NBY2NlcHQsXG4gICAgfSk7XG59O1xuXG5jb25zdCBvblJlamVjdCA9ICgpID0+IHtcbiAgICBkaXMuZGlzcGF0Y2goe1xuICAgICAgICBhY3Rpb246IEFjdGlvbi5Qc2V1ZG9ueW1vdXNBbmFseXRpY3NSZWplY3QsXG4gICAgfSk7XG59O1xuXG5jb25zdCBvbkxlYXJuTW9yZU5vT3B0SW4gPSAoKSA9PiB7XG4gICAgc2hvd0FuYWx5dGljc0xlYXJuTW9yZURpYWxvZyh7XG4gICAgICAgIG9uRmluaXNoZWQ6IChidXR0b25DbGlja2VkPzogQnV0dG9uQ2xpY2tlZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGJ1dHRvbkNsaWNrZWQgPT09IEJ1dHRvbkNsaWNrZWQuUHJpbWFyeSkge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgY2xpY2tlZCBcIkVuYWJsZVwiXG4gICAgICAgICAgICAgICAgb25BY2NlcHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIG90aGVyd2lzZSwgdGhlIHVzZXIgZWl0aGVyIGNsaWNrZWQgXCJDYW5jZWxcIiwgb3IgY2xvc2VkIHRoZSBkaWFsb2cgd2l0aG91dCBtYWtpbmcgYSBjaG9pY2UsXG4gICAgICAgICAgICAvLyBsZWF2ZSB0aGUgdG9hc3Qgb3BlblxuICAgICAgICB9LFxuICAgICAgICBwcmltYXJ5QnV0dG9uOiBfdChcIkVuYWJsZVwiKSxcbiAgICB9KTtcbn07XG5cbmNvbnN0IG9uTGVhcm5Nb3JlUHJldmlvdXNseU9wdGVkSW4gPSAoKSA9PiB7XG4gICAgc2hvd0FuYWx5dGljc0xlYXJuTW9yZURpYWxvZyh7XG4gICAgICAgIG9uRmluaXNoZWQ6IChidXR0b25DbGlja2VkPzogQnV0dG9uQ2xpY2tlZCkgPT4ge1xuICAgICAgICAgICAgaWYgKGJ1dHRvbkNsaWNrZWQgPT09IEJ1dHRvbkNsaWNrZWQuUHJpbWFyeSkge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgY2xpY2tlZCBcIlRoYXQncyBmaW5lXCJcbiAgICAgICAgICAgICAgICBvbkFjY2VwdCgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChidXR0b25DbGlja2VkID09PSBCdXR0b25DbGlja2VkLkNhbmNlbCkge1xuICAgICAgICAgICAgICAgIC8vIHVzZXIgY2xpY2tlZCBcIlN0b3BcIlxuICAgICAgICAgICAgICAgIG9uUmVqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBvdGhlcndpc2UsIHRoZSB1c2VyIGNsb3NlZCB0aGUgZGlhbG9nIHdpdGhvdXQgbWFraW5nIGEgY2hvaWNlLCBsZWF2ZSB0aGUgdG9hc3Qgb3BlblxuICAgICAgICB9LFxuICAgICAgICBwcmltYXJ5QnV0dG9uOiBfdChcIlRoYXQncyBmaW5lXCIpLFxuICAgICAgICBjYW5jZWxCdXR0b246IF90KFwiU3RvcFwiKSxcbiAgICB9KTtcbn07XG5cbmNvbnN0IFRPQVNUX0tFWSA9IFwiYW5hbHl0aWNzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRQb2xpY3lVcmwoKTogT3B0aW9uYWw8c3RyaW5nPiB7XG4gICAgY29uc3QgcG9saWN5VXJsID0gU2RrQ29uZmlnLmdldChcInByaXZhY3lfcG9saWN5X3VybFwiKTtcbiAgICBpZiAocG9saWN5VXJsKSByZXR1cm4gcG9saWN5VXJsO1xuXG4gICAgLy8gVHJ5IGdldCBmcm9tIGxlZ2FjeSBjb25maWcgbG9jYXRpb25cbiAgICBjb25zdCBwaXdpa0NvbmZpZyA9IFNka0NvbmZpZy5nZXQoXCJwaXdpa1wiKTtcbiAgICBsZXQgcGl3aWs6IE9wdGlvbmFsPFNuYWtlZE9iamVjdDxFeHRyYWN0PElDb25maWdPcHRpb25zW1wicGl3aWtcIl0sIG9iamVjdD4+PjtcbiAgICBpZiAodHlwZW9mIHBpd2lrQ29uZmlnID09PSAnb2JqZWN0Jykge1xuICAgICAgICBwaXdpayA9IG5ldyBTbmFrZWRPYmplY3QocGl3aWtDb25maWcpO1xuICAgIH1cbiAgICByZXR1cm4gcGl3aWs/LmdldChcInBvbGljeV91cmxcIik7XG59XG5cbmV4cG9ydCBjb25zdCBzaG93VG9hc3QgPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgbGVnYWN5QW5hbHl0aWNzT3B0SW4gPSBTZXR0aW5nc1N0b3JlLmdldFZhbHVlKFwiYW5hbHl0aWNzT3B0SW5cIiwgbnVsbCwgdHJ1ZSk7XG5cbiAgICBsZXQgcHJvcHM6IE9taXQ8UmVhY3QuQ29tcG9uZW50UHJvcHM8dHlwZW9mIEdlbmVyaWNUb2FzdD4sIFwidG9hc3RLZXlcIj47XG4gICAgaWYgKGxlZ2FjeUFuYWx5dGljc09wdEluKSB7XG4gICAgICAgIC8vIFRoZSB1c2VyIHByZXZpb3VzbHkgb3B0ZWQgaW50byBvdXIgb2xkIGFuYWx5dGljcyBzeXN0ZW0gLSBsZXQgdGhlbSBrbm93IHRoaW5ncyBoYXZlIGNoYW5nZWQgYW5kIGFza1xuICAgICAgICAvLyB0aGVtIHRvIG9wdCBpbiBhZ2Fpbi5cbiAgICAgICAgcHJvcHMgPSB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogX3QoXG4gICAgICAgICAgICAgICAgXCJZb3UgcHJldmlvdXNseSBjb25zZW50ZWQgdG8gc2hhcmUgYW5vbnltb3VzIHVzYWdlIGRhdGEgd2l0aCB1cy4gV2UncmUgdXBkYXRpbmcgaG93IHRoYXQgd29ya3MuXCIpLFxuICAgICAgICAgICAgYWNjZXB0TGFiZWw6IF90KFwiVGhhdCdzIGZpbmVcIiksXG4gICAgICAgICAgICBvbkFjY2VwdCxcbiAgICAgICAgICAgIHJlamVjdExhYmVsOiBfdChcIkxlYXJuIG1vcmVcIiksXG4gICAgICAgICAgICBvblJlamVjdDogb25MZWFybk1vcmVQcmV2aW91c2x5T3B0ZWRJbixcbiAgICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGxlZ2FjeUFuYWx5dGljc09wdEluID09PSBudWxsIHx8IGxlZ2FjeUFuYWx5dGljc09wdEluID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIgaGFkIG5vIGFuYWx5dGljcyBzZXR0aW5nIHByZXZpb3VzbHkgc2V0LCBzbyB3ZSBqdXN0IG5lZWQgdG8gcHJvbXB0IHRvIG9wdC1pbiwgcmF0aGVyIHRoYW5cbiAgICAgICAgLy8gZXhwbGFpbmluZyBhbnkgY2hhbmdlLlxuICAgICAgICBjb25zdCBsZWFybk1vcmVMaW5rID0gKHN1Yjogc3RyaW5nKSA9PiAoXG4gICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBraW5kPVwibGlua19pbmxpbmVcIiBvbkNsaWNrPXtvbkxlYXJuTW9yZU5vT3B0SW59Pnsgc3ViIH08L0FjY2Vzc2libGVCdXR0b24+XG4gICAgICAgICk7XG4gICAgICAgIHByb3BzID0ge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IF90KFxuICAgICAgICAgICAgICAgIFwiU2hhcmUgYW5vbnltb3VzIGRhdGEgdG8gaGVscCB1cyBpZGVudGlmeSBpc3N1ZXMuIE5vdGhpbmcgcGVyc29uYWwuIE5vIHRoaXJkIHBhcnRpZXMuIFwiICtcbiAgICAgICAgICAgICAgICBcIjxMZWFybk1vcmVMaW5rPkxlYXJuIE1vcmU8L0xlYXJuTW9yZUxpbms+XCIsIHt9LCB7IFwiTGVhcm5Nb3JlTGlua1wiOiBsZWFybk1vcmVMaW5rIH0pLFxuICAgICAgICAgICAgYWNjZXB0TGFiZWw6IF90KFwiWWVzXCIpLFxuICAgICAgICAgICAgb25BY2NlcHQsXG4gICAgICAgICAgICByZWplY3RMYWJlbDogX3QoXCJOb1wiKSxcbiAgICAgICAgICAgIG9uUmVqZWN0LFxuICAgICAgICB9O1xuICAgIH0gZWxzZSB7IC8vIGZhbHNlXG4gICAgICAgIC8vIFRoZSB1c2VyIHByZXZpb3VzbHkgb3B0ZWQgb3V0IG9mIGFuYWx5dGljcywgZG9uJ3QgYXNrIGFnYWluXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBhbmFseXRpY3NPd25lciA9IFNka0NvbmZpZy5nZXQoXCJhbmFseXRpY3Nfb3duZXJcIikgPz8gU2RrQ29uZmlnLmdldCgpLmJyYW5kO1xuICAgIFRvYXN0U3RvcmUuc2hhcmVkSW5zdGFuY2UoKS5hZGRPclJlcGxhY2VUb2FzdCh7XG4gICAgICAgIGtleTogVE9BU1RfS0VZLFxuICAgICAgICB0aXRsZTogX3QoXCJIZWxwIGltcHJvdmUgJShhbmFseXRpY3NPd25lcilzXCIsIHsgYW5hbHl0aWNzT3duZXIgfSksXG4gICAgICAgIHByb3BzLFxuICAgICAgICBjb21wb25lbnQ6IEdlbmVyaWNUb2FzdCxcbiAgICAgICAgY2xhc3NOYW1lOiBcIm14X0FuYWx5dGljc1RvYXN0XCIsXG4gICAgICAgIHByaW9yaXR5OiAxMCxcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBoaWRlVG9hc3QgPSAoKSA9PiB7XG4gICAgVG9hc3RTdG9yZS5zaGFyZWRJbnN0YW5jZSgpLmRpc21pc3NUb2FzdChUT0FTVF9LRVkpO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQWdCQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFJQTs7QUFDQTs7QUFFQTs7QUFoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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