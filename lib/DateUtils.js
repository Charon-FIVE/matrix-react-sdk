"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatCallTime = formatCallTime;
exports.formatDate = formatDate;
exports.formatDuration = formatDuration;
exports.formatFullDate = formatFullDate;
exports.formatFullDateNoDay = formatFullDateNoDay;
exports.formatFullDateNoDayNoTime = formatFullDateNoDayNoTime;
exports.formatFullDateNoTime = formatFullDateNoTime;
exports.formatFullTime = formatFullTime;
exports.formatRelativeTime = formatRelativeTime;
exports.formatSeconds = formatSeconds;
exports.formatTime = formatTime;
exports.wantsDateSeparator = wantsDateSeparator;

var _languageHandler = require("./languageHandler");

/*
Copyright 2015, 2016 OpenMarket Ltd
Copyright 2017 Vector Creations Ltd

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
function getDaysArray() {
  return [(0, _languageHandler._t)('Sun'), (0, _languageHandler._t)('Mon'), (0, _languageHandler._t)('Tue'), (0, _languageHandler._t)('Wed'), (0, _languageHandler._t)('Thu'), (0, _languageHandler._t)('Fri'), (0, _languageHandler._t)('Sat')];
}

function getMonthsArray() {
  return [(0, _languageHandler._t)('Jan'), (0, _languageHandler._t)('Feb'), (0, _languageHandler._t)('Mar'), (0, _languageHandler._t)('Apr'), (0, _languageHandler._t)('May'), (0, _languageHandler._t)('Jun'), (0, _languageHandler._t)('Jul'), (0, _languageHandler._t)('Aug'), (0, _languageHandler._t)('Sep'), (0, _languageHandler._t)('Oct'), (0, _languageHandler._t)('Nov'), (0, _languageHandler._t)('Dec')];
}

function pad(n) {
  return (n < 10 ? '0' : '') + n;
}

function twelveHourTime(date) {
  let showSeconds = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  let hours = date.getHours() % 12;
  const minutes = pad(date.getMinutes());
  const ampm = date.getHours() >= 12 ? (0, _languageHandler._t)('PM') : (0, _languageHandler._t)('AM');
  hours = hours ? hours : 12; // convert 0 -> 12

  if (showSeconds) {
    const seconds = pad(date.getSeconds());
    return `${hours}:${minutes}:${seconds}${ampm}`;
  }

  return `${hours}:${minutes}${ampm}`;
}

function formatDate(date) {
  let showTwelveHour = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  const now = new Date();
  const days = getDaysArray();
  const months = getMonthsArray();

  if (date.toDateString() === now.toDateString()) {
    return formatTime(date, showTwelveHour);
  } else if (now.getTime() - date.getTime() < 6 * 24 * 60 * 60 * 1000) {
    // TODO: use standard date localize function provided in counterpart
    return (0, _languageHandler._t)('%(weekDayName)s %(time)s', {
      weekDayName: days[date.getDay()],
      time: formatTime(date, showTwelveHour)
    });
  } else if (now.getFullYear() === date.getFullYear()) {
    // TODO: use standard date localize function provided in counterpart
    return (0, _languageHandler._t)('%(weekDayName)s, %(monthName)s %(day)s %(time)s', {
      weekDayName: days[date.getDay()],
      monthName: months[date.getMonth()],
      day: date.getDate(),
      time: formatTime(date, showTwelveHour)
    });
  }

  return formatFullDate(date, showTwelveHour);
}

function formatFullDateNoTime(date) {
  const days = getDaysArray();
  const months = getMonthsArray();
  return (0, _languageHandler._t)('%(weekDayName)s, %(monthName)s %(day)s %(fullYear)s', {
    weekDayName: days[date.getDay()],
    monthName: months[date.getMonth()],
    day: date.getDate(),
    fullYear: date.getFullYear()
  });
}

function formatFullDate(date) {
  let showTwelveHour = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  let showSeconds = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
  const days = getDaysArray();
  const months = getMonthsArray();
  return (0, _languageHandler._t)('%(weekDayName)s, %(monthName)s %(day)s %(fullYear)s %(time)s', {
    weekDayName: days[date.getDay()],
    monthName: months[date.getMonth()],
    day: date.getDate(),
    fullYear: date.getFullYear(),
    time: showSeconds ? formatFullTime(date, showTwelveHour) : formatTime(date, showTwelveHour)
  });
}

function formatFullTime(date) {
  let showTwelveHour = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  if (showTwelveHour) {
    return twelveHourTime(date, true);
  }

  return pad(date.getHours()) + ':' + pad(date.getMinutes()) + ':' + pad(date.getSeconds());
}

function formatTime(date) {
  let showTwelveHour = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  if (showTwelveHour) {
    return twelveHourTime(date);
  }

  return pad(date.getHours()) + ':' + pad(date.getMinutes());
}

function formatCallTime(delta) {
  const hours = delta.getUTCHours();
  const minutes = delta.getUTCMinutes();
  const seconds = delta.getUTCSeconds();
  let output = "";
  if (hours) output += `${hours}h `;
  if (minutes || output) output += `${minutes}m `;
  if (seconds || output) output += `${seconds}s`;
  return output;
}

function formatSeconds(inSeconds) {
  const hours = Math.floor(inSeconds / (60 * 60)).toFixed(0).padStart(2, '0');
  const minutes = Math.floor(inSeconds % (60 * 60) / 60).toFixed(0).padStart(2, '0');
  const seconds = Math.floor(inSeconds % (60 * 60) % 60).toFixed(0).padStart(2, '0');
  let output = "";
  if (hours !== "00") output += `${hours}:`;
  output += `${minutes}:${seconds}`;
  return output;
}

const MILLIS_IN_DAY = 86400000;

function withinPast24Hours(prevDate, nextDate) {
  return Math.abs(prevDate.getTime() - nextDate.getTime()) <= MILLIS_IN_DAY;
}

function withinCurrentYear(prevDate, nextDate) {
  return prevDate.getFullYear() === nextDate.getFullYear();
}

function wantsDateSeparator(prevEventDate, nextEventDate) {
  if (!nextEventDate || !prevEventDate) {
    return false;
  } // Return early for events that are > 24h apart


  if (!withinPast24Hours(prevEventDate, nextEventDate)) {
    return true;
  } // Compare weekdays


  return prevEventDate.getDay() !== nextEventDate.getDay();
}

function formatFullDateNoDay(date) {
  return (0, _languageHandler._t)("%(date)s at %(time)s", {
    date: date.toLocaleDateString().replace(/\//g, '-'),
    time: date.toLocaleTimeString().replace(/:/g, '-')
  });
}

function formatFullDateNoDayNoTime(date) {
  return date.getFullYear() + "/" + pad(date.getMonth() + 1) + "/" + pad(date.getDate());
}

function formatRelativeTime(date) {
  let showTwelveHour = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  const now = new Date(Date.now());

  if (withinPast24Hours(date, now)) {
    return formatTime(date, showTwelveHour);
  } else {
    const months = getMonthsArray();
    let relativeDate = `${months[date.getMonth()]} ${date.getDate()}`;

    if (!withinCurrentYear(date, now)) {
      relativeDate += `, ${date.getFullYear()}`;
    }

    return relativeDate;
  }
}
/**
 * Formats duration in ms to human readable string
 * Returns value in biggest possible unit (day, hour, min, second)
 * Rounds values up until unit threshold
 * ie. 23:13:57 -> 23h, 24:13:57 -> 1d, 44:56:56 -> 2d
 */


const MINUTE_MS = 60000;
const HOUR_MS = MINUTE_MS * 60;
const DAY_MS = HOUR_MS * 24;

function formatDuration(durationMs) {
  if (durationMs >= DAY_MS) {
    return (0, _languageHandler._t)('%(value)sd', {
      value: Math.round(durationMs / DAY_MS)
    });
  }

  if (durationMs >= HOUR_MS) {
    return (0, _languageHandler._t)('%(value)sh', {
      value: Math.round(durationMs / HOUR_MS)
    });
  }

  if (durationMs >= MINUTE_MS) {
    return (0, _languageHandler._t)('%(value)sm', {
      value: Math.round(durationMs / MINUTE_MS)
    });
  }

  return (0, _languageHandler._t)('%(value)ss', {
    value: Math.round(durationMs / 1000)
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXREYXlzQXJyYXkiLCJfdCIsImdldE1vbnRoc0FycmF5IiwicGFkIiwibiIsInR3ZWx2ZUhvdXJUaW1lIiwiZGF0ZSIsInNob3dTZWNvbmRzIiwiaG91cnMiLCJnZXRIb3VycyIsIm1pbnV0ZXMiLCJnZXRNaW51dGVzIiwiYW1wbSIsInNlY29uZHMiLCJnZXRTZWNvbmRzIiwiZm9ybWF0RGF0ZSIsInNob3dUd2VsdmVIb3VyIiwibm93IiwiRGF0ZSIsImRheXMiLCJtb250aHMiLCJ0b0RhdGVTdHJpbmciLCJmb3JtYXRUaW1lIiwiZ2V0VGltZSIsIndlZWtEYXlOYW1lIiwiZ2V0RGF5IiwidGltZSIsImdldEZ1bGxZZWFyIiwibW9udGhOYW1lIiwiZ2V0TW9udGgiLCJkYXkiLCJnZXREYXRlIiwiZm9ybWF0RnVsbERhdGUiLCJmb3JtYXRGdWxsRGF0ZU5vVGltZSIsImZ1bGxZZWFyIiwiZm9ybWF0RnVsbFRpbWUiLCJmb3JtYXRDYWxsVGltZSIsImRlbHRhIiwiZ2V0VVRDSG91cnMiLCJnZXRVVENNaW51dGVzIiwiZ2V0VVRDU2Vjb25kcyIsIm91dHB1dCIsImZvcm1hdFNlY29uZHMiLCJpblNlY29uZHMiLCJNYXRoIiwiZmxvb3IiLCJ0b0ZpeGVkIiwicGFkU3RhcnQiLCJNSUxMSVNfSU5fREFZIiwid2l0aGluUGFzdDI0SG91cnMiLCJwcmV2RGF0ZSIsIm5leHREYXRlIiwiYWJzIiwid2l0aGluQ3VycmVudFllYXIiLCJ3YW50c0RhdGVTZXBhcmF0b3IiLCJwcmV2RXZlbnREYXRlIiwibmV4dEV2ZW50RGF0ZSIsImZvcm1hdEZ1bGxEYXRlTm9EYXkiLCJ0b0xvY2FsZURhdGVTdHJpbmciLCJyZXBsYWNlIiwidG9Mb2NhbGVUaW1lU3RyaW5nIiwiZm9ybWF0RnVsbERhdGVOb0RheU5vVGltZSIsImZvcm1hdFJlbGF0aXZlVGltZSIsInJlbGF0aXZlRGF0ZSIsIk1JTlVURV9NUyIsIkhPVVJfTVMiLCJEQVlfTVMiLCJmb3JtYXREdXJhdGlvbiIsImR1cmF0aW9uTXMiLCJ2YWx1ZSIsInJvdW5kIl0sInNvdXJjZXMiOlsiLi4vc3JjL0RhdGVVdGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTUsIDIwMTYgT3Blbk1hcmtldCBMdGRcbkNvcHlyaWdodCAyMDE3IFZlY3RvciBDcmVhdGlvbnMgTHRkXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IHsgX3QgfSBmcm9tICcuL2xhbmd1YWdlSGFuZGxlcic7XG5cbmZ1bmN0aW9uIGdldERheXNBcnJheSgpOiBzdHJpbmdbXSB7XG4gICAgcmV0dXJuIFtcbiAgICAgICAgX3QoJ1N1bicpLFxuICAgICAgICBfdCgnTW9uJyksXG4gICAgICAgIF90KCdUdWUnKSxcbiAgICAgICAgX3QoJ1dlZCcpLFxuICAgICAgICBfdCgnVGh1JyksXG4gICAgICAgIF90KCdGcmknKSxcbiAgICAgICAgX3QoJ1NhdCcpLFxuICAgIF07XG59XG5cbmZ1bmN0aW9uIGdldE1vbnRoc0FycmF5KCk6IHN0cmluZ1tdIHtcbiAgICByZXR1cm4gW1xuICAgICAgICBfdCgnSmFuJyksXG4gICAgICAgIF90KCdGZWInKSxcbiAgICAgICAgX3QoJ01hcicpLFxuICAgICAgICBfdCgnQXByJyksXG4gICAgICAgIF90KCdNYXknKSxcbiAgICAgICAgX3QoJ0p1bicpLFxuICAgICAgICBfdCgnSnVsJyksXG4gICAgICAgIF90KCdBdWcnKSxcbiAgICAgICAgX3QoJ1NlcCcpLFxuICAgICAgICBfdCgnT2N0JyksXG4gICAgICAgIF90KCdOb3YnKSxcbiAgICAgICAgX3QoJ0RlYycpLFxuICAgIF07XG59XG5cbmZ1bmN0aW9uIHBhZChuOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiAobiA8IDEwID8gJzAnIDogJycpICsgbjtcbn1cblxuZnVuY3Rpb24gdHdlbHZlSG91clRpbWUoZGF0ZTogRGF0ZSwgc2hvd1NlY29uZHMgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpICUgMTI7XG4gICAgY29uc3QgbWludXRlcyA9IHBhZChkYXRlLmdldE1pbnV0ZXMoKSk7XG4gICAgY29uc3QgYW1wbSA9IGRhdGUuZ2V0SG91cnMoKSA+PSAxMiA/IF90KCdQTScpIDogX3QoJ0FNJyk7XG4gICAgaG91cnMgPSBob3VycyA/IGhvdXJzIDogMTI7IC8vIGNvbnZlcnQgMCAtPiAxMlxuICAgIGlmIChzaG93U2Vjb25kcykge1xuICAgICAgICBjb25zdCBzZWNvbmRzID0gcGFkKGRhdGUuZ2V0U2Vjb25kcygpKTtcbiAgICAgICAgcmV0dXJuIGAke2hvdXJzfToke21pbnV0ZXN9OiR7c2Vjb25kc30ke2FtcG19YDtcbiAgICB9XG4gICAgcmV0dXJuIGAke2hvdXJzfToke21pbnV0ZXN9JHthbXBtfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXREYXRlKGRhdGU6IERhdGUsIHNob3dUd2VsdmVIb3VyID0gZmFsc2UpOiBzdHJpbmcge1xuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgZGF5cyA9IGdldERheXNBcnJheSgpO1xuICAgIGNvbnN0IG1vbnRocyA9IGdldE1vbnRoc0FycmF5KCk7XG4gICAgaWYgKGRhdGUudG9EYXRlU3RyaW5nKCkgPT09IG5vdy50b0RhdGVTdHJpbmcoKSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0VGltZShkYXRlLCBzaG93VHdlbHZlSG91cik7XG4gICAgfSBlbHNlIGlmIChub3cuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lKCkgPCA2ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAvLyBUT0RPOiB1c2Ugc3RhbmRhcmQgZGF0ZSBsb2NhbGl6ZSBmdW5jdGlvbiBwcm92aWRlZCBpbiBjb3VudGVycGFydFxuICAgICAgICByZXR1cm4gX3QoJyUod2Vla0RheU5hbWUpcyAlKHRpbWUpcycsIHtcbiAgICAgICAgICAgIHdlZWtEYXlOYW1lOiBkYXlzW2RhdGUuZ2V0RGF5KCldLFxuICAgICAgICAgICAgdGltZTogZm9ybWF0VGltZShkYXRlLCBzaG93VHdlbHZlSG91ciksXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAobm93LmdldEZ1bGxZZWFyKCkgPT09IGRhdGUuZ2V0RnVsbFllYXIoKSkge1xuICAgICAgICAvLyBUT0RPOiB1c2Ugc3RhbmRhcmQgZGF0ZSBsb2NhbGl6ZSBmdW5jdGlvbiBwcm92aWRlZCBpbiBjb3VudGVycGFydFxuICAgICAgICByZXR1cm4gX3QoJyUod2Vla0RheU5hbWUpcywgJShtb250aE5hbWUpcyAlKGRheSlzICUodGltZSlzJywge1xuICAgICAgICAgICAgd2Vla0RheU5hbWU6IGRheXNbZGF0ZS5nZXREYXkoKV0sXG4gICAgICAgICAgICBtb250aE5hbWU6IG1vbnRoc1tkYXRlLmdldE1vbnRoKCldLFxuICAgICAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgICAgIHRpbWU6IGZvcm1hdFRpbWUoZGF0ZSwgc2hvd1R3ZWx2ZUhvdXIpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGZvcm1hdEZ1bGxEYXRlKGRhdGUsIHNob3dUd2VsdmVIb3VyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZ1bGxEYXRlTm9UaW1lKGRhdGU6IERhdGUpOiBzdHJpbmcge1xuICAgIGNvbnN0IGRheXMgPSBnZXREYXlzQXJyYXkoKTtcbiAgICBjb25zdCBtb250aHMgPSBnZXRNb250aHNBcnJheSgpO1xuICAgIHJldHVybiBfdCgnJSh3ZWVrRGF5TmFtZSlzLCAlKG1vbnRoTmFtZSlzICUoZGF5KXMgJShmdWxsWWVhcilzJywge1xuICAgICAgICB3ZWVrRGF5TmFtZTogZGF5c1tkYXRlLmdldERheSgpXSxcbiAgICAgICAgbW9udGhOYW1lOiBtb250aHNbZGF0ZS5nZXRNb250aCgpXSxcbiAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgZnVsbFllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKSxcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZ1bGxEYXRlKGRhdGU6IERhdGUsIHNob3dUd2VsdmVIb3VyID0gZmFsc2UsIHNob3dTZWNvbmRzID0gdHJ1ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgZGF5cyA9IGdldERheXNBcnJheSgpO1xuICAgIGNvbnN0IG1vbnRocyA9IGdldE1vbnRoc0FycmF5KCk7XG4gICAgcmV0dXJuIF90KCclKHdlZWtEYXlOYW1lKXMsICUobW9udGhOYW1lKXMgJShkYXkpcyAlKGZ1bGxZZWFyKXMgJSh0aW1lKXMnLCB7XG4gICAgICAgIHdlZWtEYXlOYW1lOiBkYXlzW2RhdGUuZ2V0RGF5KCldLFxuICAgICAgICBtb250aE5hbWU6IG1vbnRoc1tkYXRlLmdldE1vbnRoKCldLFxuICAgICAgICBkYXk6IGRhdGUuZ2V0RGF0ZSgpLFxuICAgICAgICBmdWxsWWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLFxuICAgICAgICB0aW1lOiBzaG93U2Vjb25kcyA/IGZvcm1hdEZ1bGxUaW1lKGRhdGUsIHNob3dUd2VsdmVIb3VyKSA6IGZvcm1hdFRpbWUoZGF0ZSwgc2hvd1R3ZWx2ZUhvdXIpLFxuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RnVsbFRpbWUoZGF0ZTogRGF0ZSwgc2hvd1R3ZWx2ZUhvdXIgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgaWYgKHNob3dUd2VsdmVIb3VyKSB7XG4gICAgICAgIHJldHVybiB0d2VsdmVIb3VyVGltZShkYXRlLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhZChkYXRlLmdldEhvdXJzKCkpICsgJzonICsgcGFkKGRhdGUuZ2V0TWludXRlcygpKSArICc6JyArIHBhZChkYXRlLmdldFNlY29uZHMoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRUaW1lKGRhdGU6IERhdGUsIHNob3dUd2VsdmVIb3VyID0gZmFsc2UpOiBzdHJpbmcge1xuICAgIGlmIChzaG93VHdlbHZlSG91cikge1xuICAgICAgICByZXR1cm4gdHdlbHZlSG91clRpbWUoZGF0ZSk7XG4gICAgfVxuICAgIHJldHVybiBwYWQoZGF0ZS5nZXRIb3VycygpKSArICc6JyArIHBhZChkYXRlLmdldE1pbnV0ZXMoKSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRDYWxsVGltZShkZWx0YTogRGF0ZSk6IHN0cmluZyB7XG4gICAgY29uc3QgaG91cnMgPSBkZWx0YS5nZXRVVENIb3VycygpO1xuICAgIGNvbnN0IG1pbnV0ZXMgPSBkZWx0YS5nZXRVVENNaW51dGVzKCk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IGRlbHRhLmdldFVUQ1NlY29uZHMoKTtcblxuICAgIGxldCBvdXRwdXQgPSBcIlwiO1xuICAgIGlmIChob3Vycykgb3V0cHV0ICs9IGAke2hvdXJzfWggYDtcbiAgICBpZiAobWludXRlcyB8fCBvdXRwdXQpIG91dHB1dCArPSBgJHttaW51dGVzfW0gYDtcbiAgICBpZiAoc2Vjb25kcyB8fCBvdXRwdXQpIG91dHB1dCArPSBgJHtzZWNvbmRzfXNgO1xuXG4gICAgcmV0dXJuIG91dHB1dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNlY29uZHMoaW5TZWNvbmRzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihpblNlY29uZHMgLyAoNjAgKiA2MCkpLnRvRml4ZWQoMCkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcigoaW5TZWNvbmRzICUgKDYwICogNjApKSAvIDYwKS50b0ZpeGVkKDApLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IoKChpblNlY29uZHMgJSAoNjAgKiA2MCkpICUgNjApKS50b0ZpeGVkKDApLnBhZFN0YXJ0KDIsICcwJyk7XG5cbiAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICBpZiAoaG91cnMgIT09IFwiMDBcIikgb3V0cHV0ICs9IGAke2hvdXJzfTpgO1xuICAgIG91dHB1dCArPSBgJHttaW51dGVzfToke3NlY29uZHN9YDtcblxuICAgIHJldHVybiBvdXRwdXQ7XG59XG5cbmNvbnN0IE1JTExJU19JTl9EQVkgPSA4NjQwMDAwMDtcbmZ1bmN0aW9uIHdpdGhpblBhc3QyNEhvdXJzKHByZXZEYXRlOiBEYXRlLCBuZXh0RGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBNYXRoLmFicyhwcmV2RGF0ZS5nZXRUaW1lKCkgLSBuZXh0RGF0ZS5nZXRUaW1lKCkpIDw9IE1JTExJU19JTl9EQVk7XG59XG5cbmZ1bmN0aW9uIHdpdGhpbkN1cnJlbnRZZWFyKHByZXZEYXRlOiBEYXRlLCBuZXh0RGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBwcmV2RGF0ZS5nZXRGdWxsWWVhcigpID09PSBuZXh0RGF0ZS5nZXRGdWxsWWVhcigpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gd2FudHNEYXRlU2VwYXJhdG9yKHByZXZFdmVudERhdGU6IERhdGUsIG5leHRFdmVudERhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBpZiAoIW5leHRFdmVudERhdGUgfHwgIXByZXZFdmVudERhdGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBSZXR1cm4gZWFybHkgZm9yIGV2ZW50cyB0aGF0IGFyZSA+IDI0aCBhcGFydFxuICAgIGlmICghd2l0aGluUGFzdDI0SG91cnMocHJldkV2ZW50RGF0ZSwgbmV4dEV2ZW50RGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gQ29tcGFyZSB3ZWVrZGF5c1xuICAgIHJldHVybiBwcmV2RXZlbnREYXRlLmdldERheSgpICE9PSBuZXh0RXZlbnREYXRlLmdldERheSgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RnVsbERhdGVOb0RheShkYXRlOiBEYXRlKSB7XG4gICAgcmV0dXJuIF90KFwiJShkYXRlKXMgYXQgJSh0aW1lKXNcIiwge1xuICAgICAgICBkYXRlOiBkYXRlLnRvTG9jYWxlRGF0ZVN0cmluZygpLnJlcGxhY2UoL1xcLy9nLCAnLScpLFxuICAgICAgICB0aW1lOiBkYXRlLnRvTG9jYWxlVGltZVN0cmluZygpLnJlcGxhY2UoLzovZywgJy0nKSxcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEZ1bGxEYXRlTm9EYXlOb1RpbWUoZGF0ZTogRGF0ZSkge1xuICAgIHJldHVybiAoXG4gICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSArXG4gICAgICAgIFwiL1wiICtcbiAgICAgICAgcGFkKGRhdGUuZ2V0TW9udGgoKSArIDEpICtcbiAgICAgICAgXCIvXCIgK1xuICAgICAgICBwYWQoZGF0ZS5nZXREYXRlKCkpXG4gICAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFJlbGF0aXZlVGltZShkYXRlOiBEYXRlLCBzaG93VHdlbHZlSG91ciA9IGZhbHNlKTogc3RyaW5nIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZShEYXRlLm5vdygpKTtcbiAgICBpZiAod2l0aGluUGFzdDI0SG91cnMoZGF0ZSwgbm93KSkge1xuICAgICAgICByZXR1cm4gZm9ybWF0VGltZShkYXRlLCBzaG93VHdlbHZlSG91cik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgbW9udGhzID0gZ2V0TW9udGhzQXJyYXkoKTtcbiAgICAgICAgbGV0IHJlbGF0aXZlRGF0ZSA9IGAke21vbnRoc1tkYXRlLmdldE1vbnRoKCldfSAke2RhdGUuZ2V0RGF0ZSgpfWA7XG5cbiAgICAgICAgaWYgKCF3aXRoaW5DdXJyZW50WWVhcihkYXRlLCBub3cpKSB7XG4gICAgICAgICAgICByZWxhdGl2ZURhdGUgKz0gYCwgJHtkYXRlLmdldEZ1bGxZZWFyKCl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVsYXRpdmVEYXRlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBGb3JtYXRzIGR1cmF0aW9uIGluIG1zIHRvIGh1bWFuIHJlYWRhYmxlIHN0cmluZ1xuICogUmV0dXJucyB2YWx1ZSBpbiBiaWdnZXN0IHBvc3NpYmxlIHVuaXQgKGRheSwgaG91ciwgbWluLCBzZWNvbmQpXG4gKiBSb3VuZHMgdmFsdWVzIHVwIHVudGlsIHVuaXQgdGhyZXNob2xkXG4gKiBpZS4gMjM6MTM6NTcgLT4gMjNoLCAyNDoxMzo1NyAtPiAxZCwgNDQ6NTY6NTYgLT4gMmRcbiAqL1xuY29uc3QgTUlOVVRFX01TID0gNjAwMDA7XG5jb25zdCBIT1VSX01TID0gTUlOVVRFX01TICogNjA7XG5jb25zdCBEQVlfTVMgPSBIT1VSX01TICogMjQ7XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0RHVyYXRpb24oZHVyYXRpb25NczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoZHVyYXRpb25NcyA+PSBEQVlfTVMpIHtcbiAgICAgICAgcmV0dXJuIF90KCclKHZhbHVlKXNkJywgeyB2YWx1ZTogTWF0aC5yb3VuZChkdXJhdGlvbk1zIC8gREFZX01TKSB9KTtcbiAgICB9XG4gICAgaWYgKGR1cmF0aW9uTXMgPj0gSE9VUl9NUykge1xuICAgICAgICByZXR1cm4gX3QoJyUodmFsdWUpc2gnLCB7IHZhbHVlOiBNYXRoLnJvdW5kKGR1cmF0aW9uTXMgLyBIT1VSX01TKSB9KTtcbiAgICB9XG4gICAgaWYgKGR1cmF0aW9uTXMgPj0gTUlOVVRFX01TKSB7XG4gICAgICAgIHJldHVybiBfdCgnJSh2YWx1ZSlzbScsIHsgdmFsdWU6IE1hdGgucm91bmQoZHVyYXRpb25NcyAvIE1JTlVURV9NUykgfSk7XG4gICAgfVxuICAgIHJldHVybiBfdCgnJSh2YWx1ZSlzcycsIHsgdmFsdWU6IE1hdGgucm91bmQoZHVyYXRpb25NcyAvIDEwMDApIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQkE7O0FBakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUEsU0FBU0EsWUFBVCxHQUFrQztFQUM5QixPQUFPLENBQ0gsSUFBQUMsbUJBQUEsRUFBRyxLQUFILENBREcsRUFFSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FGRyxFQUdILElBQUFBLG1CQUFBLEVBQUcsS0FBSCxDQUhHLEVBSUgsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBSkcsRUFLSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FMRyxFQU1ILElBQUFBLG1CQUFBLEVBQUcsS0FBSCxDQU5HLEVBT0gsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBUEcsQ0FBUDtBQVNIOztBQUVELFNBQVNDLGNBQVQsR0FBb0M7RUFDaEMsT0FBTyxDQUNILElBQUFELG1CQUFBLEVBQUcsS0FBSCxDQURHLEVBRUgsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBRkcsRUFHSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FIRyxFQUlILElBQUFBLG1CQUFBLEVBQUcsS0FBSCxDQUpHLEVBS0gsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBTEcsRUFNSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FORyxFQU9ILElBQUFBLG1CQUFBLEVBQUcsS0FBSCxDQVBHLEVBUUgsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBUkcsRUFTSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FURyxFQVVILElBQUFBLG1CQUFBLEVBQUcsS0FBSCxDQVZHLEVBV0gsSUFBQUEsbUJBQUEsRUFBRyxLQUFILENBWEcsRUFZSCxJQUFBQSxtQkFBQSxFQUFHLEtBQUgsQ0FaRyxDQUFQO0FBY0g7O0FBRUQsU0FBU0UsR0FBVCxDQUFhQyxDQUFiLEVBQWdDO0VBQzVCLE9BQU8sQ0FBQ0EsQ0FBQyxHQUFHLEVBQUosR0FBUyxHQUFULEdBQWUsRUFBaEIsSUFBc0JBLENBQTdCO0FBQ0g7O0FBRUQsU0FBU0MsY0FBVCxDQUF3QkMsSUFBeEIsRUFBaUU7RUFBQSxJQUE3QkMsV0FBNkIsdUVBQWYsS0FBZTtFQUM3RCxJQUFJQyxLQUFLLEdBQUdGLElBQUksQ0FBQ0csUUFBTCxLQUFrQixFQUE5QjtFQUNBLE1BQU1DLE9BQU8sR0FBR1AsR0FBRyxDQUFDRyxJQUFJLENBQUNLLFVBQUwsRUFBRCxDQUFuQjtFQUNBLE1BQU1DLElBQUksR0FBR04sSUFBSSxDQUFDRyxRQUFMLE1BQW1CLEVBQW5CLEdBQXdCLElBQUFSLG1CQUFBLEVBQUcsSUFBSCxDQUF4QixHQUFtQyxJQUFBQSxtQkFBQSxFQUFHLElBQUgsQ0FBaEQ7RUFDQU8sS0FBSyxHQUFHQSxLQUFLLEdBQUdBLEtBQUgsR0FBVyxFQUF4QixDQUo2RCxDQUlqQzs7RUFDNUIsSUFBSUQsV0FBSixFQUFpQjtJQUNiLE1BQU1NLE9BQU8sR0FBR1YsR0FBRyxDQUFDRyxJQUFJLENBQUNRLFVBQUwsRUFBRCxDQUFuQjtJQUNBLE9BQVEsR0FBRU4sS0FBTSxJQUFHRSxPQUFRLElBQUdHLE9BQVEsR0FBRUQsSUFBSyxFQUE3QztFQUNIOztFQUNELE9BQVEsR0FBRUosS0FBTSxJQUFHRSxPQUFRLEdBQUVFLElBQUssRUFBbEM7QUFDSDs7QUFFTSxTQUFTRyxVQUFULENBQW9CVCxJQUFwQixFQUFnRTtFQUFBLElBQWhDVSxjQUFnQyx1RUFBZixLQUFlO0VBQ25FLE1BQU1DLEdBQUcsR0FBRyxJQUFJQyxJQUFKLEVBQVo7RUFDQSxNQUFNQyxJQUFJLEdBQUduQixZQUFZLEVBQXpCO0VBQ0EsTUFBTW9CLE1BQU0sR0FBR2xCLGNBQWMsRUFBN0I7O0VBQ0EsSUFBSUksSUFBSSxDQUFDZSxZQUFMLE9BQXdCSixHQUFHLENBQUNJLFlBQUosRUFBNUIsRUFBZ0Q7SUFDNUMsT0FBT0MsVUFBVSxDQUFDaEIsSUFBRCxFQUFPVSxjQUFQLENBQWpCO0VBQ0gsQ0FGRCxNQUVPLElBQUlDLEdBQUcsQ0FBQ00sT0FBSixLQUFnQmpCLElBQUksQ0FBQ2lCLE9BQUwsRUFBaEIsR0FBaUMsSUFBSSxFQUFKLEdBQVMsRUFBVCxHQUFjLEVBQWQsR0FBbUIsSUFBeEQsRUFBOEQ7SUFDakU7SUFDQSxPQUFPLElBQUF0QixtQkFBQSxFQUFHLDBCQUFILEVBQStCO01BQ2xDdUIsV0FBVyxFQUFFTCxJQUFJLENBQUNiLElBQUksQ0FBQ21CLE1BQUwsRUFBRCxDQURpQjtNQUVsQ0MsSUFBSSxFQUFFSixVQUFVLENBQUNoQixJQUFELEVBQU9VLGNBQVA7SUFGa0IsQ0FBL0IsQ0FBUDtFQUlILENBTk0sTUFNQSxJQUFJQyxHQUFHLENBQUNVLFdBQUosT0FBc0JyQixJQUFJLENBQUNxQixXQUFMLEVBQTFCLEVBQThDO0lBQ2pEO0lBQ0EsT0FBTyxJQUFBMUIsbUJBQUEsRUFBRyxpREFBSCxFQUFzRDtNQUN6RHVCLFdBQVcsRUFBRUwsSUFBSSxDQUFDYixJQUFJLENBQUNtQixNQUFMLEVBQUQsQ0FEd0M7TUFFekRHLFNBQVMsRUFBRVIsTUFBTSxDQUFDZCxJQUFJLENBQUN1QixRQUFMLEVBQUQsQ0FGd0M7TUFHekRDLEdBQUcsRUFBRXhCLElBQUksQ0FBQ3lCLE9BQUwsRUFIb0Q7TUFJekRMLElBQUksRUFBRUosVUFBVSxDQUFDaEIsSUFBRCxFQUFPVSxjQUFQO0lBSnlDLENBQXRELENBQVA7RUFNSDs7RUFDRCxPQUFPZ0IsY0FBYyxDQUFDMUIsSUFBRCxFQUFPVSxjQUFQLENBQXJCO0FBQ0g7O0FBRU0sU0FBU2lCLG9CQUFULENBQThCM0IsSUFBOUIsRUFBa0Q7RUFDckQsTUFBTWEsSUFBSSxHQUFHbkIsWUFBWSxFQUF6QjtFQUNBLE1BQU1vQixNQUFNLEdBQUdsQixjQUFjLEVBQTdCO0VBQ0EsT0FBTyxJQUFBRCxtQkFBQSxFQUFHLHFEQUFILEVBQTBEO0lBQzdEdUIsV0FBVyxFQUFFTCxJQUFJLENBQUNiLElBQUksQ0FBQ21CLE1BQUwsRUFBRCxDQUQ0QztJQUU3REcsU0FBUyxFQUFFUixNQUFNLENBQUNkLElBQUksQ0FBQ3VCLFFBQUwsRUFBRCxDQUY0QztJQUc3REMsR0FBRyxFQUFFeEIsSUFBSSxDQUFDeUIsT0FBTCxFQUh3RDtJQUk3REcsUUFBUSxFQUFFNUIsSUFBSSxDQUFDcUIsV0FBTDtFQUptRCxDQUExRCxDQUFQO0FBTUg7O0FBRU0sU0FBU0ssY0FBVCxDQUF3QjFCLElBQXhCLEVBQXdGO0VBQUEsSUFBcERVLGNBQW9ELHVFQUFuQyxLQUFtQztFQUFBLElBQTVCVCxXQUE0Qix1RUFBZCxJQUFjO0VBQzNGLE1BQU1ZLElBQUksR0FBR25CLFlBQVksRUFBekI7RUFDQSxNQUFNb0IsTUFBTSxHQUFHbEIsY0FBYyxFQUE3QjtFQUNBLE9BQU8sSUFBQUQsbUJBQUEsRUFBRyw4REFBSCxFQUFtRTtJQUN0RXVCLFdBQVcsRUFBRUwsSUFBSSxDQUFDYixJQUFJLENBQUNtQixNQUFMLEVBQUQsQ0FEcUQ7SUFFdEVHLFNBQVMsRUFBRVIsTUFBTSxDQUFDZCxJQUFJLENBQUN1QixRQUFMLEVBQUQsQ0FGcUQ7SUFHdEVDLEdBQUcsRUFBRXhCLElBQUksQ0FBQ3lCLE9BQUwsRUFIaUU7SUFJdEVHLFFBQVEsRUFBRTVCLElBQUksQ0FBQ3FCLFdBQUwsRUFKNEQ7SUFLdEVELElBQUksRUFBRW5CLFdBQVcsR0FBRzRCLGNBQWMsQ0FBQzdCLElBQUQsRUFBT1UsY0FBUCxDQUFqQixHQUEwQ00sVUFBVSxDQUFDaEIsSUFBRCxFQUFPVSxjQUFQO0VBTEMsQ0FBbkUsQ0FBUDtBQU9IOztBQUVNLFNBQVNtQixjQUFULENBQXdCN0IsSUFBeEIsRUFBb0U7RUFBQSxJQUFoQ1UsY0FBZ0MsdUVBQWYsS0FBZTs7RUFDdkUsSUFBSUEsY0FBSixFQUFvQjtJQUNoQixPQUFPWCxjQUFjLENBQUNDLElBQUQsRUFBTyxJQUFQLENBQXJCO0VBQ0g7O0VBQ0QsT0FBT0gsR0FBRyxDQUFDRyxJQUFJLENBQUNHLFFBQUwsRUFBRCxDQUFILEdBQXVCLEdBQXZCLEdBQTZCTixHQUFHLENBQUNHLElBQUksQ0FBQ0ssVUFBTCxFQUFELENBQWhDLEdBQXNELEdBQXRELEdBQTREUixHQUFHLENBQUNHLElBQUksQ0FBQ1EsVUFBTCxFQUFELENBQXRFO0FBQ0g7O0FBRU0sU0FBU1EsVUFBVCxDQUFvQmhCLElBQXBCLEVBQWdFO0VBQUEsSUFBaENVLGNBQWdDLHVFQUFmLEtBQWU7O0VBQ25FLElBQUlBLGNBQUosRUFBb0I7SUFDaEIsT0FBT1gsY0FBYyxDQUFDQyxJQUFELENBQXJCO0VBQ0g7O0VBQ0QsT0FBT0gsR0FBRyxDQUFDRyxJQUFJLENBQUNHLFFBQUwsRUFBRCxDQUFILEdBQXVCLEdBQXZCLEdBQTZCTixHQUFHLENBQUNHLElBQUksQ0FBQ0ssVUFBTCxFQUFELENBQXZDO0FBQ0g7O0FBRU0sU0FBU3lCLGNBQVQsQ0FBd0JDLEtBQXhCLEVBQTZDO0VBQ2hELE1BQU03QixLQUFLLEdBQUc2QixLQUFLLENBQUNDLFdBQU4sRUFBZDtFQUNBLE1BQU01QixPQUFPLEdBQUcyQixLQUFLLENBQUNFLGFBQU4sRUFBaEI7RUFDQSxNQUFNMUIsT0FBTyxHQUFHd0IsS0FBSyxDQUFDRyxhQUFOLEVBQWhCO0VBRUEsSUFBSUMsTUFBTSxHQUFHLEVBQWI7RUFDQSxJQUFJakMsS0FBSixFQUFXaUMsTUFBTSxJQUFLLEdBQUVqQyxLQUFNLElBQW5CO0VBQ1gsSUFBSUUsT0FBTyxJQUFJK0IsTUFBZixFQUF1QkEsTUFBTSxJQUFLLEdBQUUvQixPQUFRLElBQXJCO0VBQ3ZCLElBQUlHLE9BQU8sSUFBSTRCLE1BQWYsRUFBdUJBLE1BQU0sSUFBSyxHQUFFNUIsT0FBUSxHQUFyQjtFQUV2QixPQUFPNEIsTUFBUDtBQUNIOztBQUVNLFNBQVNDLGFBQVQsQ0FBdUJDLFNBQXZCLEVBQWtEO0VBQ3JELE1BQU1uQyxLQUFLLEdBQUdvQyxJQUFJLENBQUNDLEtBQUwsQ0FBV0YsU0FBUyxJQUFJLEtBQUssRUFBVCxDQUFwQixFQUFrQ0csT0FBbEMsQ0FBMEMsQ0FBMUMsRUFBNkNDLFFBQTdDLENBQXNELENBQXRELEVBQXlELEdBQXpELENBQWQ7RUFDQSxNQUFNckMsT0FBTyxHQUFHa0MsSUFBSSxDQUFDQyxLQUFMLENBQVlGLFNBQVMsSUFBSSxLQUFLLEVBQVQsQ0FBVixHQUEwQixFQUFyQyxFQUF5Q0csT0FBekMsQ0FBaUQsQ0FBakQsRUFBb0RDLFFBQXBELENBQTZELENBQTdELEVBQWdFLEdBQWhFLENBQWhCO0VBQ0EsTUFBTWxDLE9BQU8sR0FBRytCLElBQUksQ0FBQ0MsS0FBTCxDQUFhRixTQUFTLElBQUksS0FBSyxFQUFULENBQVYsR0FBMEIsRUFBdEMsRUFBMkNHLE9BQTNDLENBQW1ELENBQW5ELEVBQXNEQyxRQUF0RCxDQUErRCxDQUEvRCxFQUFrRSxHQUFsRSxDQUFoQjtFQUVBLElBQUlOLE1BQU0sR0FBRyxFQUFiO0VBQ0EsSUFBSWpDLEtBQUssS0FBSyxJQUFkLEVBQW9CaUMsTUFBTSxJQUFLLEdBQUVqQyxLQUFNLEdBQW5CO0VBQ3BCaUMsTUFBTSxJQUFLLEdBQUUvQixPQUFRLElBQUdHLE9BQVEsRUFBaEM7RUFFQSxPQUFPNEIsTUFBUDtBQUNIOztBQUVELE1BQU1PLGFBQWEsR0FBRyxRQUF0Qjs7QUFDQSxTQUFTQyxpQkFBVCxDQUEyQkMsUUFBM0IsRUFBMkNDLFFBQTNDLEVBQW9FO0VBQ2hFLE9BQU9QLElBQUksQ0FBQ1EsR0FBTCxDQUFTRixRQUFRLENBQUMzQixPQUFULEtBQXFCNEIsUUFBUSxDQUFDNUIsT0FBVCxFQUE5QixLQUFxRHlCLGFBQTVEO0FBQ0g7O0FBRUQsU0FBU0ssaUJBQVQsQ0FBMkJILFFBQTNCLEVBQTJDQyxRQUEzQyxFQUFvRTtFQUNoRSxPQUFPRCxRQUFRLENBQUN2QixXQUFULE9BQTJCd0IsUUFBUSxDQUFDeEIsV0FBVCxFQUFsQztBQUNIOztBQUVNLFNBQVMyQixrQkFBVCxDQUE0QkMsYUFBNUIsRUFBaURDLGFBQWpELEVBQStFO0VBQ2xGLElBQUksQ0FBQ0EsYUFBRCxJQUFrQixDQUFDRCxhQUF2QixFQUFzQztJQUNsQyxPQUFPLEtBQVA7RUFDSCxDQUhpRixDQUlsRjs7O0VBQ0EsSUFBSSxDQUFDTixpQkFBaUIsQ0FBQ00sYUFBRCxFQUFnQkMsYUFBaEIsQ0FBdEIsRUFBc0Q7SUFDbEQsT0FBTyxJQUFQO0VBQ0gsQ0FQaUYsQ0FTbEY7OztFQUNBLE9BQU9ELGFBQWEsQ0FBQzlCLE1BQWQsT0FBMkIrQixhQUFhLENBQUMvQixNQUFkLEVBQWxDO0FBQ0g7O0FBRU0sU0FBU2dDLG1CQUFULENBQTZCbkQsSUFBN0IsRUFBeUM7RUFDNUMsT0FBTyxJQUFBTCxtQkFBQSxFQUFHLHNCQUFILEVBQTJCO0lBQzlCSyxJQUFJLEVBQUVBLElBQUksQ0FBQ29ELGtCQUFMLEdBQTBCQyxPQUExQixDQUFrQyxLQUFsQyxFQUF5QyxHQUF6QyxDQUR3QjtJQUU5QmpDLElBQUksRUFBRXBCLElBQUksQ0FBQ3NELGtCQUFMLEdBQTBCRCxPQUExQixDQUFrQyxJQUFsQyxFQUF3QyxHQUF4QztFQUZ3QixDQUEzQixDQUFQO0FBSUg7O0FBRU0sU0FBU0UseUJBQVQsQ0FBbUN2RCxJQUFuQyxFQUErQztFQUNsRCxPQUNJQSxJQUFJLENBQUNxQixXQUFMLEtBQ0EsR0FEQSxHQUVBeEIsR0FBRyxDQUFDRyxJQUFJLENBQUN1QixRQUFMLEtBQWtCLENBQW5CLENBRkgsR0FHQSxHQUhBLEdBSUExQixHQUFHLENBQUNHLElBQUksQ0FBQ3lCLE9BQUwsRUFBRCxDQUxQO0FBT0g7O0FBRU0sU0FBUytCLGtCQUFULENBQTRCeEQsSUFBNUIsRUFBd0U7RUFBQSxJQUFoQ1UsY0FBZ0MsdUVBQWYsS0FBZTtFQUMzRSxNQUFNQyxHQUFHLEdBQUcsSUFBSUMsSUFBSixDQUFTQSxJQUFJLENBQUNELEdBQUwsRUFBVCxDQUFaOztFQUNBLElBQUlnQyxpQkFBaUIsQ0FBQzNDLElBQUQsRUFBT1csR0FBUCxDQUFyQixFQUFrQztJQUM5QixPQUFPSyxVQUFVLENBQUNoQixJQUFELEVBQU9VLGNBQVAsQ0FBakI7RUFDSCxDQUZELE1BRU87SUFDSCxNQUFNSSxNQUFNLEdBQUdsQixjQUFjLEVBQTdCO0lBQ0EsSUFBSTZELFlBQVksR0FBSSxHQUFFM0MsTUFBTSxDQUFDZCxJQUFJLENBQUN1QixRQUFMLEVBQUQsQ0FBa0IsSUFBR3ZCLElBQUksQ0FBQ3lCLE9BQUwsRUFBZSxFQUFoRTs7SUFFQSxJQUFJLENBQUNzQixpQkFBaUIsQ0FBQy9DLElBQUQsRUFBT1csR0FBUCxDQUF0QixFQUFtQztNQUMvQjhDLFlBQVksSUFBSyxLQUFJekQsSUFBSSxDQUFDcUIsV0FBTCxFQUFtQixFQUF4QztJQUNIOztJQUNELE9BQU9vQyxZQUFQO0VBQ0g7QUFDSjtBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHLEtBQWxCO0FBQ0EsTUFBTUMsT0FBTyxHQUFHRCxTQUFTLEdBQUcsRUFBNUI7QUFDQSxNQUFNRSxNQUFNLEdBQUdELE9BQU8sR0FBRyxFQUF6Qjs7QUFDTyxTQUFTRSxjQUFULENBQXdCQyxVQUF4QixFQUFvRDtFQUN2RCxJQUFJQSxVQUFVLElBQUlGLE1BQWxCLEVBQTBCO0lBQ3RCLE9BQU8sSUFBQWpFLG1CQUFBLEVBQUcsWUFBSCxFQUFpQjtNQUFFb0UsS0FBSyxFQUFFekIsSUFBSSxDQUFDMEIsS0FBTCxDQUFXRixVQUFVLEdBQUdGLE1BQXhCO0lBQVQsQ0FBakIsQ0FBUDtFQUNIOztFQUNELElBQUlFLFVBQVUsSUFBSUgsT0FBbEIsRUFBMkI7SUFDdkIsT0FBTyxJQUFBaEUsbUJBQUEsRUFBRyxZQUFILEVBQWlCO01BQUVvRSxLQUFLLEVBQUV6QixJQUFJLENBQUMwQixLQUFMLENBQVdGLFVBQVUsR0FBR0gsT0FBeEI7SUFBVCxDQUFqQixDQUFQO0VBQ0g7O0VBQ0QsSUFBSUcsVUFBVSxJQUFJSixTQUFsQixFQUE2QjtJQUN6QixPQUFPLElBQUEvRCxtQkFBQSxFQUFHLFlBQUgsRUFBaUI7TUFBRW9FLEtBQUssRUFBRXpCLElBQUksQ0FBQzBCLEtBQUwsQ0FBV0YsVUFBVSxHQUFHSixTQUF4QjtJQUFULENBQWpCLENBQVA7RUFDSDs7RUFDRCxPQUFPLElBQUEvRCxtQkFBQSxFQUFHLFlBQUgsRUFBaUI7SUFBRW9FLEtBQUssRUFBRXpCLElBQUksQ0FBQzBCLEtBQUwsQ0FBV0YsVUFBVSxHQUFHLElBQXhCO0VBQVQsQ0FBakIsQ0FBUDtBQUNIIn0=