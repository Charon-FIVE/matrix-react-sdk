"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createDmLocalRoom = createDmLocalRoom;

var _olmlib = require("matrix-js-sdk/src/crypto/olmlib");

var _matrix = require("matrix-js-sdk/src/matrix");

var _LocalRoom = require("../../../src/models/LocalRoom");

var _directMessages = require("../../../src/utils/direct-messages");

/*
Copyright 2022 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

/**
 * Create a DM local room. This room will not be send to the server and only exists inside the client.
 * It sets up the local room with some artificial state events
 * so that can be used in most components instead of a „real“ room.
 *
 * @async
 * @param {MatrixClient} client
 * @param {Member[]} targets DM partners
 * @returns {Promise<LocalRoom>} Resolves to the new local room
 */
async function createDmLocalRoom(client, targets) {
  const userId = client.getUserId();
  const localRoom = new _LocalRoom.LocalRoom(_LocalRoom.LOCAL_ROOM_ID_PREFIX + client.makeTxnId(), client, userId);
  const events = [];
  events.push(new _matrix.MatrixEvent({
    event_id: `~${localRoom.roomId}:${client.makeTxnId()}`,
    type: _matrix.EventType.RoomCreate,
    content: {
      creator: userId,
      room_version: _matrix.KNOWN_SAFE_ROOM_VERSION
    },
    state_key: "",
    user_id: userId,
    sender: userId,
    room_id: localRoom.roomId,
    origin_server_ts: Date.now()
  }));

  if (await (0, _directMessages.determineCreateRoomEncryptionOption)(client, targets)) {
    localRoom.encrypted = true;
    events.push(new _matrix.MatrixEvent({
      event_id: `~${localRoom.roomId}:${client.makeTxnId()}`,
      type: _matrix.EventType.RoomEncryption,
      content: {
        algorithm: _olmlib.MEGOLM_ALGORITHM
      },
      user_id: userId,
      sender: userId,
      state_key: "",
      room_id: localRoom.roomId,
      origin_server_ts: Date.now()
    }));
  }

  events.push(new _matrix.MatrixEvent({
    event_id: `~${localRoom.roomId}:${client.makeTxnId()}`,
    type: _matrix.EventType.RoomMember,
    content: {
      displayname: userId,
      membership: "join"
    },
    state_key: userId,
    user_id: userId,
    sender: userId,
    room_id: localRoom.roomId
  }));
  targets.forEach(target => {
    events.push(new _matrix.MatrixEvent({
      event_id: `~${localRoom.roomId}:${client.makeTxnId()}`,
      type: _matrix.EventType.RoomMember,
      content: {
        displayname: target.name,
        avatar_url: target.getMxcAvatarUrl(),
        membership: "invite",
        isDirect: true
      },
      state_key: target.userId,
      sender: userId,
      room_id: localRoom.roomId
    }));
    events.push(new _matrix.MatrixEvent({
      event_id: `~${localRoom.roomId}:${client.makeTxnId()}`,
      type: _matrix.EventType.RoomMember,
      content: {
        displayname: target.name,
        avatar_url: target.getMxcAvatarUrl(),
        membership: "join"
      },
      state_key: target.userId,
      sender: target.userId,
      room_id: localRoom.roomId
    }));
  });
  localRoom.targets = targets;
  localRoom.updateMyMembership("join");
  localRoom.addLiveEvents(events);
  localRoom.currentState.setStateEvents(events);
  localRoom.name = localRoom.getDefaultRoomName(client.getUserId());
  client.store.storeRoom(localRoom);
  return localRoom;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGVEbUxvY2FsUm9vbSIsImNsaWVudCIsInRhcmdldHMiLCJ1c2VySWQiLCJnZXRVc2VySWQiLCJsb2NhbFJvb20iLCJMb2NhbFJvb20iLCJMT0NBTF9ST09NX0lEX1BSRUZJWCIsIm1ha2VUeG5JZCIsImV2ZW50cyIsInB1c2giLCJNYXRyaXhFdmVudCIsImV2ZW50X2lkIiwicm9vbUlkIiwidHlwZSIsIkV2ZW50VHlwZSIsIlJvb21DcmVhdGUiLCJjb250ZW50IiwiY3JlYXRvciIsInJvb21fdmVyc2lvbiIsIktOT1dOX1NBRkVfUk9PTV9WRVJTSU9OIiwic3RhdGVfa2V5IiwidXNlcl9pZCIsInNlbmRlciIsInJvb21faWQiLCJvcmlnaW5fc2VydmVyX3RzIiwiRGF0ZSIsIm5vdyIsImRldGVybWluZUNyZWF0ZVJvb21FbmNyeXB0aW9uT3B0aW9uIiwiZW5jcnlwdGVkIiwiUm9vbUVuY3J5cHRpb24iLCJhbGdvcml0aG0iLCJNRUdPTE1fQUxHT1JJVEhNIiwiUm9vbU1lbWJlciIsImRpc3BsYXluYW1lIiwibWVtYmVyc2hpcCIsImZvckVhY2giLCJ0YXJnZXQiLCJuYW1lIiwiYXZhdGFyX3VybCIsImdldE14Y0F2YXRhclVybCIsImlzRGlyZWN0IiwidXBkYXRlTXlNZW1iZXJzaGlwIiwiYWRkTGl2ZUV2ZW50cyIsImN1cnJlbnRTdGF0ZSIsInNldFN0YXRlRXZlbnRzIiwiZ2V0RGVmYXVsdFJvb21OYW1lIiwic3RvcmUiLCJzdG9yZVJvb20iXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvdXRpbHMvZG0vY3JlYXRlRG1Mb2NhbFJvb20udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIyIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IHsgTUVHT0xNX0FMR09SSVRITSB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9jcnlwdG8vb2xtbGliXCI7XG5pbXBvcnQgeyBFdmVudFR5cGUsIEtOT1dOX1NBRkVfUk9PTV9WRVJTSU9OLCBNYXRyaXhDbGllbnQsIE1hdHJpeEV2ZW50IH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21hdHJpeFwiO1xuXG5pbXBvcnQgeyBMb2NhbFJvb20sIExPQ0FMX1JPT01fSURfUFJFRklYIH0gZnJvbSBcIi4uLy4uLy4uL3NyYy9tb2RlbHMvTG9jYWxSb29tXCI7XG5pbXBvcnQgeyBkZXRlcm1pbmVDcmVhdGVSb29tRW5jcnlwdGlvbk9wdGlvbiwgTWVtYmVyIH0gZnJvbSBcIi4uLy4uLy4uL3NyYy91dGlscy9kaXJlY3QtbWVzc2FnZXNcIjtcblxuLyoqXG4gKiBDcmVhdGUgYSBETSBsb2NhbCByb29tLiBUaGlzIHJvb20gd2lsbCBub3QgYmUgc2VuZCB0byB0aGUgc2VydmVyIGFuZCBvbmx5IGV4aXN0cyBpbnNpZGUgdGhlIGNsaWVudC5cbiAqIEl0IHNldHMgdXAgdGhlIGxvY2FsIHJvb20gd2l0aCBzb21lIGFydGlmaWNpYWwgc3RhdGUgZXZlbnRzXG4gKiBzbyB0aGF0IGNhbiBiZSB1c2VkIGluIG1vc3QgY29tcG9uZW50cyBpbnN0ZWFkIG9mIGEg4oCecmVhbOKAnCByb29tLlxuICpcbiAqIEBhc3luY1xuICogQHBhcmFtIHtNYXRyaXhDbGllbnR9IGNsaWVudFxuICogQHBhcmFtIHtNZW1iZXJbXX0gdGFyZ2V0cyBETSBwYXJ0bmVyc1xuICogQHJldHVybnMge1Byb21pc2U8TG9jYWxSb29tPn0gUmVzb2x2ZXMgdG8gdGhlIG5ldyBsb2NhbCByb29tXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEbUxvY2FsUm9vbShcbiAgICBjbGllbnQ6IE1hdHJpeENsaWVudCxcbiAgICB0YXJnZXRzOiBNZW1iZXJbXSxcbik6IFByb21pc2U8TG9jYWxSb29tPiB7XG4gICAgY29uc3QgdXNlcklkID0gY2xpZW50LmdldFVzZXJJZCgpO1xuXG4gICAgY29uc3QgbG9jYWxSb29tID0gbmV3IExvY2FsUm9vbShMT0NBTF9ST09NX0lEX1BSRUZJWCArIGNsaWVudC5tYWtlVHhuSWQoKSwgY2xpZW50LCB1c2VySWQpO1xuICAgIGNvbnN0IGV2ZW50cyA9IFtdO1xuXG4gICAgZXZlbnRzLnB1c2gobmV3IE1hdHJpeEV2ZW50KHtcbiAgICAgICAgZXZlbnRfaWQ6IGB+JHtsb2NhbFJvb20ucm9vbUlkfToke2NsaWVudC5tYWtlVHhuSWQoKX1gLFxuICAgICAgICB0eXBlOiBFdmVudFR5cGUuUm9vbUNyZWF0ZSxcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgY3JlYXRvcjogdXNlcklkLFxuICAgICAgICAgICAgcm9vbV92ZXJzaW9uOiBLTk9XTl9TQUZFX1JPT01fVkVSU0lPTixcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdGVfa2V5OiBcIlwiLFxuICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgIHNlbmRlcjogdXNlcklkLFxuICAgICAgICByb29tX2lkOiBsb2NhbFJvb20ucm9vbUlkLFxuICAgICAgICBvcmlnaW5fc2VydmVyX3RzOiBEYXRlLm5vdygpLFxuICAgIH0pKTtcblxuICAgIGlmIChhd2FpdCBkZXRlcm1pbmVDcmVhdGVSb29tRW5jcnlwdGlvbk9wdGlvbihjbGllbnQsIHRhcmdldHMpKSB7XG4gICAgICAgIGxvY2FsUm9vbS5lbmNyeXB0ZWQgPSB0cnVlO1xuICAgICAgICBldmVudHMucHVzaChcbiAgICAgICAgICAgIG5ldyBNYXRyaXhFdmVudCh7XG4gICAgICAgICAgICAgICAgZXZlbnRfaWQ6IGB+JHtsb2NhbFJvb20ucm9vbUlkfToke2NsaWVudC5tYWtlVHhuSWQoKX1gLFxuICAgICAgICAgICAgICAgIHR5cGU6IEV2ZW50VHlwZS5Sb29tRW5jcnlwdGlvbixcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIGFsZ29yaXRobTogTUVHT0xNX0FMR09SSVRITSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICBzZW5kZXI6IHVzZXJJZCxcbiAgICAgICAgICAgICAgICBzdGF0ZV9rZXk6IFwiXCIsXG4gICAgICAgICAgICAgICAgcm9vbV9pZDogbG9jYWxSb29tLnJvb21JZCxcbiAgICAgICAgICAgICAgICBvcmlnaW5fc2VydmVyX3RzOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZXZlbnRzLnB1c2gobmV3IE1hdHJpeEV2ZW50KHtcbiAgICAgICAgZXZlbnRfaWQ6IGB+JHtsb2NhbFJvb20ucm9vbUlkfToke2NsaWVudC5tYWtlVHhuSWQoKX1gLFxuICAgICAgICB0eXBlOiBFdmVudFR5cGUuUm9vbU1lbWJlcixcbiAgICAgICAgY29udGVudDoge1xuICAgICAgICAgICAgZGlzcGxheW5hbWU6IHVzZXJJZCxcbiAgICAgICAgICAgIG1lbWJlcnNoaXA6IFwiam9pblwiLFxuICAgICAgICB9LFxuICAgICAgICBzdGF0ZV9rZXk6IHVzZXJJZCxcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBzZW5kZXI6IHVzZXJJZCxcbiAgICAgICAgcm9vbV9pZDogbG9jYWxSb29tLnJvb21JZCxcbiAgICB9KSk7XG5cbiAgICB0YXJnZXRzLmZvckVhY2goKHRhcmdldDogTWVtYmVyKSA9PiB7XG4gICAgICAgIGV2ZW50cy5wdXNoKG5ldyBNYXRyaXhFdmVudCh7XG4gICAgICAgICAgICBldmVudF9pZDogYH4ke2xvY2FsUm9vbS5yb29tSWR9OiR7Y2xpZW50Lm1ha2VUeG5JZCgpfWAsXG4gICAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuUm9vbU1lbWJlcixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5bmFtZTogdGFyZ2V0Lm5hbWUsXG4gICAgICAgICAgICAgICAgYXZhdGFyX3VybDogdGFyZ2V0LmdldE14Y0F2YXRhclVybCgpLFxuICAgICAgICAgICAgICAgIG1lbWJlcnNoaXA6IFwiaW52aXRlXCIsXG4gICAgICAgICAgICAgICAgaXNEaXJlY3Q6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RhdGVfa2V5OiB0YXJnZXQudXNlcklkLFxuICAgICAgICAgICAgc2VuZGVyOiB1c2VySWQsXG4gICAgICAgICAgICByb29tX2lkOiBsb2NhbFJvb20ucm9vbUlkLFxuICAgICAgICB9KSk7XG4gICAgICAgIGV2ZW50cy5wdXNoKG5ldyBNYXRyaXhFdmVudCh7XG4gICAgICAgICAgICBldmVudF9pZDogYH4ke2xvY2FsUm9vbS5yb29tSWR9OiR7Y2xpZW50Lm1ha2VUeG5JZCgpfWAsXG4gICAgICAgICAgICB0eXBlOiBFdmVudFR5cGUuUm9vbU1lbWJlcixcbiAgICAgICAgICAgIGNvbnRlbnQ6IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5bmFtZTogdGFyZ2V0Lm5hbWUsXG4gICAgICAgICAgICAgICAgYXZhdGFyX3VybDogdGFyZ2V0LmdldE14Y0F2YXRhclVybCgpLFxuICAgICAgICAgICAgICAgIG1lbWJlcnNoaXA6IFwiam9pblwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXRlX2tleTogdGFyZ2V0LnVzZXJJZCxcbiAgICAgICAgICAgIHNlbmRlcjogdGFyZ2V0LnVzZXJJZCxcbiAgICAgICAgICAgIHJvb21faWQ6IGxvY2FsUm9vbS5yb29tSWQsXG4gICAgICAgIH0pKTtcbiAgICB9KTtcblxuICAgIGxvY2FsUm9vbS50YXJnZXRzID0gdGFyZ2V0cztcbiAgICBsb2NhbFJvb20udXBkYXRlTXlNZW1iZXJzaGlwKFwiam9pblwiKTtcbiAgICBsb2NhbFJvb20uYWRkTGl2ZUV2ZW50cyhldmVudHMpO1xuICAgIGxvY2FsUm9vbS5jdXJyZW50U3RhdGUuc2V0U3RhdGVFdmVudHMoZXZlbnRzKTtcbiAgICBsb2NhbFJvb20ubmFtZSA9IGxvY2FsUm9vbS5nZXREZWZhdWx0Um9vbU5hbWUoY2xpZW50LmdldFVzZXJJZCgpKTtcbiAgICBjbGllbnQuc3RvcmUuc3RvcmVSb29tKGxvY2FsUm9vbSk7XG5cbiAgICByZXR1cm4gbG9jYWxSb29tO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBZ0JBOztBQUNBOztBQUVBOztBQUNBOztBQXBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxlQUFlQSxpQkFBZixDQUNIQyxNQURHLEVBRUhDLE9BRkcsRUFHZTtFQUNsQixNQUFNQyxNQUFNLEdBQUdGLE1BQU0sQ0FBQ0csU0FBUCxFQUFmO0VBRUEsTUFBTUMsU0FBUyxHQUFHLElBQUlDLG9CQUFKLENBQWND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