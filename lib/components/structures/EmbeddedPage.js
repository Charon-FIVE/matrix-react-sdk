"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _browserRequest = _interopRequireDefault(require("browser-request"));

var _sanitizeHtml = _interopRequireDefault(require("sanitize-html"));

var _classnames = _interopRequireDefault(require("classnames"));

var _logger = require("matrix-js-sdk/src/logger");

var _languageHandler = require("../../languageHandler");

var _dispatcher = _interopRequireDefault(require("../../dispatcher/dispatcher"));

var _MatrixClientPeg = require("../../MatrixClientPeg");

var _MatrixClientContext = _interopRequireDefault(require("../../contexts/MatrixClientContext"));

var _AutoHideScrollbar = _interopRequireDefault(require("./AutoHideScrollbar"));

/*
Copyright 2016 OpenMarket Ltd
Copyright 2017 Vector Creations Ltd
Copyright 2019 New Vector Ltd

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class EmbeddedPage extends _react.default.PureComponent {
  constructor(props, context) {
    super(props, context);
    (0, _defineProperty2.default)(this, "unmounted", false);
    (0, _defineProperty2.default)(this, "dispatcherRef", null);
    (0, _defineProperty2.default)(this, "onAction", payload => {
      // HACK: Workaround for the context's MatrixClient not being set up at render time.
      if (payload.action === 'client_started') {
        this.forceUpdate();
      }
    });
    this.state = {
      page: ''
    };
  }

  translate(s) {
    return (0, _sanitizeHtml.default)((0, _languageHandler._t)(s));
  }

  componentDidMount() {
    this.unmounted = false;

    if (!this.props.url) {
      return;
    } // we use request() to inline the page into the react component
    // so that it can inherit CSS and theming easily rather than mess around
    // with iframes and trying to synchronise document.stylesheets.


    (0, _browserRequest.default)({
      method: "GET",
      url: this.props.url
    }, (err, response, body) => {
      if (this.unmounted) {
        return;
      }

      if (err || response.status < 200 || response.status >= 300) {
        _logger.logger.warn(`Error loading page: ${err}`);

        this.setState({
          page: (0, _languageHandler._t)("Couldn't load page")
        });
        return;
      }

      body = body.replace(/_t\(['"]([\s\S]*?)['"]\)/mg, (match, g1) => this.translate(g1));

      if (this.props.replaceMap) {
        Object.keys(this.props.replaceMap).forEach(key => {
          body = body.split(key).join(this.props.replaceMap[key]);
        });
      }

      this.setState({
        page: body
      });
    });
    this.dispatcherRef = _dispatcher.default.register(this.onAction);
  }

  componentWillUnmount() {
    this.unmounted = true;
    if (this.dispatcherRef !== null) _dispatcher.default.unregister(this.dispatcherRef);
  }

  render() {
    // HACK: Workaround for the context's MatrixClient not updating.
    const client = this.context || _MatrixClientPeg.MatrixClientPeg.get();

    const isGuest = client ? client.isGuest() : true;
    const className = this.props.className;
    const classes = (0, _classnames.default)({
      [className]: true,
      [`${className}_guest`]: isGuest,
      [`${className}_loggedIn`]: !!client
    });

    const content = /*#__PURE__*/_react.default.createElement("div", {
      className: `${className}_body`,
      dangerouslySetInnerHTML: {
        __html: this.state.page
      }
    });

    if (this.props.scrollbar) {
      return /*#__PURE__*/_react.default.createElement(_AutoHideScrollbar.default, {
        className: classes
      }, content);
    } else {
      return /*#__PURE__*/_react.default.createElement("div", {
        className: classes
      }, content);
    }
  }

}

exports.default = EmbeddedPage;
(0, _defineProperty2.default)(EmbeddedPage, "contextType", _MatrixClientContext.default);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbWJlZGRlZFBhZ2UiLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiY29udGV4dCIsInBheWxvYWQiLCJhY3Rpb24iLCJmb3JjZVVwZGF0ZSIsInN0YXRlIiwicGFnZSIsInRyYW5zbGF0ZSIsInMiLCJzYW5pdGl6ZUh0bWwiLCJfdCIsImNvbXBvbmVudERpZE1vdW50IiwidW5tb3VudGVkIiwidXJsIiwicmVxdWVzdCIsIm1ldGhvZCIsImVyciIsInJlc3BvbnNlIiwiYm9keSIsInN0YXR1cyIsImxvZ2dlciIsIndhcm4iLCJzZXRTdGF0ZSIsInJlcGxhY2UiLCJtYXRjaCIsImcxIiwicmVwbGFjZU1hcCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic3BsaXQiLCJqb2luIiwiZGlzcGF0Y2hlclJlZiIsImRpcyIsInJlZ2lzdGVyIiwib25BY3Rpb24iLCJjb21wb25lbnRXaWxsVW5tb3VudCIsInVucmVnaXN0ZXIiLCJyZW5kZXIiLCJjbGllbnQiLCJNYXRyaXhDbGllbnRQZWciLCJnZXQiLCJpc0d1ZXN0IiwiY2xhc3NOYW1lIiwiY2xhc3NlcyIsImNsYXNzbmFtZXMiLCJjb250ZW50IiwiX19odG1sIiwic2Nyb2xsYmFyIiwiTWF0cml4Q2xpZW50Q29udGV4dCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3N0cnVjdHVyZXMvRW1iZWRkZWRQYWdlLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMTYgT3Blbk1hcmtldCBMdGRcbkNvcHlyaWdodCAyMDE3IFZlY3RvciBDcmVhdGlvbnMgTHRkXG5Db3B5cmlnaHQgMjAxOSBOZXcgVmVjdG9yIEx0ZFxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgcmVxdWVzdCBmcm9tICdicm93c2VyLXJlcXVlc3QnO1xuaW1wb3J0IHNhbml0aXplSHRtbCBmcm9tICdzYW5pdGl6ZS1odG1sJztcbmltcG9ydCBjbGFzc25hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL2xvZ2dlclwiO1xuXG5pbXBvcnQgeyBfdCB9IGZyb20gJy4uLy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgZGlzIGZyb20gJy4uLy4uL2Rpc3BhdGNoZXIvZGlzcGF0Y2hlcic7XG5pbXBvcnQgeyBNYXRyaXhDbGllbnRQZWcgfSBmcm9tICcuLi8uLi9NYXRyaXhDbGllbnRQZWcnO1xuaW1wb3J0IE1hdHJpeENsaWVudENvbnRleHQgZnJvbSBcIi4uLy4uL2NvbnRleHRzL01hdHJpeENsaWVudENvbnRleHRcIjtcbmltcG9ydCBBdXRvSGlkZVNjcm9sbGJhciBmcm9tIFwiLi9BdXRvSGlkZVNjcm9sbGJhclwiO1xuaW1wb3J0IHsgQWN0aW9uUGF5bG9hZCB9IGZyb20gXCIuLi8uLi9kaXNwYXRjaGVyL3BheWxvYWRzXCI7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIC8vIFVSTCB0byByZXF1ZXN0IGVtYmVkZGVkIHBhZ2UgY29udGVudCBmcm9tXG4gICAgdXJsPzogc3RyaW5nO1xuICAgIC8vIENsYXNzIG5hbWUgcHJlZml4IHRvIGFwcGx5IGZvciBhIGdpdmVuIGluc3RhbmNlXG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgIC8vIFdoZXRoZXIgdG8gd3JhcCB0aGUgcGFnZSBpbiBhIHNjcm9sbGJhclxuICAgIHNjcm9sbGJhcj86IGJvb2xlYW47XG4gICAgLy8gTWFwIG9mIGtleXMgdG8gcmVwbGFjZSB3aXRoIHZhbHVlcywgZS5nIHskcGxhY2Vob2xkZXI6IFwidmFsdWVcIn1cbiAgICByZXBsYWNlTWFwPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn1cblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgcGFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFbWJlZGRlZFBhZ2UgZXh0ZW5kcyBSZWFjdC5QdXJlQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gICAgcHVibGljIHN0YXRpYyBjb250ZXh0VHlwZSA9IE1hdHJpeENsaWVudENvbnRleHQ7XG4gICAgcHJpdmF0ZSB1bm1vdW50ZWQgPSBmYWxzZTtcbiAgICBwcml2YXRlIGRpc3BhdGNoZXJSZWY6IHN0cmluZyA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzLCBjb250ZXh0OiB0eXBlb2YgTWF0cml4Q2xpZW50Q29udGV4dCkge1xuICAgICAgICBzdXBlcihwcm9wcywgY29udGV4dCk7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHBhZ2U6ICcnLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgdHJhbnNsYXRlKHM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBzYW5pdGl6ZUh0bWwoX3QocykpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnREaWRNb3VudCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51bm1vdW50ZWQgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIXRoaXMucHJvcHMudXJsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3ZSB1c2UgcmVxdWVzdCgpIHRvIGlubGluZSB0aGUgcGFnZSBpbnRvIHRoZSByZWFjdCBjb21wb25lbnRcbiAgICAgICAgLy8gc28gdGhhdCBpdCBjYW4gaW5oZXJpdCBDU1MgYW5kIHRoZW1pbmcgZWFzaWx5IHJhdGhlciB0aGFuIG1lc3MgYXJvdW5kXG4gICAgICAgIC8vIHdpdGggaWZyYW1lcyBhbmQgdHJ5aW5nIHRvIHN5bmNocm9uaXNlIGRvY3VtZW50LnN0eWxlc2hlZXRzLlxuXG4gICAgICAgIHJlcXVlc3QoXG4gICAgICAgICAgICB7IG1ldGhvZDogXCJHRVRcIiwgdXJsOiB0aGlzLnByb3BzLnVybCB9LFxuICAgICAgICAgICAgKGVyciwgcmVzcG9uc2UsIGJvZHkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51bm1vdW50ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgcmVzcG9uc2Uuc3RhdHVzIDwgMjAwIHx8IHJlc3BvbnNlLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLndhcm4oYEVycm9yIGxvYWRpbmcgcGFnZTogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoeyBwYWdlOiBfdChcIkNvdWxkbid0IGxvYWQgcGFnZVwiKSB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvZHkgPSBib2R5LnJlcGxhY2UoL190XFwoWydcIl0oW1xcc1xcU10qPylbJ1wiXVxcKS9tZywgKG1hdGNoLCBnMSkgPT4gdGhpcy50cmFuc2xhdGUoZzEpKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLnJlcGxhY2VNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5wcm9wcy5yZXBsYWNlTWFwKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5ID0gYm9keS5zcGxpdChrZXkpLmpvaW4odGhpcy5wcm9wcy5yZXBsYWNlTWFwW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHsgcGFnZTogYm9keSB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5kaXNwYXRjaGVyUmVmID0gZGlzLnJlZ2lzdGVyKHRoaXMub25BY3Rpb24pO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy51bm1vdW50ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5kaXNwYXRjaGVyUmVmICE9PSBudWxsKSBkaXMudW5yZWdpc3Rlcih0aGlzLmRpc3BhdGNoZXJSZWYpO1xuICAgIH1cblxuICAgIHByaXZhdGUgb25BY3Rpb24gPSAocGF5bG9hZDogQWN0aW9uUGF5bG9hZCk6IHZvaWQgPT4ge1xuICAgICAgICAvLyBIQUNLOiBXb3JrYXJvdW5kIGZvciB0aGUgY29udGV4dCdzIE1hdHJpeENsaWVudCBub3QgYmVpbmcgc2V0IHVwIGF0IHJlbmRlciB0aW1lLlxuICAgICAgICBpZiAocGF5bG9hZC5hY3Rpb24gPT09ICdjbGllbnRfc3RhcnRlZCcpIHtcbiAgICAgICAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IEpTWC5FbGVtZW50IHtcbiAgICAgICAgLy8gSEFDSzogV29ya2Fyb3VuZCBmb3IgdGhlIGNvbnRleHQncyBNYXRyaXhDbGllbnQgbm90IHVwZGF0aW5nLlxuICAgICAgICBjb25zdCBjbGllbnQgPSB0aGlzLmNvbnRleHQgfHwgTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICBjb25zdCBpc0d1ZXN0ID0gY2xpZW50ID8gY2xpZW50LmlzR3Vlc3QoKSA6IHRydWU7XG4gICAgICAgIGNvbnN0IGNsYXNzTmFtZSA9IHRoaXMucHJvcHMuY2xhc3NOYW1lO1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gY2xhc3NuYW1lcyh7XG4gICAgICAgICAgICBbY2xhc3NOYW1lXTogdHJ1ZSxcbiAgICAgICAgICAgIFtgJHtjbGFzc05hbWV9X2d1ZXN0YF06IGlzR3Vlc3QsXG4gICAgICAgICAgICBbYCR7Y2xhc3NOYW1lfV9sb2dnZWRJbmBdOiAhIWNsaWVudCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IDxkaXYgY2xhc3NOYW1lPXtgJHtjbGFzc05hbWV9X2JvZHlgfVxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw9e3sgX19odG1sOiB0aGlzLnN0YXRlLnBhZ2UgfX1cbiAgICAgICAgLz47XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuc2Nyb2xsYmFyKSB7XG4gICAgICAgICAgICByZXR1cm4gPEF1dG9IaWRlU2Nyb2xsYmFyIGNsYXNzTmFtZT17Y2xhc3Nlc30+XG4gICAgICAgICAgICAgICAgeyBjb250ZW50IH1cbiAgICAgICAgICAgIDwvQXV0b0hpZGVTY3JvbGxiYXI+O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzfT5cbiAgICAgICAgICAgICAgICB7IGNvbnRlbnQgfVxuICAgICAgICAg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