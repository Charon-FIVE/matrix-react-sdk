"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.ExistingSpellCheckLanguage = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _SpellCheckLanguagesDropdown = _interopRequireDefault(require("../../../components/views/elements/SpellCheckLanguagesDropdown"));

var _AccessibleButton = _interopRequireDefault(require("../../../components/views/elements/AccessibleButton"));

var _languageHandler = require("../../../languageHandler");

/*
Copyright 2021 Å imon Brandner <simon.bra.ag@gmail.com>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class ExistingSpellCheckLanguage extends _react.default.Component {
  constructor() {
    super(...arguments);
    (0, _defineProperty2.default)(this, "onRemove", e => {
      e.stopPropagation();
      e.preventDefault();
      return this.props.onRemoved(this.props.language);
    });
  }

  render() {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ExistingSpellCheckLanguage"
    }, /*#__PURE__*/_react.default.createElement("span", {
      className: "mx_ExistingSpellCheckLanguage_language"
    }, this.props.language), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: this.onRemove,
      kind: "danger_sm"
    }, (0, _languageHandler._t)("Remove")));
  }

}

exports.ExistingSpellCheckLanguage = ExistingSpellCheckLanguage;

class SpellCheckLanguages extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onRemoved", language => {
      const languages = this.props.languages.filter(e => e !== language);
      this.props.onLanguagesChange(languages);
    });
    (0, _defineProperty2.default)(this, "onAddClick", e => {
      e.stopPropagation();
      e.preventDefault();
      const language = this.state.newLanguage;
      this.setState({
        newLanguage: ""
      });
      if (!language) return;
      if (this.props.languages.includes(language)) return;
      this.props.languages.push(language);
      this.props.onLanguagesChange(this.props.languages);
    });
    (0, _defineProperty2.default)(this, "onNewLanguageChange", language => {
      if (this.state.newLanguage === language) return;
      this.setState({
        newLanguage: language
      });
    });
    this.state = {
      newLanguage: ""
    };
  }

  render() {
    const existingSpellCheckLanguages = this.props.languages.map(e => {
      return /*#__PURE__*/_react.default.createElement(ExistingSpellCheckLanguage, {
        language: e,
        onRemoved: this.onRemoved,
        key: e
      });
    });

    const addButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
      onClick: this.onAddClick,
      kind: "primary"
    }, (0, _languageHandler._t)("Add"));

    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_SpellCheckLanguages"
    }, existingSpellCheckLanguages, /*#__PURE__*/_react.default.createElement("form", {
      onSubmit: this.onAddClick,
      noValidate: true
    }, /*#__PURE__*/_react.default.createElement(_SpellCheckLanguagesDropdown.default, {
      className: "mx_GeneralUserSettingsTab_spellCheckLanguageInput",
      value: this.state.newLanguage,
      onOptionChange: this.onNewLanguageChange
    }), addButton));
  }

}

exports.default = SpellCheckLanguages;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeGlzdGluZ1NwZWxsQ2hlY2tMYW5ndWFnZSIsIlJlYWN0IiwiQ29tcG9uZW50IiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwicHJvcHMiLCJvblJlbW92ZWQiLCJsYW5ndWFnZSIsInJlbmRlciIsIm9uUmVtb3ZlIiwiX3QiLCJTcGVsbENoZWNrTGFuZ3VhZ2VzIiwiY29uc3RydWN0b3IiLCJsYW5ndWFnZXMiLCJmaWx0ZXIiLCJvbkxhbmd1YWdlc0NoYW5nZSIsInN0YXRlIiwibmV3TGFuZ3VhZ2UiLCJzZXRTdGF0ZSIsImluY2x1ZGVzIiwicHVzaCIsImV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlcyIsIm1hcCIsImFkZEJ1dHRvbiIsIm9uQWRkQ2xpY2siLCJvbk5ld0xhbmd1YWdlQ2hhbmdlIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvdmlld3Mvc2V0dGluZ3MvU3BlbGxDaGVja1NldHRpbmdzLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjEgxaBpbW9uIEJyYW5kbmVyIDxzaW1vbi5icmEuYWdAZ21haWwuY29tPlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCBTcGVsbENoZWNrTGFuZ3VhZ2VzRHJvcGRvd24gZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHMvdmlld3MvZWxlbWVudHMvU3BlbGxDaGVja0xhbmd1YWdlc0Ryb3Bkb3duXCI7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50cy92aWV3cy9lbGVtZW50cy9BY2Nlc3NpYmxlQnV0dG9uXCI7XG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcblxuaW50ZXJmYWNlIEV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlSVByb3BzIHtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICAgIG9uUmVtb3ZlZChsYW5ndWFnZTogc3RyaW5nKTtcbn1cblxuaW50ZXJmYWNlIFNwZWxsQ2hlY2tMYW5ndWFnZXNJUHJvcHMge1xuICAgIGxhbmd1YWdlczogQXJyYXk8c3RyaW5nPjtcbiAgICBvbkxhbmd1YWdlc0NoYW5nZShsYW5ndWFnZXM6IEFycmF5PHN0cmluZz4pO1xufVxuXG5pbnRlcmZhY2UgU3BlbGxDaGVja0xhbmd1YWdlc0lTdGF0ZSB7XG4gICAgbmV3TGFuZ3VhZ2U6IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIEV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PEV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlSVByb3BzPiB7XG4gICAgcHJpdmF0ZSBvblJlbW92ZSA9IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5wcm9wcy5vblJlbW92ZWQodGhpcy5wcm9wcy5sYW5ndWFnZSk7XG4gICAgfTtcblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXhfRXhpc3RpbmdTcGVsbENoZWNrTGFuZ3VhZ2VcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9FeGlzdGluZ1NwZWxsQ2hlY2tMYW5ndWFnZV9sYW5ndWFnZVwiPnsgdGhpcy5wcm9wcy5sYW5ndWFnZSB9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uIG9uQ2xpY2s9e3RoaXMub25SZW1vdmV9IGtpbmQ9XCJkYW5nZXJfc21cIj5cbiAgICAgICAgICAgICAgICAgICAgeyBfdChcIlJlbW92ZVwiKSB9XG4gICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTcGVsbENoZWNrTGFuZ3VhZ2VzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFNwZWxsQ2hlY2tMYW5ndWFnZXNJUHJvcHMsIFNwZWxsQ2hlY2tMYW5ndWFnZXNJU3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBuZXdMYW5ndWFnZTogXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uUmVtb3ZlZCA9IChsYW5ndWFnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGxhbmd1YWdlcyA9IHRoaXMucHJvcHMubGFuZ3VhZ2VzLmZpbHRlcigoZSkgPT4gZSAhPT0gbGFuZ3VhZ2UpO1xuICAgICAgICB0aGlzLnByb3BzLm9uTGFuZ3VhZ2VzQ2hhbmdlKGxhbmd1YWdlcyk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25BZGRDbGljayA9IChlKSA9PiB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCBsYW5ndWFnZSA9IHRoaXMuc3RhdGUubmV3TGFuZ3VhZ2U7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBuZXdMYW5ndWFnZTogXCJcIiB9KTtcblxuICAgICAgICBpZiAoIWxhbmd1YWdlKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmxhbmd1YWdlcy5pbmNsdWRlcyhsYW5ndWFnZSkpIHJldHVybjtcblxuICAgICAgICB0aGlzLnByb3BzLmxhbmd1YWdlcy5wdXNoKGxhbmd1YWdlKTtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkxhbmd1YWdlc0NoYW5nZSh0aGlzLnByb3BzLmxhbmd1YWdlcyk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25OZXdMYW5ndWFnZUNoYW5nZSA9IChsYW5ndWFnZTogc3RyaW5nKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLm5ld0xhbmd1YWdlID09PSBsYW5ndWFnZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgbmV3TGFuZ3VhZ2U6IGxhbmd1YWdlIH0pO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlcyA9IHRoaXMucHJvcHMubGFuZ3VhZ2VzLm1hcCgoZSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxFeGlzdGluZ1NwZWxsQ2hlY2tMYW5ndWFnZSBsYW5ndWFnZT17ZX0gb25SZW1vdmVkPXt0aGlzLm9uUmVtb3ZlZH0ga2V5PXtlfSAvPjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWRkQnV0dG9uID0gKFxuICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24gb25DbGljaz17dGhpcy5vbkFkZENsaWNrfSBraW5kPVwicHJpbWFyeVwiPlxuICAgICAgICAgICAgICAgIHsgX3QoXCJBZGRcIikgfVxuICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1NwZWxsQ2hlY2tMYW5ndWFnZXNcIj5cbiAgICAgICAgICAgICAgICB7IGV4aXN0aW5nU3BlbGxDaGVja0xhbmd1YWdlcyB9XG4gICAgICAgICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e3RoaXMub25BZGRDbGlja30gbm9WYWxpZGF0ZT17dHJ1ZX0+XG4gICAgICAgICAgICAgICAgICAgIDxTcGVsbENoZWNrTGFuZ3VhZ2VzRHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0dlbmVyYWxVc2VyU2V0dGluZ3NUYWJfc3BlbGxDaGVja0xhbmd1YWdlSW5wdXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUubmV3TGFuZ3VhZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9wdGlvbkNoYW5nZT17dGhpcy5vbk5ld0xhbmd1YWdlQ2hhbmdlfSAvPlxuICAgICAgICAgICAgICAgICAgICB7IGFkZEJ1dHRvbiB9XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWdCQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFwQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBc0JPLE1BQU1BLDBCQUFOLFNBQXlDQyxjQUFBLENBQU1DLFNBQS9DLENBQTJGO0VBQUE7SUFBQTtJQUFBLGdEQUMxRUMsQ0FBRCxJQUFPO01BQ3RCQSxDQUFDLENBQUNDLGVBQUY7TUFDQUQsQ0FBQyxDQUFDRSxjQUFGO01BRUEsT0FBTyxLQUFLQyxLQUFMLENBQVdDLFNBQVgsQ0FBcUIsS0FBS0QsS0FBTCxDQUFXRSxRQUFoQyxDQUFQO0lBQ0gsQ0FONkY7RUFBQTs7RUFROUZDLE1BQU0sR0FBRztJQUNMLG9CQUNJO01BQUssU0FBUyxFQUFDO0lBQWYsZ0JBQ0k7TUFBTSxTQUFTLEVBQUM7SUFBaEIsR0FBMkQsS0FBS0gsS0FBTCxDQUFXRSxRQUF0RSxDQURKLGVBRUksNkJBQUMseUJBQUQ7TUFBa0IsT0FBTyxFQUFFLEtBQUtFLFFBQWhDO01BQTBDLElBQUksRUFBQztJQUEvQyxHQUNNLElBQUFDLG1CQUFBLEVBQUcsUUFBSCxDQUROLENBRkosQ0FESjtFQVFIOztBQWpCNkY7Ozs7QUFvQm5GLE1BQU1DLG1CQUFOLFNBQWtDWCxjQUFBLENBQU1DLFNBQXhDLENBQXdHO0VBQ25IVyxXQUFXLENBQUNQLEtBQUQsRUFBUTtJQUNmLE1BQU1BLEtBQU47SUFEZSxpREFPRUUsUUFBRCxJQUFzQjtNQUN0QyxNQUFNTSxTQUFTLEdBQUcsS0FBS1IsS0FBTCxDQUFXUSxTQUFYLENBQXFCQyxNQUFyQixDQUE2QlosQ0FBRCxJQUFPQSxDQUFDLEtBQUtLLFFBQXpDLENBQWxCO01BQ0EsS0FBS0YsS0FBTCxDQUFXVSxpQkFBWCxDQUE2QkYsU0FBN0I7SUFDSCxDQVZrQjtJQUFBLGtEQVlHWCxDQUFELElBQU87TUFDeEJBLENBQUMsQ0FBQ0MsZUFBRjtNQUNBRCxDQUFDLENBQUNFLGNBQUY7TUFFQSxNQUFNRyxRQUFRLEdBQUcsS0FBS1MsS0FBTCxDQUFXQyxXQUE1QjtNQUNBLEtBQUtDLFFBQUwsQ0FBYztRQUFFRCxXQUFXLEVBQUU7TUFBZixDQUFkO01BRUEsSUFBSSxDQUFDVixRQUFMLEVBQWU7TUFDZixJQUFJLEtBQUtGLEtBQUwsQ0FBV1EsU0FBWCxDQUFxQk0sUUFBckIsQ0FBOEJaLFFBQTlCLENBQUosRUFBNkM7TUFFN0MsS0FBS0YsS0FBTCxDQUFXUSxTQUFYLENBQXFCTyxJQUFyQixDQUEwQmIsUUFBMUI7TUFDQSxLQUFLRixLQUFMLENBQVdVLGlCQUFYLENBQTZCLEtBQUtWLEtBQUwsQ0FBV1EsU0FBeEM7SUFDSCxDQXhCa0I7SUFBQSwyREEwQllOLFFBQUQsSUFBc0I7TUFDaEQsSUFBSSxLQUFLUyxLQUFMLENBQVdDLFdBQVgsS0FBMkJWLFFBQS9CLEVBQXlDO01BQ3pDLEtBQUtXLFFBQUwsQ0FBYztRQUFFRCxXQUFXLEVBQUVWO01BQWYsQ0FBZDtJQUNILENBN0JrQjtJQUVmLEtBQUtTLEtBQUwsR0FBYTtNQUNUQyxXQUFXLEVBQUU7SUFESixDQUFiO0VBR0g7O0VBMEJEVCxNQUFNLEdBQUc7SUFDTCxNQUFNYSwyQkFBMkIsR0FBRyxLQUFLaEIsS0FBTCxDQUFXUSxTQUFYLENBQXFCUyxHQUFyQixDQUEwQnBCLENBQUQsSUFBTztNQUNoRSxvQkFBTyw2QkFBQywwQkFBRDtRQUE0QixRQUFRLEVBQUVBLENBQXRDO1FBQXlDLFNBQVMsRUFBRSxLQUFLSSxTQUF6RDtRQUFvRSxHQUFHLEVBQUVKO01BQXpFLEVBQVA7SUFDSCxDQUZtQyxDQUFwQzs7SUFJQSxNQUFNcUIsU0FBUyxnQkFDWCw2QkFBQyx5QkFBRDtNQUFrQixPQUFPLEVBQUUsS0FBS0MsVUFBaEM7TUFBNEMsSUFBSSxFQUFDO0lBQWpELEdBQ00sSUFBQWQsbUJBQUEsRUFBRyxLQUFILENBRE4sQ0FESjs7SUFNQSxvQkFDSTtNQUFLLFNBQVMsRUFBQztJQUFmLEdBQ01XLDJCQUROLGVBRUk7TUFBTSxRQUFRLEVBQUUsS0FBS0csVUFBckI7TUFBaUMsVUFBVSxFQUFFO0lBQTdDLGdCQUNJLDZCQUFDLG9DQUFEO01BQ0ksU0FBUyxFQUFDLG1EQURkO01BRUksS0FBSyxFQUFFLEtBQUtSLEtBQUwsQ0FBV0MsV0FGdEI7TUFHSSxjQUFjLEVBQUUsS0FBS1E7SUFIekIsRUFESixFQUtNRixTQUxOLENBRkosQ0FESjtFQVlIOztBQXZEa0gifQ==