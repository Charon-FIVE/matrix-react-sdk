"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _classnames = _interopRequireDefault(require("classnames"));

var _RovingTabIndex = require("../../../accessibility/RovingTabIndex");

var _NotificationBadge = _interopRequireDefault(require("./NotificationBadge"));

/*
Copyright 2020, 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class ExtraTile extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onTileMouseEnter", () => {
      this.setState({
        hover: true
      });
    });
    (0, _defineProperty2.default)(this, "onTileMouseLeave", () => {
      this.setState({
        hover: false
      });
    });
    this.state = {
      hover: false
    };
  }

  render() {
    // XXX: We copy classes because it's easier
    const classes = (0, _classnames.default)({
      'mx_ExtraTile': true,
      'mx_RoomTile': true,
      'mx_RoomTile_selected': this.props.isSelected,
      'mx_RoomTile_minimized': this.props.isMinimized
    });
    let badge;

    if (this.props.notificationState) {
      badge = /*#__PURE__*/_react.default.createElement(_NotificationBadge.default, {
        notification: this.props.notificationState,
        forceCount: false
      });
    }

    let name = this.props.displayName;
    if (typeof name !== 'string') name = '';
    name = name.replace(":", ":\u200b"); // add a zero-width space to allow linewrapping after the colon

    const nameClasses = (0, _classnames.default)({
      "mx_RoomTile_title": true,
      "mx_RoomTile_titleHasUnreadEvents": this.props.notificationState?.isUnread
    });

    let nameContainer = /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_titleContainer"
    }, /*#__PURE__*/_react.default.createElement("div", {
      title: name,
      className: nameClasses,
      tabIndex: -1,
      dir: "auto"
    }, name));

    if (this.props.isMinimized) nameContainer = null;
    let Button = _RovingTabIndex.RovingAccessibleButton;

    if (this.props.isMinimized) {
      Button = _RovingTabIndex.RovingAccessibleTooltipButton;
    }

    return /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement(Button, {
      className: classes,
      onMouseEnter: this.onTileMouseEnter,
      onMouseLeave: this.onTileMouseLeave,
      onClick: this.props.onClick,
      role: "treeitem",
      title: this.props.isMinimized ? name : undefined
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_avatarContainer"
    }, this.props.avatar), /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_details"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_primaryDetails"
    }, nameContainer, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_RoomTile_badgeContainer"
    }, badge)))));
  }

}

exports.default = ExtraTile;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFeHRyYVRpbGUiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJzZXRTdGF0ZSIsImhvdmVyIiwic3RhdGUiLCJyZW5kZXIiLCJjbGFzc2VzIiwiY2xhc3NOYW1lcyIsImlzU2VsZWN0ZWQiLCJpc01pbmltaXplZCIsImJhZGdlIiwibm90aWZpY2F0aW9uU3RhdGUiLCJuYW1lIiwiZGlzcGxheU5hbWUiLCJyZXBsYWNlIiwibmFtZUNsYXNzZXMiLCJpc1VucmVhZCIsIm5hbWVDb250YWluZXIiLCJCdXR0b24iLCJSb3ZpbmdBY2Nlc3NpYmxlQnV0dG9uIiwiUm92aW5nQWNjZXNzaWJsZVRvb2x0aXBCdXR0b24iLCJvblRpbGVNb3VzZUVudGVyIiwib25UaWxlTW91c2VMZWF2ZSIsIm9uQ2xpY2siLCJ1bmRlZmluZWQiLCJhdmF0YXIiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy92aWV3cy9yb29tcy9FeHRyYVRpbGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMCwgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5cbmltcG9ydCB7XG4gICAgUm92aW5nQWNjZXNzaWJsZUJ1dHRvbixcbiAgICBSb3ZpbmdBY2Nlc3NpYmxlVG9vbHRpcEJ1dHRvbixcbn0gZnJvbSBcIi4uLy4uLy4uL2FjY2Vzc2liaWxpdHkvUm92aW5nVGFiSW5kZXhcIjtcbmltcG9ydCBOb3RpZmljYXRpb25CYWRnZSBmcm9tIFwiLi9Ob3RpZmljYXRpb25CYWRnZVwiO1xuaW1wb3J0IHsgTm90aWZpY2F0aW9uU3RhdGUgfSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL25vdGlmaWNhdGlvbnMvTm90aWZpY2F0aW9uU3RhdGVcIjtcbmltcG9ydCB7IEJ1dHRvbkV2ZW50IH0gZnJvbSBcIi4uL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b25cIjtcblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gICAgaXNNaW5pbWl6ZWQ6IGJvb2xlYW47XG4gICAgaXNTZWxlY3RlZDogYm9vbGVhbjtcbiAgICBkaXNwbGF5TmFtZTogc3RyaW5nO1xuICAgIGF2YXRhcjogUmVhY3QuUmVhY3RFbGVtZW50O1xuICAgIG5vdGlmaWNhdGlvblN0YXRlPzogTm90aWZpY2F0aW9uU3RhdGU7XG4gICAgb25DbGljazogKGV2OiBCdXR0b25FdmVudCkgPT4gdm9pZDtcbn1cblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgaG92ZXI6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV4dHJhVGlsZSBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBob3ZlcjogZmFsc2UsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblRpbGVNb3VzZUVudGVyID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHsgaG92ZXI6IHRydWUgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25UaWxlTW91c2VMZWF2ZSA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGhvdmVyOiBmYWxzZSB9KTtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlbmRlcigpOiBSZWFjdC5SZWFjdEVsZW1lbnQge1xuICAgICAgICAvLyBYWFg6IFdlIGNvcHkgY2xhc3NlcyBiZWNhdXNlIGl0J3MgZWFzaWVyXG4gICAgICAgIGNvbnN0IGNsYXNzZXMgPSBjbGFzc05hbWVzKHtcbiAgICAgICAgICAgICdteF9FeHRyYVRpbGUnOiB0cnVlLFxuICAgICAgICAgICAgJ214X1Jvb21UaWxlJzogdHJ1ZSxcbiAgICAgICAgICAgICdteF9Sb29tVGlsZV9zZWxlY3RlZCc6IHRoaXMucHJvcHMuaXNTZWxlY3RlZCxcbiAgICAgICAgICAgICdteF9Sb29tVGlsZV9taW5pbWl6ZWQnOiB0aGlzLnByb3BzLmlzTWluaW1pemVkLFxuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgYmFkZ2U7XG4gICAgICAgIGlmICh0aGlzLnByb3BzLm5vdGlmaWNhdGlvblN0YXRlKSB7XG4gICAgICAgICAgICBiYWRnZSA9IChcbiAgICAgICAgICAgICAgICA8Tm90aWZpY2F0aW9uQmFkZ2VcbiAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uPXt0aGlzLnByb3BzLm5vdGlmaWNhdGlvblN0YXRlfVxuICAgICAgICAgICAgICAgICAgICBmb3JjZUNvdW50PXtmYWxzZX1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBuYW1lID0gdGhpcy5wcm9wcy5kaXNwbGF5TmFtZTtcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgbmFtZSA9ICcnO1xuICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKFwiOlwiLCBcIjpcXHUyMDBiXCIpOyAvLyBhZGQgYSB6ZXJvLXdpZHRoIHNwYWNlIHRvIGFsbG93IGxpbmV3cmFwcGluZyBhZnRlciB0aGUgY29sb25cblxuICAgICAgICBjb25zdCBuYW1lQ2xhc3NlcyA9IGNsYXNzTmFtZXMoe1xuICAgICAgICAgICAgXCJteF9Sb29tVGlsZV90aXRsZVwiOiB0cnVlLFxuICAgICAgICAgICAgXCJteF9Sb29tVGlsZV90aXRsZUhhc1VucmVhZEV2ZW50c1wiOiB0aGlzLnByb3BzLm5vdGlmaWNhdGlvblN0YXRlPy5pc1VucmVhZCxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IG5hbWVDb250YWluZXIgPSAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1Jvb21UaWxlX3RpdGxlQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiB0aXRsZT17bmFtZX0gY2xhc3NOYW1lPXtuYW1lQ2xhc3Nlc30gdGFiSW5kZXg9ey0xfSBkaXI9XCJhdXRvXCI+XG4gICAgICAgICAgICAgICAgICAgIHsgbmFtZSB9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaXNNaW5pbWl6ZWQpIG5hbWVDb250YWluZXIgPSBudWxsO1xuXG4gICAgICAgIGxldCBCdXR0b24gPSBSb3ZpbmdBY2Nlc3NpYmxlQnV0dG9uO1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5pc01pbmltaXplZCkge1xuICAgICAgICAgICAgQnV0dG9uID0gUm92aW5nQWNjZXNzaWJsZVRvb2x0aXBCdXR0b247XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtjbGFzc2VzfVxuICAgICAgICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI9e3RoaXMub25UaWxlTW91c2VFbnRlcn1cbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlPXt0aGlzLm9uVGlsZU1vdXNlTGVhdmV9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMucHJvcHMub25DbGlja31cbiAgICAgICAgICAgICAgICAgICAgcm9sZT1cInRyZWVpdGVtXCJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU9e3RoaXMucHJvcHMuaXNNaW5pbWl6ZWQgPyBuYW1lIDogdW5kZWZpbmVkfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Sb29tVGlsZV9hdmF0YXJDb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy5hdmF0YXIgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9Sb29tVGlsZV9kZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1Jvb21UaWxlX3ByaW1hcnlEZXRhaWxzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBuYW1lQ29udGFpbmVyIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14X1Jvb21UaWxlX2JhZGdlQ29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgYmFkZ2UgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUNBOztBQUVBOztBQUlBOztBQXZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUEwQmUsTUFBTUEsU0FBTixTQUF3QkMsY0FBQSxDQUFNQyxTQUE5QixDQUF3RDtFQUNuRUMsV0FBVyxDQUFDQyxLQUFELEVBQWdCO0lBQ3ZCLE1BQU1BLEtBQU47SUFEdUIsd0RBUUEsTUFBTTtNQUM3QixLQUFLQyxRQUFMLENBQWM7UUFBRUMsS0FBSyxFQUFFO01BQVQsQ0FBZDtJQUNILENBVjBCO0lBQUEsd0RBWUEsTUFBTTtNQUM3QixLQUFLRCxRQUFMLENBQWM7UUFBRUMsS0FBSyxFQUFFO01BQVQsQ0FBZDtJQUNILENBZDBCO0lBR3ZCLEtBQUtDLEtBQUwsR0FBYTtNQUNURCxLQUFLLEVBQUU7SUFERSxDQUFiO0VBR0g7O0VBVU1FLE1BQU0sR0FBdUI7SUFDaEM7SUFDQSxNQUFNQyxPQUFPLEdBQUcsSUFBQUMsbUJBQUEsRUFBVztNQUN2QixnQkFBZ0IsSUFETztNQUV2QixlQUFlLElBRlE7TUFHdkIsd0JBQXdCLEtBQUtOLEtBQUwsQ0FBV08sVUFIWjtNQUl2Qix5QkFBeUIsS0FBS1AsS0FBTCxDQUFXUTtJQUpiLENBQVgsQ0FBaEI7SUFPQSxJQUFJQyxLQUFKOztJQUNBLElBQUksS0FBS1QsS0FBTCxDQUFXVSxpQkFBZixFQUFrQztNQUM5QkQsS0FBSyxnQkFDRCw2QkFBQywwQkFBRDtRQUNJLFlBQVksRUFBRSxLQUFLVCxLQUFMLENBQVdVLGlCQUQ3QjtRQUVJLFVBQVUsRUFBRTtNQUZoQixFQURKO0lBTUg7O0lBRUQsSUFBSUMsSUFBSSxHQUFHLEtBQUtYLEtBQUwsQ0FBV1ksV0FBdEI7SUFDQSxJQUFJLE9BQU9ELElBQVAsS0FBZ0IsUUFBcEIsRUFBOEJBLElBQUksR0FBRyxFQUFQO0lBQzlCQSxJQUFJLEdBQUdBLElBQUksQ0FBQ0UsT0FBTCxDQUFhLEdBQWIsRUFBa0IsU0FBbEIsQ0FBUCxDQXJCZ0MsQ0FxQks7O0lBRXJDLE1BQU1DLFdBQVcsR0FBRyxJQUFBUixtQkFBQSxFQUFXO01BQzNCLHFCQUFxQixJQURNO01BRTNCLG9DQUFvQyxLQUFLTixLQUFMLENBQVdVLGlCQUFYLEVBQThCSztJQUZ2QyxDQUFYLENBQXBCOztJQUtBLElBQUlDLGFBQWEsZ0JBQ2I7TUFBSyxTQUFTLEVBQUM7SUFBZixnQkFDSTtNQUFLLEtBQUssRUFBRUwsSUFBWjtNQUFrQixTQUFTLEVBQUVHLFdBQTdCO01BQTBDLFFBQVEsRUFBRSxDQUFDLENBQXJEO01BQXdELEdBQUcsRUFBQztJQUE1RCxHQUNNSCxJQUROLENBREosQ0FESjs7SUFPQSxJQUFJLEtBQUtYLEtBQUwsQ0FBV1EsV0FBZixFQUE0QlEsYUFBYSxHQUFHLElBQWhCO0lBRTVCLElBQUlDLE1BQU0sR0FBR0Msc0NBQWI7O0lBQ0EsSUFBSSxLQUFLbEIsS0FBTCxDQUFXUSxXQUFmLEVBQTRCO01BQ3hCUyxNQUFNLEdBQUdFLDZDQUFUO0lBQ0g7O0lBRUQsb0JBQ0ksNkJBQUMsY0FBRCxDQUFPLFFBQVAscUJBQ0ksNkJBQUMsTUFBRDtNQUNJLFNBQVMsRUFBRWQsT0FEZjtNQUVJLFlBQVksRUFBRSxLQUFLZSxnQkFGdkI7TUFHSSxZQUFZLEVBQUUsS0FBS0MsZ0JBSHZCO01BSUksT0FBTyxFQUFFLEtBQUtyQixLQUFMLENBQVdzQixPQUp4QjtNQUtJLElBQUksRUFBQyxVQUxUO01BTUksS0FBSyxFQUFFLEtBQUt0QixLQUFMLENBQVdRLFdBQVgsR0FBeUJHLElBQXpCLEdBQWdDWTtJQU4zQyxnQkFRSTtNQUFLLFNBQVMsRUFBQztJQUFmLEdBQ00sS0FBS3ZCLEtBQUwsQ0FBV3dCLE1BRGpCLENBUkosZUFXSTtNQUFLLFNBQVMsRUFBQztJQUFmLGdCQUNJO01BQUssU0FBUyxFQUFDO0lBQWYsR0FDTVIsYUFETixlQUVJO01BQUssU0FBUyxFQUFDO0lBQWYsR0FDTVAsS0FETixDQUZKLENBREosQ0FYSixDQURKLENBREo7RUF3Qkg7O0FBbkZrRSJ9