"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _RoomContext = _interopRequireWildcard(require("../../../contexts/RoomContext"));

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _DateSeparator = _interopRequireDefault(require("../messages/DateSeparator"));

var _EventTile = _interopRequireDefault(require("./EventTile"));

var _MessagePanel = require("../../structures/MessagePanel");

var _DateUtils = require("../../../DateUtils");

var _LegacyCallEventGrouper = require("../../structures/LegacyCallEventGrouper");

var _EventTileFactory = require("../../../events/EventTileFactory");

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/*
Copyright 2015 OpenMarket Ltd
Copyright 2019 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class SearchResultTile extends _react.default.Component {
  // A map of <callId, LegacyCallEventGrouper>
  constructor(props, context) {
    super(props, context);
    (0, _defineProperty2.default)(this, "context", void 0);
    (0, _defineProperty2.default)(this, "callEventGroupers", new Map());
    this.buildLegacyCallEventGroupers(this.props.searchResult.context.getTimeline());
  }

  buildLegacyCallEventGroupers(events) {
    this.callEventGroupers = (0, _LegacyCallEventGrouper.buildLegacyCallEventGroupers)(this.callEventGroupers, events);
  }

  render() {
    const result = this.props.searchResult;
    const resultEvent = result.context.getEvent();
    const eventId = resultEvent.getId();
    const ts1 = resultEvent.getTs();
    const ret = [/*#__PURE__*/_react.default.createElement(_DateSeparator.default, {
      key: ts1 + "-search",
      roomId: resultEvent.getRoomId(),
      ts: ts1
    })];

    const layout = _SettingsStore.default.getValue("layout");

    const isTwelveHour = _SettingsStore.default.getValue("showTwelveHourTimestamps");

    const alwaysShowTimestamps = _SettingsStore.default.getValue("alwaysShowTimestamps");

    const threadsEnabled = _SettingsStore.default.getValue("feature_thread");

    const timeline = result.context.getTimeline();

    for (let j = 0; j < timeline.length; j++) {
      const mxEv = timeline[j];
      let highlights;
      const contextual = j != result.context.getOurEventIndex();

      if (!contextual) {
        highlights = this.props.searchHighlights;
      }

      if ((0, _EventTileFactory.haveRendererForEvent)(mxEv, this.context?.showHiddenEvents)) {
        // do we need a date separator since the last event?
        const prevEv = timeline[j - 1]; // is this a continuation of the previous message?

        const continuation = prevEv && !(0, _DateUtils.wantsDateSeparator)(prevEv.getDate(), mxEv.getDate()) && (0, _MessagePanel.shouldFormContinuation)(prevEv, mxEv, this.context?.showHiddenEvents, threadsEnabled, _RoomContext.TimelineRenderingType.Search);
        let lastInSection = true;
        const nextEv = timeline[j + 1];

        if (nextEv) {
          const willWantDateSeparator = (0, _DateUtils.wantsDateSeparator)(mxEv.getDate(), nextEv.getDate());
          lastInSection = willWantDateSeparator || mxEv.getSender() !== nextEv.getSender() || !(0, _MessagePanel.shouldFormContinuation)(mxEv, nextEv, this.context?.showHiddenEvents, threadsEnabled, _RoomContext.TimelineRenderingType.Search);
        }

        ret.push( /*#__PURE__*/_react.default.createElement(_EventTile.default, {
          key: `${eventId}+${j}`,
          mxEvent: mxEv,
          layout: layout,
          contextual: contextual,
          highlights: highlights,
          permalinkCreator: this.props.permalinkCreator,
          highlightLink: this.props.resultLink,
          onHeightChanged: this.props.onHeightChanged,
          isTwelveHour: isTwelveHour,
          alwaysShowTimestamps: alwaysShowTimestamps,
          lastInSection: lastInSection,
          continuation: continuation,
          callEventGrouper: this.callEventGroupers.get(mxEv.getContent().call_id)
        }));
      }
    }

    return /*#__PURE__*/_react.default.createElement("li", {
      "data-scroll-tokens": eventId
    }, /*#__PURE__*/_react.default.createElement("ol", null, ret));
  }

}

exports.default = SearchResultTile;
(0, _defineProperty2.default)(SearchResultTile, "contextType", _RoomContext.default);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTZWFyY2hSZXN1bHRUaWxlIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiY29udGV4dCIsIk1hcCIsImJ1aWxkTGVnYWN5Q2FsbEV2ZW50R3JvdXBlcnMiLCJzZWFyY2hSZXN1bHQiLCJnZXRUaW1lbGluZSIsImV2ZW50cyIsImNhbGxFdmVudEdyb3VwZXJzIiwicmVuZGVyIiwicmVzdWx0IiwicmVzdWx0RXZlbnQiLCJnZXRFdmVudCIsImV2ZW50SWQiLCJnZXRJZCIsInRzMSIsImdldFRzIiwicmV0IiwiZ2V0Um9vbUlkIiwibGF5b3V0IiwiU2V0dGluZ3NTdG9yZSIsImdldFZhbHVlIiwiaXNUd2VsdmVIb3VyIiwiYWx3YXlzU2hvd1RpbWVzdGFtcHMiLCJ0aHJlYWRzRW5hYmxlZCIsInRpbWVsaW5lIiwiaiIsImxlbmd0aCIsIm14RXYiLCJoaWdobGlnaHRzIiwiY29udGV4dHVhbCIsImdldE91ckV2ZW50SW5kZXgiLCJzZWFyY2hIaWdobGlnaHRzIiwiaGF2ZVJlbmRlcmVyRm9yRXZlbnQiLCJzaG93SGlkZGVuRXZlbnRzIiwicHJldkV2IiwiY29udGludWF0aW9uIiwid2FudHNEYXRlU2VwYXJhdG9yIiwiZ2V0RGF0ZSIsInNob3VsZEZvcm1Db250aW51YXRpb24iLCJUaW1lbGluZVJlbmRlcmluZ1R5cGUiLCJTZWFyY2giLCJsYXN0SW5TZWN0aW9uIiwibmV4dEV2Iiwid2lsbFdhbnREYXRlU2VwYXJhdG9yIiwiZ2V0U2VuZGVyIiwicHVzaCIsInBlcm1hbGlua0NyZWF0b3IiLCJyZXN1bHRMaW5rIiwib25IZWlnaHRDaGFuZ2VkIiwiZ2V0IiwiZ2V0Q29udGVudCIsImNhbGxfaWQiLCJSb29tQ29udGV4dCJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL3Jvb21zL1NlYXJjaFJlc3VsdFRpbGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNSBPcGVuTWFya2V0IEx0ZFxuQ29weXJpZ2h0IDIwMTkgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBTZWFyY2hSZXN1bHQgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL3NlYXJjaC1yZXN1bHRcIjtcbmltcG9ydCB7IE1hdHJpeEV2ZW50IH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL21vZGVscy9ldmVudFwiO1xuXG5pbXBvcnQgUm9vbUNvbnRleHQsIHsgVGltZWxpbmVSZW5kZXJpbmdUeXBlIH0gZnJvbSBcIi4uLy4uLy4uL2NvbnRleHRzL1Jvb21Db250ZXh0XCI7XG5pbXBvcnQgU2V0dGluZ3NTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc2V0dGluZ3MvU2V0dGluZ3NTdG9yZVwiO1xuaW1wb3J0IHsgUm9vbVBlcm1hbGlua0NyZWF0b3IgfSBmcm9tICcuLi8uLi8uLi91dGlscy9wZXJtYWxpbmtzL1Blcm1hbGlua3MnO1xuaW1wb3J0IERhdGVTZXBhcmF0b3IgZnJvbSBcIi4uL21lc3NhZ2VzL0RhdGVTZXBhcmF0b3JcIjtcbmltcG9ydCBFdmVudFRpbGUgZnJvbSBcIi4vRXZlbnRUaWxlXCI7XG5pbXBvcnQgeyBzaG91bGRGb3JtQ29udGludWF0aW9uIH0gZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvTWVzc2FnZVBhbmVsXCI7XG5pbXBvcnQgeyB3YW50c0RhdGVTZXBhcmF0b3IgfSBmcm9tIFwiLi4vLi4vLi4vRGF0ZVV0aWxzXCI7XG5pbXBvcnQgTGVnYWN5Q2FsbEV2ZW50R3JvdXBlciwgeyBidWlsZExlZ2FjeUNhbGxFdmVudEdyb3VwZXJzIH0gZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvTGVnYWN5Q2FsbEV2ZW50R3JvdXBlclwiO1xuaW1wb3J0IHsgaGF2ZVJlbmRlcmVyRm9yRXZlbnQgfSBmcm9tIFwiLi4vLi4vLi4vZXZlbnRzL0V2ZW50VGlsZUZhY3RvcnlcIjtcblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gICAgLy8gYSBtYXRyaXgtanMtc2RrIFNlYXJjaFJlc3VsdCBjb250YWluaW5nIHRoZSBkZXRhaWxzIG9mIHRoaXMgcmVzdWx0XG4gICAgc2VhcmNoUmVzdWx0OiBTZWFyY2hSZXN1bHQ7XG4gICAgLy8gYSBsaXN0IG9mIHN0cmluZ3MgdG8gYmUgaGlnaGxpZ2h0ZWQgaW4gdGhlIHJlc3VsdHNcbiAgICBzZWFyY2hIaWdobGlnaHRzPzogc3RyaW5nW107XG4gICAgLy8gaHJlZiBmb3IgdGhlIGhpZ2hsaWdodHMgaW4gdGhpcyByZXN1bHRcbiAgICByZXN1bHRMaW5rPzogc3RyaW5nO1xuICAgIG9uSGVpZ2h0Q2hhbmdlZD86ICgpID0+IHZvaWQ7XG4gICAgcGVybWFsaW5rQ3JlYXRvcj86IFJvb21QZXJtYWxpbmtDcmVhdG9yO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWFyY2hSZXN1bHRUaWxlIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQcm9wcz4ge1xuICAgIHN0YXRpYyBjb250ZXh0VHlwZSA9IFJvb21Db250ZXh0O1xuICAgIHB1YmxpYyBjb250ZXh0ITogUmVhY3QuQ29udGV4dFR5cGU8dHlwZW9mIFJvb21Db250ZXh0PjtcblxuICAgIC8vIEEgbWFwIG9mIDxjYWxsSWQsIExlZ2FjeUNhbGxFdmVudEdyb3VwZXI+XG4gICAgcHJpdmF0ZSBjYWxsRXZlbnRHcm91cGVycyA9IG5ldyBNYXA8c3RyaW5nLCBMZWdhY3lDYWxsRXZlbnRHcm91cGVyPigpO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHMsIGNvbnRleHQpIHtcbiAgICAgICAgc3VwZXIocHJvcHMsIGNvbnRleHQpO1xuXG4gICAgICAgIHRoaXMuYnVpbGRMZWdhY3lDYWxsRXZlbnRHcm91cGVycyh0aGlzLnByb3BzLnNlYXJjaFJlc3VsdC5jb250ZXh0LmdldFRpbWVsaW5lKCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYnVpbGRMZWdhY3lDYWxsRXZlbnRHcm91cGVycyhldmVudHM/OiBNYXRyaXhFdmVudFtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2FsbEV2ZW50R3JvdXBlcnMgPSBidWlsZExlZ2FjeUNhbGxFdmVudEdyb3VwZXJzKHRoaXMuY2FsbEV2ZW50R3JvdXBlcnMsIGV2ZW50cyk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wcm9wcy5zZWFyY2hSZXN1bHQ7XG4gICAgICAgIGNvbnN0IHJlc3VsdEV2ZW50ID0gcmVzdWx0LmNvbnRleHQuZ2V0RXZlbnQoKTtcbiAgICAgICAgY29uc3QgZXZlbnRJZCA9IHJlc3VsdEV2ZW50LmdldElkKCk7XG5cbiAgICAgICAgY29uc3QgdHMxID0gcmVzdWx0RXZlbnQuZ2V0VHMoKTtcbiAgICAgICAgY29uc3QgcmV0ID0gWzxEYXRlU2VwYXJhdG9yIGtleT17dHMxICsgXCItc2VhcmNoXCJ9IHJvb21JZD17cmVzdWx0RXZlbnQuZ2V0Um9vbUlkKCl9IHRzPXt0czF9IC8+XTtcbiAgICAgICAgY29uc3QgbGF5b3V0ID0gU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZShcImxheW91dFwiKTtcbiAgICAgICAgY29uc3QgaXNUd2VsdmVIb3VyID0gU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZShcInNob3dUd2VsdmVIb3VyVGltZXN0YW1wc1wiKTtcbiAgICAgICAgY29uc3QgYWx3YXlzU2hvd1RpbWVzdGFtcHMgPSBTZXR0aW5nc1N0b3JlLmdldFZhbHVlKFwiYWx3YXlzU2hvd1RpbWVzdGFtcHNcIik7XG4gICAgICAgIGNvbnN0IHRocmVhZHNFbmFibGVkID0gU2V0dGluZ3NTdG9yZS5nZXRWYWx1ZShcImZlYXR1cmVfdGhyZWFkXCIpO1xuXG4gICAgICAgIGNvbnN0IHRpbWVsaW5lID0gcmVzdWx0LmNvbnRleHQuZ2V0VGltZWxpbmUoKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aW1lbGluZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY29uc3QgbXhFdiA9IHRpbWVsaW5lW2pdO1xuICAgICAgICAgICAgbGV0IGhpZ2hsaWdodHM7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0dWFsID0gKGogIT0gcmVzdWx0LmNvbnRleHQuZ2V0T3VyRXZlbnRJbmRleCgpKTtcbiAgICAgICAgICAgIGlmICghY29udGV4dHVhbCkge1xuICAgICAgICAgICAgICAgIGhpZ2hsaWdodHMgPSB0aGlzLnByb3BzLnNlYXJjaEhpZ2hsaWdodHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoYXZlUmVuZGVyZXJGb3JFdmVudChteEV2LCB0aGlzLmNvbnRleHQ/LnNob3dIaWRkZW5FdmVudHMpKSB7XG4gICAgICAgICAgICAgICAgLy8gZG8gd2UgbmVlZCBhIGRhdGUgc2VwYXJhdG9yIHNpbmNlIHRoZSBsYXN0IGV2ZW50P1xuICAgICAgICAgICAgICAgIGNvbnN0IHByZXZFdiA9IHRpbWVsaW5lW2ogLSAxXTtcbiAgICAgICAgICAgICAgICAvLyBpcyB0aGlzIGEgY29udGludWF0aW9uIG9mIHRoZSBwcmV2aW91cyBtZXNzYWdlP1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRpbnVhdGlvbiA9IHByZXZFdiAmJlxuICAgICAgICAgICAgICAgICAgICAhd2FudHNEYXRlU2VwYXJhdG9yKHByZXZFdi5nZXREYXRlKCksIG14RXYuZ2V0RGF0ZSgpKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaG91bGRGb3JtQ29udGludWF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldkV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgbXhFdixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dD8uc2hvd0hpZGRlbkV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocmVhZHNFbmFibGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgVGltZWxpbmVSZW5kZXJpbmdUeXBlLlNlYXJjaCxcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGxldCBsYXN0SW5TZWN0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0RXYgPSB0aW1lbGluZVtqICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKG5leHRFdikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWxsV2FudERhdGVTZXBhcmF0b3IgPSB3YW50c0RhdGVTZXBhcmF0b3IobXhFdi5nZXREYXRlKCksIG5leHRFdi5nZXREYXRlKCkpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0SW5TZWN0aW9uID0gKFxuICAgICAgICAgICAgICAgICAgICAgICAgd2lsbFdhbnREYXRlU2VwYXJhdG9yIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBteEV2LmdldFNlbmRlcigpICE9PSBuZXh0RXYuZ2V0U2VuZGVyKCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICFzaG91bGRGb3JtQ29udGludWF0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG14RXYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEV2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dD8uc2hvd0hpZGRlbkV2ZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJlYWRzRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaW1lbGluZVJlbmRlcmluZ1R5cGUuU2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldC5wdXNoKFxuICAgICAgICAgICAgICAgICAgICA8RXZlbnRUaWxlXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk9e2Ake2V2ZW50SWR9KyR7an1gfVxuICAgICAgICAgICAgICAgICAgICAgICAgbXhFdmVudD17bXhFdn1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxheW91dD17bGF5b3V0fVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dHVhbD17Y29udGV4dHVhbH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodHM9e2hpZ2hsaWdodHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJtYWxpbmtDcmVhdG9yPXt0aGlzLnByb3BzLnBlcm1hbGlua0NyZWF0b3J9XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdobGlnaHRMaW5rPXt0aGlzLnByb3BzLnJlc3VsdExpbmt9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkhlaWdodENoYW5nZWQ9e3RoaXMucHJvcHMub25IZWlnaHRDaGFuZ2VkfVxuICAgICAgICAgICAgICAgICAgICAgICAgaXNUd2VsdmVIb3VyPXtpc1R3ZWx2ZUhvdXJ9XG4gICAgICAgICAgICAgICAgICAgICAgICBhbHdheXNTaG93VGltZXN0YW1wcz17YWx3YXlzU2hvd1RpbWVzdGFtcHN9XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SW5TZWN0aW9uPXtsYXN0SW5TZWN0aW9ufVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWF0aW9uPXtjb250aW51YXRpb259XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsRXZlbnRHcm91cGVyPXt0aGlzLmNhbGxFdmVudEdyb3VwZXJzLmdldChteEV2LmdldENvbnRlbnQoKS5jYWxsX2lkKX1cbiAgICAgICAgICAgICAgICAgICAgLz4sXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiA8bGkgZGF0YS1zY3JvbGwtdG9rZW5zPXtldmVudElkfT5cbiAgICAgICAgICAgIDxvbD57IHJldCB9PC9vbD5cbiAgICAgICAgPC9saT47XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWlCQTs7QUFJQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBMkJlLE1BQU1BLGdCQUFOLFNBQStCQyxjQUFBLENBQU1DLFNBQXJDLENBQXVEO0VBSWxFO0VBR0FDLFdBQVcsQ0FBQ0MsS0FBRCxFQUFRQyxPQUFSLEVBQWlCO0lBQ3hCLE1BQU1ELEtBQU4sRUFBYUMsT0FBYjtJQUR3QjtJQUFBLHlEQUZBLElBQUlDLEdBQUosRUFFQTtJQUd4QixLQUFLQyw0QkFBTCxDQUFrQyxLQUFLSCxLQUFMLENBQVdJLFlBQVgsQ0FBd0JILE9BQXhCLENBQWdDSSxXQUFoQyxFQUFsQztFQUNIOztFQUVPRiw0QkFBNEIsQ0FBQ0csTUFBRCxFQUErQjtJQUMvRCxLQUFLQyxpQkFBTCxHQUF5QixJQUFBSixvREFBQSxFQUE2QixLQUFLSSxpQkFBbEMsRUFBcURELE1BQXJELENBQXpCO0VBQ0g7O0VBRU1FLE1BQU0sR0FBRztJQUNaLE1BQU1DLE1BQU0sR0FBRyxLQUFLVCxLQUFMLENBQVdJLFlBQTFCO0lBQ0EsTUFBTU0sV0FBVyxHQUFHRCxNQUFNLENBQUNSLE9BQVAsQ0FBZVUsUUFBZixFQUFwQjtJQUNBLE1BQU1DLE9BQU8sR0FBR0YsV0FBVyxDQUFDRyxLQUFaLEVBQWhCO0lBRUEsTUFBTUMsR0FBRyxHQUFHSixXQUFXLENBQUNLLEtBQVosRUFBWjtJQUNBLE1BQU1DLEdBQUcsR0FBRyxjQUFDLDZCQUFDLHNCQUFEO01BQWUsR0FBRyxFQUFFRixHQUFHLEdBQUcsU0FBMUI7TUFBcUMsTUFBTSxFQUFFSixXQUFXLENBQUNPLFNBQVosRUFBN0M7TUFBc0UsRUFBRSxFQUFFSDtJQUExRSxFQUFELENBQVo7O0lBQ0EsTUFBTUksTUFBTSxHQUFHQyxzQkFBQSxDQUFjQyxRQUFkLENBQXVCLFFBQXZCLENBQWY7O0lBQ0EsTUFBTUMsWUFBWSxHQUFHRixzQkFBQSxDQUFjQyxRQUFkLENBQXVCLDBCQUF2QixDQUFyQjs7SUFDQSxNQUFNRSxvQkFBb0IsR0FBR0gsc0JBQUEsQ0FBY0MsUUFBZCxDQUF1QixzQkFBdkIsQ0FBN0I7O0lBQ0EsTUFBTUcsY0FBYyxHQUFHSixzQkFBQSxDQUFjQyxRQUFkLENBQXVCLGdCQUF2QixDQUF2Qjs7SUFFQSxNQUFNSSxRQUFRLEdBQUdmLE1BQU0sQ0FBQ1IsT0FBUCxDQUFlSSxXQUFmLEVBQWpCOztJQUNBLEtBQUssSUFBSW9CLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdELFFBQVEsQ0FBQ0UsTUFBN0IsRUFBcUNELENBQUMsRUFBdEMsRUFBMEM7TUFDdEMsTUFBTUUsSUFBSSxHQUFHSCxRQUFRLENBQUNDLENBQUQsQ0FBckI7TUFDQSxJQUFJRyxVQUFKO01BQ0EsTUFBTUMsVUFBVSxHQUFJSixDQUFDLElBQUloQixNQUFNLENBQUNSLE9BQVAsQ0FBZTZCLGdCQUFmLEVBQXpCOztNQUNBLElBQUksQ0FBQ0QsVUFBTCxFQUFpQjtRQUNiRCxVQUFVLEdBQUcsS0FBSzVCLEtBQUwsQ0FBVytCLGdCQUF4QjtNQUNIOztNQUVELElBQUksSUFBQUMsc0NBQUEsRUFBcUJMLElBQXJCLEVBQTJCLEtBQUsxQixPQUFMLEVBQWNnQyxnQkFBekMsQ0FBSixFQUFnRTtRQUM1RDtRQUNBLE1BQU1DLE1BQU0sR0FBR1YsUUFBUSxDQUFDQyxDQUFDLEdBQUcsQ0FBTCxDQUF2QixDQUY0RCxDQUc1RDs7UUFDQSxNQUFNVSxZQUFZLEdBQUdELE1BQU0sSUFDdkIsQ0FBQyxJQUFBRSw2QkFBQSxFQUFtQkYsTUFBTSxDQUFDRyxPQUFQLEVBQW5CLEVBQXFDVixJQUFJLENBQUNVLE9BQUwsRUFBckMsQ0FEZ0IsSUFFakIsSUFBQUMsb0NBQUEsRUFDSUosTUFESixFQUVJUCxJQUZKLEVBR0ksS0FBSzFCLE9BQUwsRUFBY2dDLGdCQUhsQixFQUlJVixjQUpKLEVBS0lnQixrQ0FBQSxDQUFzQkMsTUFMMUIsQ0FGSjtRQVVBLElBQUlDLGFBQWEsR0FBRyxJQUFwQjtRQUNBLE1BQU1DLE1BQU0sR0FBR2xCLFFBQVEsQ0FBQ0MsQ0FBQyxHQUFHLENBQUwsQ0FBdkI7O1FBQ0EsSUFBSWlCLE1BQUosRUFBWTtVQUNSLE1BQU1DLHFCQUFxQixHQUFHLElBQUFQLDZCQUFBLEVBQW1CVCxJQUFJLENBQUNVLE9BQUwsRUFBbkIsRUFBbUNLLE1BQU0sQ0FBQ0wsT0FBUCxFQUFuQyxDQUE5QjtVQUNBSSxhQUFhLEdBQ1RFLHFCQUFxQixJQUNyQmhCLElBQUksQ0FBQ2lCLFNBQUwsT0FBcUJGLE1BQU0sQ0FBQ0UsU0FBUCxFQURyQixJQUVBLENBQUMsSUFBQU4sb0NBQUEsRUFDR1gsSUFESCxFQUVHZSxNQUZILEVBR0csS0FBS3pDLE9BQUwsRUFBY2dDLGdCQUhqQixFQUlHVixjQUpILEVBS0dnQixrQ0FBQSxDQUFzQkMsTUFMekIsQ0FITDtRQVdIOztRQUVEeEIsR0FBRyxDQUFDNkIsSUFBSixlQUNJLDZCQUFDLGtCQUFEO1VBQ0ksR0FBRyxFQUFHLEdBQUVqQyxPQUFRLElBQUdhLENBQUUsRUFEekI7VUFFSSxPQUFPLEVBQUVFLElBRmI7VUFHSSxNQUFNLEVBQUVULE1BSFo7VUFJSSxVQUFVLEVBQUVXLFVBSmhCO1VBS0ksVUFBVSxFQUFFRCxVQUxoQjtVQU1JLGdCQUFnQixFQUFFLEtBQUs1QixLQUFMLENBQVc4QyxnQkFOakM7VUFPSSxhQUFhLEVBQUUsS0FBSzlDLEtBQUwsQ0FBVytDLFVBUDlCO1VBUUksZUFBZSxFQUFFLEtBQUsvQyxLQUFMLENBQVdnRCxlQVJoQztVQVNJLFlBQVksRUFBRTNCLFlBVGxCO1VBVUksb0JBQW9CLEVBQUVDLG9CQVYxQjtVQVdJLGFBQWEsRUFBRW1CLGFBWG5CO1VBWUksWUFBWSxFQUFFTixZQVpsQjtVQWFJLGdCQUFnQixFQUFFLEtBQUs1QixpQkFBTCxDQUF1QjBDLEdBQXZCLENBQTJCdEIsSUFBSSxDQUFDdUIsVUFBTCxHQUFrQkMsT0FBN0M7UUFidEIsRUFESjtNQWlCSDtJQUNKOztJQUVELG9CQUFPO01BQUksc0JBQW9CdkM7SUFBeEIsZ0JBQ0gseUNBQU1JLEdBQU4sQ0FERyxDQUFQO0VBR0g7O0FBNUZpRTs7OzhCQUFqRHBCLGdCLGlCQUNJd0Qsb0IifQ==