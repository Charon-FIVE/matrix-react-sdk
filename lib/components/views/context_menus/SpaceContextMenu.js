"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _event = require("matrix-js-sdk/src/@types/event");

var _IconizedContextMenu = _interopRequireWildcard(require("./IconizedContextMenu"));

var _languageHandler = require("../../../languageHandler");

var _space = require("../../../utils/space");

var _leaveBehaviour = require("../../../utils/leave-behaviour");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _BetaCard = require("../beta/BetaCard");

var _SettingsStore = _interopRequireDefault(require("../../../settings/SettingsStore"));

var _actions = require("../../../dispatcher/actions");

var _UIComponents = require("../../../customisations/helpers/UIComponents");

var _UIFeature = require("../../../settings/UIFeature");

var _PosthogTrackers = _interopRequireDefault(require("../../../PosthogTrackers"));

const _excluded = ["space", "hideHeader", "onFinished"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

const SpaceContextMenu = _ref => {
  let {
    space,
    hideHeader,
    onFinished
  } = _ref,
      props = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  const cli = (0, _react.useContext)(_MatrixClientContext.default);
  const userId = cli.getUserId();
  let inviteOption;

  if (space.getJoinRule() === "public" || space.canInvite(userId)) {
    const onInviteClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();
      (0, _space.showSpaceInvite)(space);
      onFinished();
    };

    inviteOption = /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "invite-option",
      className: "mx_SpacePanel_contextMenu_inviteButton",
      iconClassName: "mx_SpacePanel_iconInvite",
      label: (0, _languageHandler._t)("Invite"),
      onClick: onInviteClick
    });
  }

  let settingsOption;
  let leaveOption;

  if ((0, _space.shouldShowSpaceSettings)(space)) {
    const onSettingsClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();
      (0, _space.showSpaceSettings)(space);
      onFinished();
    };

    settingsOption = /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "settings-option",
      iconClassName: "mx_SpacePanel_iconSettings",
      label: (0, _languageHandler._t)("Settings"),
      onClick: onSettingsClick
    });
  } else {
    const onLeaveClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();
      (0, _leaveBehaviour.leaveSpace)(space);
      onFinished();
    };

    leaveOption = /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "leave-option",
      iconClassName: "mx_SpacePanel_iconLeave",
      className: "mx_IconizedContextMenu_option_red",
      label: (0, _languageHandler._t)("Leave space"),
      onClick: onLeaveClick
    });
  }

  let devtoolsOption;

  if (_SettingsStore.default.getValue("developerMode")) {
    const onViewTimelineClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();

      _dispatcher.default.dispatch({
        action: _actions.Action.ViewRoom,
        room_id: space.roomId,
        forceTimeline: true,
        metricsTrigger: undefined // room doesn't change

      });

      onFinished();
    };

    devtoolsOption = /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      iconClassName: "mx_SpacePanel_iconSettings",
      label: (0, _languageHandler._t)("See room timeline (devtools)"),
      onClick: onViewTimelineClick
    });
  }

  const hasPermissionToAddSpaceChild = space.currentState.maySendStateEvent(_event.EventType.SpaceChild, userId);
  const canAddRooms = hasPermissionToAddSpaceChild && (0, _UIComponents.shouldShowComponent)(_UIFeature.UIComponent.CreateRooms);

  const canAddVideoRooms = canAddRooms && _SettingsStore.default.getValue("feature_video_rooms");

  const canAddSubSpaces = hasPermissionToAddSpaceChild && (0, _UIComponents.shouldShowComponent)(_UIFeature.UIComponent.CreateSpaces);
  let newRoomSection;

  if (canAddRooms || canAddSubSpaces) {
    const onNewRoomClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();

      _PosthogTrackers.default.trackInteraction("WebSpaceContextMenuNewRoomItem", ev);

      (0, _space.showCreateNewRoom)(space);
      onFinished();
    };

    const onNewVideoRoomClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();
      (0, _space.showCreateNewRoom)(space, _event.RoomType.ElementVideo);
      onFinished();
    };

    const onNewSubspaceClick = ev => {
      ev.preventDefault();
      ev.stopPropagation();
      (0, _space.showCreateNewSubspace)(space);
      onFinished();
    };

    newRoomSection = /*#__PURE__*/_react.default.createElement(_react.default.Fragment, null, /*#__PURE__*/_react.default.createElement("div", {
      "data-test-id": "add-to-space-header",
      className: "mx_SpacePanel_contextMenu_separatorLabel"
    }, (0, _languageHandler._t)("Add")), canAddRooms && /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "new-room-option",
      iconClassName: "mx_SpacePanel_iconPlus",
      label: (0, _languageHandler._t)("Room"),
      onClick: onNewRoomClick
    }), canAddVideoRooms && /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "new-video-room-option",
      iconClassName: "mx_SpacePanel_iconPlus",
      label: (0, _languageHandler._t)("Video room"),
      onClick: onNewVideoRoomClick
    }, /*#__PURE__*/_react.default.createElement(_BetaCard.BetaPill, null)), canAddSubSpaces && /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
      "data-test-id": "new-subspace-option",
      iconClassName: "mx_SpacePanel_iconPlus",
      label: (0, _languageHandler._t)("Space"),
      onClick: onNewSubspaceClick
    }, /*#__PURE__*/_react.default.createElement(_BetaCard.BetaPill, null)));
  }

  const onPreferencesClick = ev => {
    ev.preventDefault();
    ev.stopPropagation();
    (0, _space.showSpacePreferences)(space);
    onFinished();
  };

  const openSpace = ev => {
    ev.preventDefault();
    ev.stopPropagation();

    _dispatcher.default.dispatch({
      action: _actions.Action.ViewRoom,
      room_id: space.roomId,
      metricsTrigger: undefined // other

    });

    onFinished();
  };

  const onExploreRoomsClick = ev => {
    _PosthogTrackers.default.trackInteraction("WebSpaceContextMenuExploreRoomsItem", ev);

    openSpace(ev);
  };

  const onHomeClick = ev => {
    _PosthogTrackers.default.trackInteraction("WebSpaceContextMenuHomeItem", ev);

    openSpace(ev);
  };

  return /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.default, (0, _extends2.default)({}, props, {
    onFinished: onFinished,
    className: "mx_SpacePanel_contextMenu",
    compact: true
  }), !hideHeader && /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_SpacePanel_contextMenu_header"
  }, space.name), /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOptionList, {
    first: true
  }, /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
    iconClassName: "mx_SpacePanel_iconHome",
    label: (0, _languageHandler._t)("Space home"),
    onClick: onHomeClick
  }), inviteOption, /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
    iconClassName: "mx_SpacePanel_iconExplore",
    label: canAddRooms ? (0, _languageHandler._t)("Manage & explore rooms") : (0, _languageHandler._t)("Explore rooms"),
    onClick: onExploreRoomsClick
  }), /*#__PURE__*/_react.default.createElement(_IconizedContextMenu.IconizedContextMenuOption, {
    iconClassName: "mx_SpacePanel_iconPreferences",
    label: (0, _languageHandler._t)("Preferences"),
    onClick: onPreferencesClick
  }), settingsOption, leaveOption, devtoolsOption, newRoomSection));
};

var _default = SpaceContextMenu;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTcGFjZUNvbnRleHRNZW51Iiwic3BhY2UiLCJoaWRlSGVhZGVyIiwib25GaW5pc2hlZCIsInByb3BzIiwiY2xpIiwidXNlQ29udGV4dCIsIk1hdHJpeENsaWVudENvbnRleHQiLCJ1c2VySWQiLCJnZXRVc2VySWQiLCJpbnZpdGVPcHRpb24iLCJnZXRKb2luUnVsZSIsImNhbkludml0ZSIsIm9uSW52aXRlQ2xpY2siLCJldiIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic2hvd1NwYWNlSW52aXRlIiwiX3QiLCJzZXR0aW5nc09wdGlvbiIsImxlYXZlT3B0aW9uIiwic2hvdWxkU2hvd1NwYWNlU2V0dGluZ3MiLCJvblNldHRpbmdzQ2xpY2siLCJzaG93U3BhY2VTZXR0aW5ncyIsIm9uTGVhdmVDbGljayIsImxlYXZlU3BhY2UiLCJkZXZ0b29sc09wdGlvbiIsIlNldHRpbmdzU3RvcmUiLCJnZXRWYWx1ZSIsIm9uVmlld1RpbWVsaW5lQ2xpY2siLCJkZWZhdWx0RGlzcGF0Y2hlciIsImRpc3BhdGNoIiwiYWN0aW9uIiwiQWN0aW9uIiwiVmlld1Jvb20iLCJyb29tX2lkIiwicm9vbUlkIiwiZm9yY2VUaW1lbGluZSIsIm1ldHJpY3NUcmlnZ2VyIiwidW5kZWZpbmVkIiwiaGFzUGVybWlzc2lvblRvQWRkU3BhY2VDaGlsZCIsImN1cnJlbnRTdGF0ZSIsIm1heVNlbmRTdGF0ZUV2ZW50IiwiRXZlbnRUeXBlIiwiU3BhY2VDaGlsZCIsImNhbkFkZFJvb21zIiwic2hvdWxkU2hvd0NvbXBvbmVudCIsIlVJQ29tcG9uZW50IiwiQ3JlYXRlUm9vbXMiLCJjYW5BZGRWaWRlb1Jvb21zIiwiY2FuQWRkU3ViU3BhY2VzIiwiQ3JlYXRlU3BhY2VzIiwibmV3Um9vbVNlY3Rpb24iLCJvbk5ld1Jvb21DbGljayIsIlBvc3Rob2dUcmFja2VycyIsInRyYWNrSW50ZXJhY3Rpb24iLCJzaG93Q3JlYXRlTmV3Um9vbSIsIm9uTmV3VmlkZW9Sb29tQ2xpY2siLCJSb29tVHlwZSIsIkVsZW1lbnRWaWRlbyIsIm9uTmV3U3Vic3BhY2VDbGljayIsInNob3dDcmVhdGVOZXdTdWJzcGFjZSIsIm9uUHJlZmVyZW5jZXNDbGljayIsInNob3dTcGFjZVByZWZlcmVuY2VzIiwib3BlblNwYWNlIiwib25FeHBsb3JlUm9vbXNDbGljayIsIm9uSG9tZUNsaWNrIiwibmFtZSJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL2NvbnRleHRfbWVudXMvU3BhY2VDb250ZXh0TWVudS50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIxIFRoZSBNYXRyaXgub3JnIEZvdW5kYXRpb24gQy5JLkMuXG5cbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG55b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG5Zb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG5Vbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG5kaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG5XSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cblNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbmxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuKi9cblxuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFJvb20gfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL3Jvb21cIjtcbmltcG9ydCB7IEV2ZW50VHlwZSwgUm9vbVR5cGUgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvQHR5cGVzL2V2ZW50XCI7XG5cbmltcG9ydCB7IElQcm9wcyBhcyBJQ29udGV4dE1lbnVQcm9wcyB9IGZyb20gXCIuLi8uLi9zdHJ1Y3R1cmVzL0NvbnRleHRNZW51XCI7XG5pbXBvcnQgSWNvbml6ZWRDb250ZXh0TWVudSwgeyBJY29uaXplZENvbnRleHRNZW51T3B0aW9uLCBJY29uaXplZENvbnRleHRNZW51T3B0aW9uTGlzdCB9IGZyb20gXCIuL0ljb25pemVkQ29udGV4dE1lbnVcIjtcbmltcG9ydCB7IF90IH0gZnJvbSBcIi4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IHtcbiAgICBzaG91bGRTaG93U3BhY2VTZXR0aW5ncyxcbiAgICBzaG93Q3JlYXRlTmV3Um9vbSxcbiAgICBzaG93Q3JlYXRlTmV3U3Vic3BhY2UsXG4gICAgc2hvd1NwYWNlSW52aXRlLFxuICAgIHNob3dTcGFjZVByZWZlcmVuY2VzLFxuICAgIHNob3dTcGFjZVNldHRpbmdzLFxufSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvc3BhY2VcIjtcbmltcG9ydCB7IGxlYXZlU3BhY2UgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvbGVhdmUtYmVoYXZpb3VyXCI7XG5pbXBvcnQgTWF0cml4Q2xpZW50Q29udGV4dCBmcm9tIFwiLi4vLi4vLi4vY29udGV4dHMvTWF0cml4Q2xpZW50Q29udGV4dFwiO1xuaW1wb3J0IHsgQnV0dG9uRXZlbnQgfSBmcm9tIFwiLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0IGRlZmF1bHREaXNwYXRjaGVyIGZyb20gXCIuLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXJcIjtcbmltcG9ydCB7IEJldGFQaWxsIH0gZnJvbSBcIi4uL2JldGEvQmV0YUNhcmRcIjtcbmltcG9ydCBTZXR0aW5nc1N0b3JlIGZyb20gXCIuLi8uLi8uLi9zZXR0aW5ncy9TZXR0aW5nc1N0b3JlXCI7XG5pbXBvcnQgeyBBY3Rpb24gfSBmcm9tIFwiLi4vLi4vLi4vZGlzcGF0Y2hlci9hY3Rpb25zXCI7XG5pbXBvcnQgeyBzaG91bGRTaG93Q29tcG9uZW50IH0gZnJvbSBcIi4uLy4uLy4uL2N1c3RvbWlzYXRpb25zL2hlbHBlcnMvVUlDb21wb25lbnRzXCI7XG5pbXBvcnQgeyBVSUNvbXBvbmVudCB9IGZyb20gXCIuLi8uLi8uLi9zZXR0aW5ncy9VSUZlYXR1cmVcIjtcbmltcG9ydCBQb3N0aG9nVHJhY2tlcnMgZnJvbSBcIi4uLy4uLy4uL1Bvc3Rob2dUcmFja2Vyc1wiO1xuaW1wb3J0IHsgVmlld1Jvb21QYXlsb2FkIH0gZnJvbSBcIi4uLy4uLy4uL2Rpc3BhdGNoZXIvcGF5bG9hZHMvVmlld1Jvb21QYXlsb2FkXCI7XG5cbmludGVyZmFjZSBJUHJvcHMgZXh0ZW5kcyBJQ29udGV4dE1lbnVQcm9wcyB7XG4gICAgc3BhY2U6IFJvb207XG4gICAgaGlkZUhlYWRlcj86IGJvb2xlYW47XG59XG5cbmNvbnN0IFNwYWNlQ29udGV4dE1lbnUgPSAoeyBzcGFjZSwgaGlkZUhlYWRlciwgb25GaW5pc2hlZCwgLi4ucHJvcHMgfTogSVByb3BzKSA9PiB7XG4gICAgY29uc3QgY2xpID0gdXNlQ29udGV4dChNYXRyaXhDbGllbnRDb250ZXh0KTtcbiAgICBjb25zdCB1c2VySWQgPSBjbGkuZ2V0VXNlcklkKCk7XG5cbiAgICBsZXQgaW52aXRlT3B0aW9uO1xuICAgIGlmIChzcGFjZS5nZXRKb2luUnVsZSgpID09PSBcInB1YmxpY1wiIHx8IHNwYWNlLmNhbkludml0ZSh1c2VySWQpKSB7XG4gICAgICAgIGNvbnN0IG9uSW52aXRlQ2xpY2sgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIHNob3dTcGFjZUludml0ZShzcGFjZSk7XG4gICAgICAgICAgICBvbkZpbmlzaGVkKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW52aXRlT3B0aW9uID0gKFxuICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9J2ludml0ZS1vcHRpb24nXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9jb250ZXh0TWVudV9pbnZpdGVCdXR0b25cIlxuICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2ljb25JbnZpdGVcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXtfdChcIkludml0ZVwiKX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkludml0ZUNsaWNrfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgc2V0dGluZ3NPcHRpb247XG4gICAgbGV0IGxlYXZlT3B0aW9uO1xuICAgIGlmIChzaG91bGRTaG93U3BhY2VTZXR0aW5ncyhzcGFjZSkpIHtcbiAgICAgICAgY29uc3Qgb25TZXR0aW5nc0NsaWNrID0gKGV2OiBCdXR0b25FdmVudCkgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICBzaG93U3BhY2VTZXR0aW5ncyhzcGFjZSk7XG4gICAgICAgICAgICBvbkZpbmlzaGVkKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2V0dGluZ3NPcHRpb24gPSAoXG4gICAgICAgICAgICA8SWNvbml6ZWRDb250ZXh0TWVudU9wdGlvblxuICAgICAgICAgICAgICAgIGRhdGEtdGVzdC1pZD0nc2V0dGluZ3Mtb3B0aW9uJ1xuICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2ljb25TZXR0aW5nc1wiXG4gICAgICAgICAgICAgICAgbGFiZWw9e190KFwiU2V0dGluZ3NcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25TZXR0aW5nc0NsaWNrfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBvbkxlYXZlQ2xpY2sgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIGxlYXZlU3BhY2Uoc3BhY2UpO1xuICAgICAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxlYXZlT3B0aW9uID0gKFxuICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9J2xlYXZlLW9wdGlvbidcbiAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9pY29uTGVhdmVcIlxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X0ljb25pemVkQ29udGV4dE1lbnVfb3B0aW9uX3JlZFwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e190KFwiTGVhdmUgc3BhY2VcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25MZWF2ZUNsaWNrfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgZGV2dG9vbHNPcHRpb247XG4gICAgaWYgKFNldHRpbmdzU3RvcmUuZ2V0VmFsdWUoXCJkZXZlbG9wZXJNb2RlXCIpKSB7XG4gICAgICAgIGNvbnN0IG9uVmlld1RpbWVsaW5lQ2xpY2sgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIGRlZmF1bHREaXNwYXRjaGVyLmRpc3BhdGNoPFZpZXdSb29tUGF5bG9hZD4oe1xuICAgICAgICAgICAgICAgIGFjdGlvbjogQWN0aW9uLlZpZXdSb29tLFxuICAgICAgICAgICAgICAgIHJvb21faWQ6IHNwYWNlLnJvb21JZCxcbiAgICAgICAgICAgICAgICBmb3JjZVRpbWVsaW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgIG1ldHJpY3NUcmlnZ2VyOiB1bmRlZmluZWQsIC8vIHJvb20gZG9lc24ndCBjaGFuZ2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGRldnRvb2xzT3B0aW9uID0gKFxuICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9pY29uU2V0dGluZ3NcIlxuICAgICAgICAgICAgICAgIGxhYmVsPXtfdChcIlNlZSByb29tIHRpbWVsaW5lIChkZXZ0b29scylcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25WaWV3VGltZWxpbmVDbGlja31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgaGFzUGVybWlzc2lvblRvQWRkU3BhY2VDaGlsZCA9IHNwYWNlLmN1cnJlbnRTdGF0ZS5tYXlTZW5kU3RhdGVFdmVudChFdmVudFR5cGUuU3BhY2VDaGlsZCwgdXNlcklkKTtcbiAgICBjb25zdCBjYW5BZGRSb29tcyA9IGhhc1Blcm1pc3Npb25Ub0FkZFNwYWNlQ2hpbGQgJiYgc2hvdWxkU2hvd0NvbXBvbmVudChVSUNvbXBvbmVudC5DcmVhdGVSb29tcyk7XG4gICAgY29uc3QgY2FuQWRkVmlkZW9Sb29tcyA9IGNhbkFkZFJvb21zICYmIFNldHRpbmdzU3RvcmUuZ2V0VmFsdWUoXCJmZWF0dXJlX3ZpZGVvX3Jvb21zXCIpO1xuICAgIGNvbnN0IGNhbkFkZFN1YlNwYWNlcyA9IGhhc1Blcm1pc3Npb25Ub0FkZFNwYWNlQ2hpbGQgJiYgc2hvdWxkU2hvd0NvbXBvbmVudChVSUNvbXBvbmVudC5DcmVhdGVTcGFjZXMpO1xuXG4gICAgbGV0IG5ld1Jvb21TZWN0aW9uOiBKU1guRWxlbWVudDtcbiAgICBpZiAoY2FuQWRkUm9vbXMgfHwgY2FuQWRkU3ViU3BhY2VzKSB7XG4gICAgICAgIGNvbnN0IG9uTmV3Um9vbUNsaWNrID0gKGV2OiBCdXR0b25FdmVudCkgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICBQb3N0aG9nVHJhY2tlcnMudHJhY2tJbnRlcmFjdGlvbihcIldlYlNwYWNlQ29udGV4dE1lbnVOZXdSb29tSXRlbVwiLCBldik7XG4gICAgICAgICAgICBzaG93Q3JlYXRlTmV3Um9vbShzcGFjZSk7XG4gICAgICAgICAgICBvbkZpbmlzaGVkKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25OZXdWaWRlb1Jvb21DbGljayA9IChldjogQnV0dG9uRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgc2hvd0NyZWF0ZU5ld1Jvb20oc3BhY2UsIFJvb21UeXBlLkVsZW1lbnRWaWRlbyk7XG4gICAgICAgICAgICBvbkZpbmlzaGVkKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3Qgb25OZXdTdWJzcGFjZUNsaWNrID0gKGV2OiBCdXR0b25FdmVudCkgPT4ge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICBzaG93Q3JlYXRlTmV3U3Vic3BhY2Uoc3BhY2UpO1xuICAgICAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIG5ld1Jvb21TZWN0aW9uID0gPD5cbiAgICAgICAgICAgIDxkaXYgZGF0YS10ZXN0LWlkPSdhZGQtdG8tc3BhY2UtaGVhZGVyJyBjbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2NvbnRleHRNZW51X3NlcGFyYXRvckxhYmVsXCI+XG4gICAgICAgICAgICAgICAgeyBfdChcIkFkZFwiKSB9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIHsgY2FuQWRkUm9vbXMgJiZcbiAgICAgICAgICAgICAgICA8SWNvbml6ZWRDb250ZXh0TWVudU9wdGlvblxuICAgICAgICAgICAgICAgICAgICBkYXRhLXRlc3QtaWQ9J25ldy1yb29tLW9wdGlvbidcbiAgICAgICAgICAgICAgICAgICAgaWNvbkNsYXNzTmFtZT1cIm14X1NwYWNlUGFuZWxfaWNvblBsdXNcIlxuICAgICAgICAgICAgICAgICAgICBsYWJlbD17X3QoXCJSb29tXCIpfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk5ld1Jvb21DbGlja31cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeyBjYW5BZGRWaWRlb1Jvb21zICYmXG4gICAgICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPSduZXctdmlkZW8tcm9vbS1vcHRpb24nXG4gICAgICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2ljb25QbHVzXCJcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw9e190KFwiVmlkZW8gcm9vbVwiKX1cbiAgICAgICAgICAgICAgICAgICAgb25DbGljaz17b25OZXdWaWRlb1Jvb21DbGlja31cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxCZXRhUGlsbCAvPlxuICAgICAgICAgICAgICAgIDwvSWNvbml6ZWRDb250ZXh0TWVudU9wdGlvbj5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHsgY2FuQWRkU3ViU3BhY2VzICYmXG4gICAgICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICAgICAgZGF0YS10ZXN0LWlkPSduZXctc3Vic3BhY2Utb3B0aW9uJ1xuICAgICAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9pY29uUGx1c1wiXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXtfdChcIlNwYWNlXCIpfVxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbk5ld1N1YnNwYWNlQ2xpY2t9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICA8QmV0YVBpbGwgLz5cbiAgICAgICAgICAgICAgICA8L0ljb25pemVkQ29udGV4dE1lbnVPcHRpb24+XG4gICAgICAgICAgICB9XG4gICAgICAgIDwvPjtcbiAgICB9XG5cbiAgICBjb25zdCBvblByZWZlcmVuY2VzQ2xpY2sgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHNob3dTcGFjZVByZWZlcmVuY2VzKHNwYWNlKTtcbiAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgIH07XG5cbiAgICBjb25zdCBvcGVuU3BhY2UgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIGRlZmF1bHREaXNwYXRjaGVyLmRpc3BhdGNoPFZpZXdSb29tUGF5bG9hZD4oe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICByb29tX2lkOiBzcGFjZS5yb29tSWQsXG4gICAgICAgICAgICBtZXRyaWNzVHJpZ2dlcjogdW5kZWZpbmVkLCAvLyBvdGhlclxuICAgICAgICB9KTtcbiAgICAgICAgb25GaW5pc2hlZCgpO1xuICAgIH07XG5cbiAgICBjb25zdCBvbkV4cGxvcmVSb29tc0NsaWNrID0gKGV2OiBCdXR0b25FdmVudCkgPT4ge1xuICAgICAgICBQb3N0aG9nVHJhY2tlcnMudHJhY2tJbnRlcmFjdGlvbihcIldlYlNwYWNlQ29udGV4dE1lbnVFeHBsb3JlUm9vbXNJdGVtXCIsIGV2KTtcbiAgICAgICAgb3BlblNwYWNlKGV2KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25Ib21lQ2xpY2sgPSAoZXY6IEJ1dHRvbkV2ZW50KSA9PiB7XG4gICAgICAgIFBvc3Rob2dUcmFja2Vycy50cmFja0ludGVyYWN0aW9uKFwiV2ViU3BhY2VDb250ZXh0TWVudUhvbWVJdGVtXCIsIGV2KTtcbiAgICAgICAgb3BlblNwYWNlKGV2KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIDxJY29uaXplZENvbnRleHRNZW51XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgb25GaW5pc2hlZD17b25GaW5pc2hlZH1cbiAgICAgICAgY2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9jb250ZXh0TWVudVwiXG4gICAgICAgIGNvbXBhY3RcbiAgICA+XG4gICAgICAgIHsgIWhpZGVIZWFkZXIgJiYgPGRpdiBjbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2NvbnRleHRNZW51X2hlYWRlclwiPlxuICAgICAgICAgICAgeyBzcGFjZS5uYW1lIH1cbiAgICAgICAgPC9kaXY+IH1cbiAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25MaXN0IGZpcnN0PlxuICAgICAgICAgICAgPEljb25pemVkQ29udGV4dE1lbnVPcHRpb25cbiAgICAgICAgICAgICAgICBpY29uQ2xhc3NOYW1lPVwibXhfU3BhY2VQYW5lbF9pY29uSG9tZVwiXG4gICAgICAgICAgICAgICAgbGFiZWw9e190KFwiU3BhY2UgaG9tZVwiKX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtvbkhvbWVDbGlja31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICB7IGludml0ZU9wdGlvbiB9XG4gICAgICAgICAgICA8SWNvbml6ZWRDb250ZXh0TWVudU9wdGlvblxuICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2ljb25FeHBsb3JlXCJcbiAgICAgICAgICAgICAgICBsYWJlbD17Y2FuQWRkUm9vbXMgPyBfdChcIk1hbmFnZSAmIGV4cGxvcmUgcm9vbXNcIikgOiBfdChcIkV4cGxvcmUgcm9vbXNcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25FeHBsb3JlUm9vbXNDbGlja31cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8SWNvbml6ZWRDb250ZXh0TWVudU9wdGlvblxuICAgICAgICAgICAgICAgIGljb25DbGFzc05hbWU9XCJteF9TcGFjZVBhbmVsX2ljb25QcmVmZXJlbmNlc1wiXG4gICAgICAgICAgICAgICAgbGFiZWw9e190KFwiUHJlZmVyZW5jZXNcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17b25QcmVmZXJlbmNlc0NsaWNrfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIHsgc2V0dGluZ3NPcHRpb24gfVxuICAgICAgICAgICAgeyBsZWF2ZU9wdGlvbiB9XG4gICAgICAgICAgICB7IGRldnRvb2xzT3B0aW9uIH1cbiAgICAgICAgICAgIHsgbmV3Um9vbVNlY3Rpb24gfVxuICAgICAgICA8L0ljb25pemVkQ29udGV4dE1lbnVPcHRpb25MaXN0PlxuICAgIDwvSWNvbml6ZWRDb250ZXh0TWVudT47XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTcGFjZUNvbnRleHRNZW51O1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFnQkE7O0FBRUE7O0FBR0E7O0FBQ0E7O0FBQ0E7O0FBUUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7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