"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.LocationBodyFallbackContent = exports.LocationBodyContent = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _randomstring = require("matrix-js-sdk/src/randomstring");

var _matrix = require("matrix-js-sdk/src/matrix");

var _languageHandler = require("../../../languageHandler");

var _Modal = _interopRequireDefault(require("../../../Modal"));

var _location = require("../../../utils/location");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _TooltipTarget = _interopRequireDefault(require("../elements/TooltipTarget"));

var _Tooltip = require("../elements/Tooltip");

var _LocationViewDialog = _interopRequireDefault(require("../location/LocationViewDialog"));

var _Map = _interopRequireDefault(require("../location/Map"));

var _SmartMarker = _interopRequireDefault(require("../location/SmartMarker"));

var _connection = require("../../../utils/connection");

/*
Copyright 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class MLocationBody extends _react.default.Component {
  constructor(props) {
    super(props); // multiple instances of same map might be in document
    // eg thread and main timeline, reply

    (0, _defineProperty2.default)(this, "context", void 0);
    (0, _defineProperty2.default)(this, "mapId", void 0);
    (0, _defineProperty2.default)(this, "reconnectedListener", void 0);
    (0, _defineProperty2.default)(this, "onClick", () => {
      _Modal.default.createDialog(_LocationViewDialog.default, {
        matrixClient: this.context,
        mxEvent: this.props.mxEvent
      }, "mx_LocationViewDialog_wrapper", false, // isPriority
      true // isStatic
      );
    });
    (0, _defineProperty2.default)(this, "clearError", () => {
      this.context.off(_matrix.ClientEvent.Sync, this.reconnectedListener);
      this.setState({
        error: undefined
      });
    });
    (0, _defineProperty2.default)(this, "onError", error => {
      this.setState({
        error
      });
      this.context.on(_matrix.ClientEvent.Sync, this.reconnectedListener);
    });
    const idSuffix = `${props.mxEvent.getId()}_${(0, _randomstring.randomString)(8)}`;
    this.mapId = `mx_MLocationBody_${idSuffix}`;
    this.reconnectedListener = (0, _connection.createReconnectedListener)(this.clearError);
    this.state = {
      error: undefined
    };
  }

  componentWillUnmount() {
    this.context.off(_matrix.ClientEvent.Sync, this.reconnectedListener);
  }

  render() {
    return this.state.error ? /*#__PURE__*/_react.default.createElement(LocationBodyFallbackContent, {
      error: this.state.error,
      event: this.props.mxEvent
    }) : /*#__PURE__*/_react.default.createElement(LocationBodyContent, {
      mxEvent: this.props.mxEvent,
      mapId: this.mapId,
      onError: this.onError,
      tooltip: (0, _languageHandler._t)("Expand map"),
      onClick: this.onClick
    });
  }

}

exports.default = MLocationBody;
(0, _defineProperty2.default)(MLocationBody, "contextType", _MatrixClientContext.default);

const LocationBodyFallbackContent = _ref => {
  let {
    error,
    event
  } = _ref;
  const errorType = error?.message;
  const message = `${(0, _languageHandler._t)('Unable to load map')}: ${(0, _location.getLocationShareErrorMessage)(errorType)}`;
  const locationFallback = (0, _location.isSelfLocation)(event.getContent()) ? (0, _languageHandler._t)('Shared their location: ') + event.getContent()?.body : (0, _languageHandler._t)('Shared a location: ') + event.getContent()?.body;
  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_EventTile_body mx_MLocationBody"
  }, /*#__PURE__*/_react.default.createElement("span", {
    className: errorType !== _location.LocationShareError.MapStyleUrlNotConfigured ? "mx_EventTile_tileError" : ''
  }, message), /*#__PURE__*/_react.default.createElement("br", null), locationFallback);
};

exports.LocationBodyFallbackContent = LocationBodyFallbackContent;

const LocationBodyContent = _ref2 => {
  let {
    mxEvent,
    mapId,
    tooltip,
    onError,
    onClick
  } = _ref2;
  // only pass member to marker when should render avatar marker
  const markerRoomMember = (0, _location.isSelfLocation)(mxEvent.getContent()) ? mxEvent.sender : undefined;
  const geoUri = (0, _location.locationEventGeoUri)(mxEvent);

  const mapElement = /*#__PURE__*/_react.default.createElement(_Map.default, {
    id: mapId,
    centerGeoUri: geoUri,
    onClick: onClick,
    onError: onError,
    className: "mx_MLocationBody_map"
  }, _ref3 => {
    let {
      map
    } = _ref3;
    return /*#__PURE__*/_react.default.createElement(_SmartMarker.default, {
      map: map,
      id: `${mapId}-marker`,
      geoUri: geoUri,
      roomMember: markerRoomMember
    });
  });

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_MLocationBody"
  }, tooltip ? /*#__PURE__*/_react.default.createElement(_TooltipTarget.default, {
    label: tooltip,
    alignment: _Tooltip.Alignment.InnerBottom,
    maxParentWidth: 450
  }, mapElement) : mapElement);
};

exports.LocationBodyContent = LocationBodyContent;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNTG9jYXRpb25Cb2R5IiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiTW9kYWwiLCJjcmVhdGVEaWFsb2ciLCJMb2NhdGlvblZpZXdEaWFsb2ciLCJtYXRyaXhDbGllbnQiLCJjb250ZXh0IiwibXhFdmVudCIsIm9mZiIsIkNsaWVudEV2ZW50IiwiU3luYyIsInJlY29ubmVjdGVkTGlzdGVuZXIiLCJzZXRTdGF0ZSIsImVycm9yIiwidW5kZWZpbmVkIiwib24iLCJpZFN1ZmZpeCIsImdldElkIiwicmFuZG9tU3RyaW5nIiwibWFwSWQiLCJjcmVhdGVSZWNvbm5lY3RlZExpc3RlbmVyIiwiY2xlYXJFcnJvciIsInN0YXRlIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJyZW5kZXIiLCJvbkVycm9yIiwiX3QiLCJvbkNsaWNrIiwiTWF0cml4Q2xpZW50Q29udGV4dCIsIkxvY2F0aW9uQm9keUZhbGxiYWNrQ29udGVudCIsImV2ZW50IiwiZXJyb3JUeXBlIiwibWVzc2FnZSIsImdldExvY2F0aW9uU2hhcmVFcnJvck1lc3NhZ2UiLCJsb2NhdGlvbkZhbGxiYWNrIiwiaXNTZWxmTG9jYXRpb24iLCJnZXRDb250ZW50IiwiYm9keSIsIkxvY2F0aW9uU2hhcmVFcnJvciIsIk1hcFN0eWxlVXJsTm90Q29uZmlndXJlZCIsIkxvY2F0aW9uQm9keUNvbnRlbnQiLCJ0b29sdGlwIiwibWFya2VyUm9vbU1lbWJlciIsInNlbmRlciIsImdlb1VyaSIsImxvY2F0aW9uRXZlbnRHZW9VcmkiLCJtYXBFbGVtZW50IiwibWFwIiwiQWxpZ25tZW50IiwiSW5uZXJCb3R0b20iXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy92aWV3cy9tZXNzYWdlcy9NTG9jYXRpb25Cb2R5LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjEgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgTWF0cml4RXZlbnQgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvZXZlbnQnO1xuaW1wb3J0IHsgcmFuZG9tU3RyaW5nIH0gZnJvbSAnbWF0cml4LWpzLXNkay9zcmMvcmFuZG9tc3RyaW5nJztcbmltcG9ydCB7IENsaWVudEV2ZW50LCBDbGllbnRFdmVudEhhbmRsZXJNYXAgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tYXRyaXgnO1xuXG5pbXBvcnQgeyBfdCB9IGZyb20gJy4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgTW9kYWwgZnJvbSAnLi4vLi4vLi4vTW9kYWwnO1xuaW1wb3J0IHtcbiAgICBsb2NhdGlvbkV2ZW50R2VvVXJpLFxuICAgIGdldExvY2F0aW9uU2hhcmVFcnJvck1lc3NhZ2UsXG4gICAgTG9jYXRpb25TaGFyZUVycm9yLFxuICAgIGlzU2VsZkxvY2F0aW9uLFxufSBmcm9tICcuLi8uLi8uLi91dGlscy9sb2NhdGlvbic7XG5pbXBvcnQgTWF0cml4Q2xpZW50Q29udGV4dCBmcm9tICcuLi8uLi8uLi9jb250ZXh0cy9NYXRyaXhDbGllbnRDb250ZXh0JztcbmltcG9ydCBUb29sdGlwVGFyZ2V0IGZyb20gJy4uL2VsZW1lbnRzL1Rvb2x0aXBUYXJnZXQnO1xuaW1wb3J0IHsgQWxpZ25tZW50IH0gZnJvbSAnLi4vZWxlbWVudHMvVG9vbHRpcCc7XG5pbXBvcnQgTG9jYXRpb25WaWV3RGlhbG9nIGZyb20gJy4uL2xvY2F0aW9uL0xvY2F0aW9uVmlld0RpYWxvZyc7XG5pbXBvcnQgTWFwIGZyb20gJy4uL2xvY2F0aW9uL01hcCc7XG5pbXBvcnQgU21hcnRNYXJrZXIgZnJvbSAnLi4vbG9jYXRpb24vU21hcnRNYXJrZXInO1xuaW1wb3J0IHsgSUJvZHlQcm9wcyB9IGZyb20gXCIuL0lCb2R5UHJvcHNcIjtcbmltcG9ydCB7IGNyZWF0ZVJlY29ubmVjdGVkTGlzdGVuZXIgfSBmcm9tICcuLi8uLi8uLi91dGlscy9jb25uZWN0aW9uJztcblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgZXJyb3I6IEVycm9yO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNTG9jYXRpb25Cb2R5IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElCb2R5UHJvcHMsIElTdGF0ZT4ge1xuICAgIHB1YmxpYyBzdGF0aWMgY29udGV4dFR5cGUgPSBNYXRyaXhDbGllbnRDb250ZXh0O1xuICAgIHB1YmxpYyBjb250ZXh0ITogUmVhY3QuQ29udGV4dFR5cGU8dHlwZW9mIE1hdHJpeENsaWVudENvbnRleHQ+O1xuICAgIHByaXZhdGUgbWFwSWQ6IHN0cmluZztcbiAgICBwcml2YXRlIHJlY29ubmVjdGVkTGlzdGVuZXI6IENsaWVudEV2ZW50SGFuZGxlck1hcFtDbGllbnRFdmVudC5TeW5jXTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJQm9keVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICAvLyBtdWx0aXBsZSBpbnN0YW5jZXMgb2Ygc2FtZSBtYXAgbWlnaHQgYmUgaW4gZG9jdW1lbnRcbiAgICAgICAgLy8gZWcgdGhyZWFkIGFuZCBtYWluIHRpbWVsaW5lLCByZXBseVxuICAgICAgICBjb25zdCBpZFN1ZmZpeCA9IGAke3Byb3BzLm14RXZlbnQuZ2V0SWQoKX1fJHtyYW5kb21TdHJpbmcoOCl9YDtcbiAgICAgICAgdGhpcy5tYXBJZCA9IGBteF9NTG9jYXRpb25Cb2R5XyR7aWRTdWZmaXh9YDtcblxuICAgICAgICB0aGlzLnJlY29ubmVjdGVkTGlzdGVuZXIgPSBjcmVhdGVSZWNvbm5lY3RlZExpc3RlbmVyKHRoaXMuY2xlYXJFcnJvcik7XG5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbkNsaWNrID0gKCkgPT4ge1xuICAgICAgICBNb2RhbC5jcmVhdGVEaWFsb2coXG4gICAgICAgICAgICBMb2NhdGlvblZpZXdEaWFsb2csXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWF0cml4Q2xpZW50OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICAgICAgbXhFdmVudDogdGhpcy5wcm9wcy5teEV2ZW50LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibXhfTG9jYXRpb25WaWV3RGlhbG9nX3dyYXBwZXJcIixcbiAgICAgICAgICAgIGZhbHNlLCAvLyBpc1ByaW9yaXR5XG4gICAgICAgICAgICB0cnVlLCAvLyBpc1N0YXRpY1xuICAgICAgICApO1xuICAgIH07XG5cbiAgICBwcml2YXRlIGNsZWFyRXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuY29udGV4dC5vZmYoQ2xpZW50RXZlbnQuU3luYywgdGhpcy5yZWNvbm5lY3RlZExpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9yOiB1bmRlZmluZWQgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25FcnJvciA9IChlcnJvcjogRXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IGVycm9yIH0pO1xuICAgICAgICB0aGlzLmNvbnRleHQub24oQ2xpZW50RXZlbnQuU3luYywgdGhpcy5yZWNvbm5lY3RlZExpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgY29tcG9uZW50V2lsbFVubW91bnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29udGV4dC5vZmYoQ2xpZW50RXZlbnQuU3luYywgdGhpcy5yZWNvbm5lY3RlZExpc3RlbmVyKTtcbiAgICB9XG5cbiAgICByZW5kZXIoKTogUmVhY3QuUmVhY3RFbGVtZW50PEhUTUxEaXZFbGVtZW50PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLmVycm9yID9cbiAgICAgICAgICAgIDxMb2NhdGlvbkJvZHlGYWxsYmFja0NvbnRlbnQgZXJyb3I9e3RoaXMuc3RhdGUuZXJyb3J9IGV2ZW50PXt0aGlzLnByb3BzLm14RXZlbnR9IC8+IDpcbiAgICAgICAgICAgIDxMb2NhdGlvbkJvZHlDb250ZW50XG4gICAgICAgICAgICAgICAgbXhFdmVudD17dGhpcy5wcm9wcy5teEV2ZW50fVxuICAgICAgICAgICAgICAgIG1hcElkPXt0aGlzLm1hcElkfVxuICAgICAgICAgICAgICAgIG9uRXJyb3I9e3RoaXMub25FcnJvcn1cbiAgICAgICAgICAgICAgICB0b29sdGlwPXtfdChcIkV4cGFuZCBtYXBcIil9XG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5vbkNsaWNrfVxuICAgICAgICAgICAgLz47XG4gICAgfVxufVxuXG5leHBvcnQgY29uc3QgTG9jYXRpb25Cb2R5RmFsbGJhY2tDb250ZW50OiBSZWFjdC5GQzx7IGV2ZW50OiBNYXRyaXhFdmVudCwgZXJyb3I6IEVycm9yIH0+ID0gKHsgZXJyb3IsIGV2ZW50IH0pID0+IHtcbiAgICBjb25zdCBlcnJvclR5cGUgPSBlcnJvcj8ubWVzc2FnZSBhcyBMb2NhdGlvblNoYXJlRXJyb3I7XG4gICAgY29uc3QgbWVzc2FnZSA9IGAke190KCdVbmFibGUgdG8gbG9hZCBtYXAnKX06ICR7Z2V0TG9jYXRpb25TaGFyZUVycm9yTWVzc2FnZShlcnJvclR5cGUpfWA7XG5cbiAgICBjb25zdCBsb2NhdGlvbkZhbGxiYWNrID0gaXNTZWxmTG9jYXRpb24oZXZlbnQuZ2V0Q29udGVudCgpKSA/XG4gICAgICAgIChfdCgnU2hhcmVkIHRoZWlyIGxvY2F0aW9uOiAnKSArIGV2ZW50LmdldENvbnRlbnQoKT8uYm9keSkgOlxuICAgICAgICAoX3QoJ1NoYXJlZCBhIGxvY2F0aW9uOiAnKSArIGV2ZW50LmdldENvbnRlbnQoKT8uYm9keSk7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9FdmVudFRpbGVfYm9keSBteF9NTG9jYXRpb25Cb2R5XCI+XG4gICAgICAgIDxzcGFuIGNsYXNzTmFtZT17ZXJyb3JUeXBlICE9PSBMb2NhdGlvblNoYXJlRXJyb3IuTWFwU3R5bGVVcmxOb3RDb25maWd1cmVkID8gXCJteF9FdmVudFRpbGVfdGlsZUVycm9yXCIgOiAnJ30+XG4gICAgICAgICAgICB7IG1lc3NhZ2UgfVxuICAgICAgICA8L3NwYW4+XG4gICAgICAgIDxiciAvPlxuICAgICAgICB7IGxvY2F0aW9uRmFsbGJhY2sgfVxuICAgIDwvZGl2Pjtcbn07XG5cbmludGVyZmFjZSBMb2NhdGlvbkJvZHlDb250ZW50UHJvcHMge1xuICAgIG14RXZlbnQ6IE1hdHJpeEV2ZW50O1xuICAgIG1hcElkOiBzdHJpbmc7XG4gICAgdG9vbHRpcD86IHN0cmluZztcbiAgICBvbkVycm9yOiAoZXJyb3I6IEVycm9yKSA9PiB2b2lkO1xuICAgIG9uQ2xpY2s/OiAoKSA9PiB2b2lkO1xufVxuZXhwb3J0IGNvbnN0IExvY2F0aW9uQm9keUNvbnRlbnQ6IFJlYWN0LkZDPExvY2F0aW9uQm9keUNvbnRlbnRQcm9wcz4gPSAoe1xuICAgIG14RXZlbnQsXG4gICAgbWFwSWQsXG4gICAgdG9vbHRpcCxcbiAgICBvbkVycm9yLFxuICAgIG9uQ2xpY2ssXG59KSA9PiB7XG4gICAgLy8gb25seSBwYXNzIG1lbWJlciB0byBtYXJrZXIgd2hlbiBzaG91bGQgcmVuZGVyIGF2YXRhciBtYXJrZXJcbiAgICBjb25zdCBtYXJrZXJSb29tTWVtYmVyID0gaXNTZWxmTG9jYXRpb24obXhFdmVudC5nZXRDb250ZW50KCkpID8gbXhFdmVudC5zZW5kZXIgOiB1bmRlZmluZWQ7XG4gICAgY29uc3QgZ2VvVXJpID0gbG9jYXRpb25FdmVudEdlb1VyaShteEV2ZW50KTtcblxuICAgIGNvbnN0IG1hcEVsZW1lbnQgPSAoPE1hcFxuICAgICAgICBpZD17bWFwSWR9XG4gICAgICAgIGNlbnRlckdlb1VyaT17Z2VvVXJpfVxuICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxuICAgICAgICBvbkVycm9yPXtvbkVycm9yfVxuICAgICAgICBjbGFzc05hbWU9XCJteF9NTG9jYXRpb25Cb2R5X21hcFwiXG4gICAgPlxuICAgICAgICB7XG4gICAgICAgICAgICAoeyBtYXAgfSkgPT5cbiAgICAgICAgICAgICAgICA8U21hcnRNYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgbWFwPXttYXB9XG4gICAgICAgICAgICAgICAgICAgIGlkPXtgJHttYXBJZH0tbWFya2VyYH1cbiAgICAgICAgICAgICAgICAgICAgZ2VvVXJpPXtnZW9Vcml9XG4gICAgICAgICAgICAgICAgICAgIHJvb21NZW1iZXI9e21hcmtlclJvb21NZW1iZXJ9XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgfVxuICAgIDwvTWFwPik7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9XCJteF9NTG9jYXRpb25Cb2R5XCI+XG4gICAgICAgIHtcbiAgICAgICAgICAgIHRvb2x0aXBcbiAgICAgICAgICAgICAgICA/IDxUb29sdGlwVGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsPXt0b29sdGlwfVxuICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnQ9e0FsaWdubWVudC5Jbm5lckJvdHRvbX1cbiAgICAgICAgICAgICAgICAgICAgbWF4UGFyZW50V2lkdGg9ezQ1MH1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIHsgbWFwRWxlbWVudCB9XG4gICAgICAgICAgICAgICAgPC9Ub29sdGlwVGFyZ2V0PlxuICAgICAgICAgICAgICAgIDogbWFwRWxlbWVudFxuICAgICAgICB9XG4gICAgPC9kaXY+O1xufTtcblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWdCQTs7QUFFQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFNQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBNEJlLE1BQU1BLGFBQU4sU0FBNEJDLGNBQUEsQ0FBTUMsU0FBbEMsQ0FBZ0U7RUFNM0VDLFdBQVcsQ0FBQ0MsS0FBRCxFQUFvQjtJQUMzQixNQUFNQSxLQUFOLEVBRDJCLENBRzNCO0lBQ0E7O0lBSjJCO0lBQUE7SUFBQTtJQUFBLCtDQWViLE1BQU07TUFDcEJDLGNBQUEsQ0FBTUMsWUFBTixDQUNJQywyQkFESixFQUVJO1FBQ0lDLFlBQVksRUFBRSxLQUFLQyxPQUR2QjtRQUVJQyxPQUFPLEVBQUUsS0FBS04sS0FBTCxDQUFXTTtNQUZ4QixDQUZKLEVBTUksK0JBTkosRUFPSSxLQVBKLEVBT1c7TUFDUCxJQVJKLENBUVU7TUFSVjtJQVVILENBMUI4QjtJQUFBLGtEQTRCVixNQUFNO01BQ3ZCLEtBQUtELE9BQUwsQ0FBYUUsR0FBYixDQUFpQkMsbUJBQUEsQ0FBWUMsSUFBN0IsRUFBbUMsS0FBS0MsbUJBQXhDO01BQ0EsS0FBS0MsUUFB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