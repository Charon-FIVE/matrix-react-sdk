"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _phonenumber = require("../../../phonenumber");

var _SdkConfig = _interopRequireDefault(require("../../../SdkConfig"));

var _languageHandler = require("../../../languageHandler");

var _Dropdown = _interopRequireDefault(require("../elements/Dropdown"));

/*
Copyright 2017 Vector Creations Ltd

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const COUNTRIES_BY_ISO2 = {};

for (const c of _phonenumber.COUNTRIES) {
  COUNTRIES_BY_ISO2[c.iso2] = c;
}

function countryMatchesSearchQuery(query, country) {
  // Remove '+' if present (when searching for a prefix)
  if (query[0] === '+') {
    query = query.slice(1);
  }

  if (country.name.toUpperCase().indexOf(query.toUpperCase()) == 0) return true;
  if (country.iso2 == query.toUpperCase()) return true;
  if (country.prefix.indexOf(query) !== -1) return true;
  return false;
}

class CountryDropdown extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onSearchChange", search => {
      this.setState({
        searchQuery: search
      });
    });
    (0, _defineProperty2.default)(this, "onOptionChange", iso2 => {
      this.props.onOptionChange(COUNTRIES_BY_ISO2[iso2]);
    });
    (0, _defineProperty2.default)(this, "getShortOption", iso2 => {
      if (!this.props.isSmall) {
        return undefined;
      }

      let countryPrefix;

      if (this.props.showPrefix) {
        countryPrefix = '+' + COUNTRIES_BY_ISO2[iso2].prefix;
      }

      return /*#__PURE__*/_react.default.createElement("span", {
        className: "mx_CountryDropdown_shortOption"
      }, this.flagImgForIso2(iso2), countryPrefix);
    });
    let defaultCountry = _phonenumber.COUNTRIES[0];

    const defaultCountryCode = _SdkConfig.default.get("default_country_code");

    if (defaultCountryCode) {
      const country = _phonenumber.COUNTRIES.find(c => c.iso2 === defaultCountryCode.toUpperCase());

      if (country) defaultCountry = country;
    }

    this.state = {
      searchQuery: '',
      defaultCountry
    };
  }

  componentDidMount() {
    if (!this.props.value) {
      // If no value is given, we start with the default
      // country selected, but our parent component
      // doesn't know this, therefore we do this.
      this.props.onOptionChange(this.state.defaultCountry);
    }
  }

  flagImgForIso2(iso2) {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_Dropdown_option_emoji"
    }, (0, _phonenumber.getEmojiFlag)(iso2));
  }

  render() {
    let displayedCountries;

    if (this.state.searchQuery) {
      displayedCountries = _phonenumber.COUNTRIES.filter(countryMatchesSearchQuery.bind(this, this.state.searchQuery));

      if (this.state.searchQuery.length == 2 && COUNTRIES_BY_ISO2[this.state.searchQuery.toUpperCase()]) {
        // exact ISO2 country name match: make the first result the matches ISO2
        const matched = COUNTRIES_BY_ISO2[this.state.searchQuery.toUpperCase()];
        displayedCountries = displayedCountries.filter(c => {
          return c.iso2 != matched.iso2;
        });
        displayedCountries.unshift(matched);
      }
    } else {
      displayedCountries = _phonenumber.COUNTRIES;
    }

    const options = displayedCountries.map(country => {
      return /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_CountryDropdown_option",
        key: country.iso2
      }, this.flagImgForIso2(country.iso2), (0, _languageHandler._t)(country.name), " (+", country.prefix, ")");
    }); // default value here too, otherwise we need to handle null / undefined
    // values between mounting and the initial value propagating

    const value = this.props.value || this.state.defaultCountry.iso2;
    return /*#__PURE__*/_react.default.createElement(_Dropdown.default, {
      id: "mx_CountryDropdown",
      className: this.props.className + " mx_CountryDropdown",
      onOptionChange: this.onOptionChange,
      onSearchChange: this.onSearchChange,
      menuWidth: 298,
      getShortOption: this.getShortOption,
      value: value,
      searchEnabled: true,
      disabled: this.props.disabled,
      label: (0, _languageHandler._t)("Country Dropdown")
    }, options);
  }

}

exports.default = CountryDropdown;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDT1VOVFJJRVNfQllfSVNPMiIsImMiLCJDT1VOVFJJRVMiLCJpc28yIiwiY291bnRyeU1hdGNoZXNTZWFyY2hRdWVyeSIsInF1ZXJ5IiwiY291bnRyeSIsInNsaWNlIiwibmFtZSIsInRvVXBwZXJDYXNlIiwiaW5kZXhPZiIsInByZWZpeCIsIkNvdW50cnlEcm9wZG93biIsIlJlYWN0IiwiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJwcm9wcyIsInNlYXJjaCIsInNldFN0YXRlIiwic2VhcmNoUXVlcnkiLCJvbk9wdGlvbkNoYW5nZSIsImlzU21hbGwiLCJ1bmRlZmluZWQiLCJjb3VudHJ5UHJlZml4Iiwic2hvd1ByZWZpeCIsImZsYWdJbWdGb3JJc28yIiwiZGVmYXVsdENvdW50cnkiLCJkZWZhdWx0Q291bnRyeUNvZGUiLCJTZGtDb25maWciLCJnZXQiLCJmaW5kIiwic3RhdGUiLCJjb21wb25lbnREaWRNb3VudCIsInZhbHVlIiwiZ2V0RW1vamlGbGFnIiwicmVuZGVyIiwiZGlzcGxheWVkQ291bnRyaWVzIiwiZmlsdGVyIiwiYmluZCIsImxlbmd0aCIsIm1hdGNoZWQiLCJ1bnNoaWZ0Iiwib3B0aW9ucyIsIm1hcCIsIl90IiwiY2xhc3NOYW1lIiwib25TZWFyY2hDaGFuZ2UiLCJnZXRTaG9ydE9wdGlvbiIsImRpc2FibGVkIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvYXV0aC9Db3VudHJ5RHJvcGRvd24udHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNyBWZWN0b3IgQ3JlYXRpb25zIEx0ZFxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmltcG9ydCB7IENPVU5UUklFUywgZ2V0RW1vamlGbGFnLCBQaG9uZU51bWJlckNvdW50cnlEZWZpbml0aW9uIH0gZnJvbSAnLi4vLi4vLi4vcGhvbmVudW1iZXInO1xuaW1wb3J0IFNka0NvbmZpZyBmcm9tIFwiLi4vLi4vLi4vU2RrQ29uZmlnXCI7XG5pbXBvcnQgeyBfdCB9IGZyb20gXCIuLi8uLi8uLi9sYW5ndWFnZUhhbmRsZXJcIjtcbmltcG9ydCBEcm9wZG93biBmcm9tIFwiLi4vZWxlbWVudHMvRHJvcGRvd25cIjtcblxuY29uc3QgQ09VTlRSSUVTX0JZX0lTTzIgPSB7fTtcbmZvciAoY29uc3QgYyBvZiBDT1VOVFJJRVMpIHtcbiAgICBDT1VOVFJJRVNfQllfSVNPMltjLmlzbzJdID0gYztcbn1cblxuZnVuY3Rpb24gY291bnRyeU1hdGNoZXNTZWFyY2hRdWVyeShxdWVyeTogc3RyaW5nLCBjb3VudHJ5OiBQaG9uZU51bWJlckNvdW50cnlEZWZpbml0aW9uKTogYm9vbGVhbiB7XG4gICAgLy8gUmVtb3ZlICcrJyBpZiBwcmVzZW50ICh3aGVuIHNlYXJjaGluZyBmb3IgYSBwcmVmaXgpXG4gICAgaWYgKHF1ZXJ5WzBdID09PSAnKycpIHtcbiAgICAgICAgcXVlcnkgPSBxdWVyeS5zbGljZSgxKTtcbiAgICB9XG5cbiAgICBpZiAoY291bnRyeS5uYW1lLnRvVXBwZXJDYXNlKCkuaW5kZXhPZihxdWVyeS50b1VwcGVyQ2FzZSgpKSA9PSAwKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoY291bnRyeS5pc28yID09IHF1ZXJ5LnRvVXBwZXJDYXNlKCkpIHJldHVybiB0cnVlO1xuICAgIGlmIChjb3VudHJ5LnByZWZpeC5pbmRleE9mKHF1ZXJ5KSAhPT0gLTEpIHJldHVybiB0cnVlO1xuICAgIHJldHVybiBmYWxzZTtcbn1cblxuaW50ZXJmYWNlIElQcm9wcyB7XG4gICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgb25PcHRpb25DaGFuZ2U6IChjb3VudHJ5OiBQaG9uZU51bWJlckNvdW50cnlEZWZpbml0aW9uKSA9PiB2b2lkO1xuICAgIGlzU21hbGw6IGJvb2xlYW47IC8vIGlmIGlzU21hbGwsIHNob3cgKzQ0IGluIHRoZSBzZWxlY3RlZCB2YWx1ZVxuICAgIHNob3dQcmVmaXg6IGJvb2xlYW47XG4gICAgY2xhc3NOYW1lPzogc3RyaW5nO1xuICAgIGRpc2FibGVkPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgc2VhcmNoUXVlcnk6IHN0cmluZztcbiAgICBkZWZhdWx0Q291bnRyeTogUGhvbmVOdW1iZXJDb3VudHJ5RGVmaW5pdGlvbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ291bnRyeURyb3Bkb3duIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQcm9wcywgSVN0YXRlPiB7XG4gICAgY29uc3RydWN0b3IocHJvcHM6IElQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgbGV0IGRlZmF1bHRDb3VudHJ5OiBQaG9uZU51bWJlckNvdW50cnlEZWZpbml0aW9uID0gQ09VTlRSSUVTWzBdO1xuICAgICAgICBjb25zdCBkZWZhdWx0Q291bnRyeUNvZGUgPSBTZGtDb25maWcuZ2V0KFwiZGVmYXVsdF9jb3VudHJ5X2NvZGVcIik7XG4gICAgICAgIGlmIChkZWZhdWx0Q291bnRyeUNvZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50cnkgPSBDT1VOVFJJRVMuZmluZChjID0+IGMuaXNvMiA9PT0gZGVmYXVsdENvdW50cnlDb2RlLnRvVXBwZXJDYXNlKCkpO1xuICAgICAgICAgICAgaWYgKGNvdW50cnkpIGRlZmF1bHRDb3VudHJ5ID0gY291bnRyeTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBzZWFyY2hRdWVyeTogJycsXG4gICAgICAgICAgICBkZWZhdWx0Q291bnRyeSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy52YWx1ZSkge1xuICAgICAgICAgICAgLy8gSWYgbm8gdmFsdWUgaXMgZ2l2ZW4sIHdlIHN0YXJ0IHdpdGggdGhlIGRlZmF1bHRcbiAgICAgICAgICAgIC8vIGNvdW50cnkgc2VsZWN0ZWQsIGJ1dCBvdXIgcGFyZW50IGNvbXBvbmVudFxuICAgICAgICAgICAgLy8gZG9lc24ndCBrbm93IHRoaXMsIHRoZXJlZm9yZSB3ZSBkbyB0aGlzLlxuICAgICAgICAgICAgdGhpcy5wcm9wcy5vbk9wdGlvbkNoYW5nZSh0aGlzLnN0YXRlLmRlZmF1bHRDb3VudHJ5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgb25TZWFyY2hDaGFuZ2UgPSAoc2VhcmNoOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBzZWFyY2hRdWVyeTogc2VhcmNoLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvbk9wdGlvbkNoYW5nZSA9IChpc28yOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbk9wdGlvbkNoYW5nZShDT1VOVFJJRVNfQllfSVNPMltpc28yXSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgZmxhZ0ltZ0ZvcklzbzIoaXNvMjogc3RyaW5nKTogUmVhY3QuUmVhY3ROb2RlIHtcbiAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfRHJvcGRvd25fb3B0aW9uX2Vtb2ppXCI+eyBnZXRFbW9qaUZsYWcoaXNvMikgfTwvZGl2PjtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldFNob3J0T3B0aW9uID0gKGlzbzI6IHN0cmluZyk6IFJlYWN0LlJlYWN0Tm9kZSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5wcm9wcy5pc1NtYWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjb3VudHJ5UHJlZml4O1xuICAgICAgICBpZiAodGhpcy5wcm9wcy5zaG93UHJlZml4KSB7XG4gICAgICAgICAgICBjb3VudHJ5UHJlZml4ID0gJysnICsgQ09VTlRSSUVTX0JZX0lTTzJbaXNvMl0ucHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiA8c3BhbiBjbGFzc05hbWU9XCJteF9Db3VudHJ5RHJvcGRvd25fc2hvcnRPcHRpb25cIj5cbiAgICAgICAgICAgIHsgdGhpcy5mbGFnSW1nRm9ySXNvMihpc28yKSB9XG4gICAgICAgICAgICB7IGNvdW50cnlQcmVmaXggfVxuICAgICAgICA8L3NwYW4+O1xuICAgIH07XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IFJlYWN0LlJlYWN0Tm9kZSB7XG4gICAgICAgIGxldCBkaXNwbGF5ZWRDb3VudHJpZXM7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLnNlYXJjaFF1ZXJ5KSB7XG4gICAgICAgICAgICBkaXNwbGF5ZWRDb3VudHJpZXMgPSBDT1VOVFJJRVMuZmlsdGVyKFxuICAgICAgICAgICAgICAgIGNvdW50cnlNYXRjaGVzU2VhcmNoUXVlcnkuYmluZCh0aGlzLCB0aGlzLnN0YXRlLnNlYXJjaFF1ZXJ5KSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5zZWFyY2hRdWVyeS5sZW5ndGggPT0gMiAmJlxuICAgICAgICAgICAgICAgIENPVU5UUklFU19CWV9JU08yW3RoaXMuc3RhdGUuc2VhcmNoUXVlcnkudG9VcHBlckNhc2UoKV1cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIC8vIGV4YWN0IElTTzIgY291bnRyeSBuYW1lIG1hdGNoOiBtYWtlIHRoZSBmaXJzdCByZXN1bHQgdGhlIG1hdGNoZXMgSVNPMlxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZWQgPSBDT1VOVFJJRVNfQllfSVNPMlt0aGlzLnN0YXRlLnNlYXJjaFF1ZXJ5LnRvVXBwZXJDYXNlKCldO1xuICAgICAgICAgICAgICAgIGRpc3BsYXllZENvdW50cmllcyA9IGRpc3BsYXllZENvdW50cmllcy5maWx0ZXIoKGMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMuaXNvMiAhPSBtYXRjaGVkLmlzbzI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGlzcGxheWVkQ291bnRyaWVzLnVuc2hpZnQobWF0Y2hlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkaXNwbGF5ZWRDb3VudHJpZXMgPSBDT1VOVFJJRVM7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBvcHRpb25zID0gZGlzcGxheWVkQ291bnRyaWVzLm1hcCgoY291bnRyeSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIDxkaXYgY2xhc3NOYW1lPVwibXhfQ291bnRyeURyb3Bkb3duX29wdGlvblwiIGtleT17Y291bnRyeS5pc28yfT5cbiAgICAgICAgICAgICAgICB7IHRoaXMuZmxhZ0ltZ0ZvcklzbzIoY291bnRyeS5pc28yKSB9XG4gICAgICAgICAgICAgICAgeyBfdChjb3VudHJ5Lm5hbWUpIH0gKCt7IGNvdW50cnkucHJlZml4IH0pXG4gICAgICAgICAgICA8L2Rpdj47XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGRlZmF1bHQgdmFsdWUgaGVyZSB0b28sIG90aGVyd2lzZSB3ZSBuZWVkIHRvIGhhbmRsZSBudWxsIC8gdW5kZWZpbmVkXG4gICAgICAgIC8vIHZhbHVlcyBiZXR3ZWVuIG1vdW50aW5nIGFuZCB0aGUgaW5pdGlhbCB2YWx1ZSBwcm9wYWdhdGluZ1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucHJvcHMudmFsdWUgfHwgdGhpcy5zdGF0ZS5kZWZhdWx0Q291bnRyeS5pc28yO1xuXG4gICAgICAgIHJldHVybiA8RHJvcGRvd25cbiAgICAgICAgICAgIGlkPVwibXhfQ291bnRyeURyb3Bkb3duXCJcbiAgICAgICAgICAgIGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWUgKyBcIiBteF9Db3VudHJ5RHJvcGRvd25cIn1cbiAgICAgICAgICAgIG9uT3B0aW9uQ2hhbmdlPXt0aGlzLm9uT3B0aW9uQ2hhbmdlfVxuICAgICAgICAgICAgb25TZWFyY2hDaGFuZ2U9e3RoaXMub25TZWFyY2hDaGFuZ2V9XG4gICAgICAgICAgICBtZW51V2lkdGg9ezI5OH1cbiAgICAgICAgICAgIGdldFNob3J0T3B0aW9uPXt0aGlzLmdldFNob3J0T3B0aW9ufVxuICAgICAgICAgICAgdmFsdWU9e3ZhbHVlfVxuICAgICAgICAgICAgc2VhcmNoRW5hYmxlZD17dHJ1ZX1cbiAgICAgICAgICAgIGRpc2FibGVkPXt0aGlzLnByb3BzLmRpc2FibGVkfVxuICAgICAgICAgICAgbGFiZWw9e190KFwiQ291bnRyeSBEcm9wZG93blwiKX1cbiAgICAgICAgPlxuICAgICAgICAgICAgeyBvcHRpb25zIH1cbiAgICAgICAgPC9Ecm9wZG93bj47XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQWdCQTs7QUFFQTs7QUFDQTs7QUFD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