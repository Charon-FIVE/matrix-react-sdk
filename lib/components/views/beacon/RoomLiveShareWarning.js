"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireDefault(require("react"));

var _languageHandler = require("../../../languageHandler");

var _useEventEmitter = require("../../../hooks/useEventEmitter");

var _OwnBeaconStore = require("../../../stores/OwnBeaconStore");

var _beacon = require("../../../utils/beacon");

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var _Spinner = _interopRequireDefault(require("../elements/Spinner"));

var _StyledLiveBeaconIcon = _interopRequireDefault(require("./StyledLiveBeaconIcon"));

var _close = require("../../../../res/img/image-view/close.svg");

var _LiveTimeRemaining = _interopRequireDefault(require("./LiveTimeRemaining"));

var _dispatcher = _interopRequireDefault(require("../../../dispatcher/dispatcher"));

var _actions = require("../../../dispatcher/actions");

/*
Copyright 2022 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const getLabel = (hasLocationPublishError, hasStopSharingError) => {
  if (hasLocationPublishError) {
    return (0, _languageHandler._t)('An error occurred whilst sharing your live location, please try again');
  }

  if (hasStopSharingError) {
    return (0, _languageHandler._t)('An error occurred while stopping your live location, please try again');
  }

  return (0, _languageHandler._t)('You are sharing your live location');
};

const RoomLiveShareWarningInner = _ref => {
  let {
    liveBeaconIds,
    roomId
  } = _ref;
  const {
    onStopSharing,
    onResetLocationPublishError,
    beacon,
    stoppingInProgress,
    hasStopSharingError,
    hasLocationPublishError
  } = (0, _beacon.useOwnLiveBeacons)(liveBeaconIds);

  if (!beacon) {
    return null;
  }

  const hasError = hasStopSharingError || hasLocationPublishError; // eat events from buttons so navigate to tile
  // is not triggered

  const stopPropagationWrapper = callback => e => {
    e?.stopPropagation();
    callback();
  };

  const onButtonClick = () => {
    if (hasLocationPublishError) {
      onResetLocationPublishError();
    } else {
      onStopSharing();
    }
  };

  const onClick = () => {
    _dispatcher.default.dispatch({
      action: _actions.Action.ViewRoom,
      room_id: beacon.roomId,
      metricsTrigger: undefined,
      event_id: beacon.beaconInfoId,
      scroll_into_view: true,
      highlighted: true
    });
  };

  return /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_RoomLiveShareWarning",
    onClick: onClick
  }, /*#__PURE__*/_react.default.createElement(_StyledLiveBeaconIcon.default, {
    className: "mx_RoomLiveShareWarning_icon",
    withError: hasError
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_RoomLiveShareWarning_label"
  }, getLabel(hasLocationPublishError, hasStopSharingError)), stoppingInProgress && /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_RoomLiveShareWarning_spinner"
  }, /*#__PURE__*/_react.default.createElement(_Spinner.default, {
    h: 16,
    w: 16
  })), !stoppingInProgress && !hasError && /*#__PURE__*/_react.default.createElement(_LiveTimeRemaining.default, {
    beacon: beacon
  }), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    className: "mx_RoomLiveShareWarning_stopButton",
    "data-test-id": "room-live-share-primary-button",
    onClick: stopPropagationWrapper(onButtonClick),
    kind: "danger",
    element: "button",
    disabled: stoppingInProgress
  }, hasError ? (0, _languageHandler._t)('Retry') : (0, _languageHandler._t)('Stop')), hasLocationPublishError && /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    "data-test-id": "room-live-share-wire-error-close-button",
    title: (0, _languageHandler._t)('Stop and close'),
    element: "button",
    className: "mx_RoomLiveShareWarning_closeButton",
    onClick: stopPropagationWrapper(onStopSharing)
  }, /*#__PURE__*/_react.default.createElement(_close.Icon, {
    className: "mx_RoomLiveShareWarning_closeButtonIcon"
  })));
};

const RoomLiveShareWarning = _ref2 => {
  let {
    roomId
  } = _ref2;
  // do we have an active geolocation.watchPosition
  const isMonitoringLiveLocation = (0, _useEventEmitter.useEventEmitterState)(_OwnBeaconStore.OwnBeaconStore.instance, _OwnBeaconStore.OwnBeaconStoreEvent.MonitoringLivePosition, () => _OwnBeaconStore.OwnBeaconStore.instance.isMonitoringLiveLocation);
  const liveBeaconIds = (0, _useEventEmitter.useEventEmitterState)(_OwnBeaconStore.OwnBeaconStore.instance, _OwnBeaconStore.OwnBeaconStoreEvent.LivenessChange, () => _OwnBeaconStore.OwnBeaconStore.instance.getLiveBeaconIds(roomId));

  if (!isMonitoringLiveLocation || !liveBeaconIds.length) {
    return null;
  } // split into outer/inner to avoid watching various parts of live beacon state
  // when there are none


  return /*#__PURE__*/_react.default.createElement(RoomLiveShareWarningInner, {
    liveBeaconIds: liveBeaconIds,
    roomId: roomId
  });
};

var _default = RoomLiveShareWarning;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRMYWJlbCIsImhhc0xvY2F0aW9uUHVibGlzaEVycm9yIiwiaGFzU3RvcFNoYXJpbmdFcnJvciIsIl90IiwiUm9vbUxpdmVTaGFyZVdhcm5pbmdJbm5lciIsImxpdmVCZWFjb25JZHMiLCJyb29tSWQiLCJvblN0b3BTaGFyaW5nIiwib25SZXNldExvY2F0aW9uUHVibGlzaEVycm9yIiwiYmVhY29uIiwic3RvcHBpbmdJblByb2dyZXNzIiwidXNlT3duTGl2ZUJlYWNvbnMiLCJoYXNFcnJvciIsInN0b3BQcm9wYWdhdGlvbldyYXBwZXIiLCJjYWxsYmFjayIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJvbkJ1dHRvbkNsaWNrIiwib25DbGljayIsImRpc3BhdGNoZXIiLCJkaXNwYXRjaCIsImFjdGlvbiIsIkFjdGlvbiIsIlZpZXdSb29tIiwicm9vbV9pZCIsIm1ldHJpY3NUcmlnZ2VyIiwidW5kZWZpbmVkIiwiZXZlbnRfaWQiLCJiZWFjb25JbmZvSWQiLCJzY3JvbGxfaW50b192aWV3IiwiaGlnaGxpZ2h0ZWQiLCJSb29tTGl2ZVNoYXJlV2FybmluZyIsImlzTW9uaXRvcmluZ0xpdmVMb2NhdGlvbiIsInVzZUV2ZW50RW1pdHRlclN0YXRlIiwiT3duQmVhY29uU3RvcmUiLCJpbnN0YW5jZSIsIk93bkJlYWNvblN0b3JlRXZlbnQiLCJNb25pdG9yaW5nTGl2ZVBvc2l0aW9uIiwiTGl2ZW5lc3NDaGFuZ2UiLCJnZXRMaXZlQmVhY29uSWRzIiwibGVuZ3RoIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvYmVhY29uL1Jvb21MaXZlU2hhcmVXYXJuaW5nLnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQ29weXJpZ2h0IDIwMjIgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgUm9vbSB9IGZyb20gJ21hdHJpeC1qcy1zZGsvc3JjL21hdHJpeCc7XG5cbmltcG9ydCB7IF90IH0gZnJvbSAnLi4vLi4vLi4vbGFuZ3VhZ2VIYW5kbGVyJztcbmltcG9ydCB7IHVzZUV2ZW50RW1pdHRlclN0YXRlIH0gZnJvbSAnLi4vLi4vLi4vaG9va3MvdXNlRXZlbnRFbWl0dGVyJztcbmltcG9ydCB7IE93bkJlYWNvblN0b3JlLCBPd25CZWFjb25TdG9yZUV2ZW50IH0gZnJvbSAnLi4vLi4vLi4vc3RvcmVzL093bkJlYWNvblN0b3JlJztcbmltcG9ydCB7IHVzZU93bkxpdmVCZWFjb25zIH0gZnJvbSAnLi4vLi4vLi4vdXRpbHMvYmVhY29uJztcbmltcG9ydCBBY2Nlc3NpYmxlQnV0dG9uLCB7IEJ1dHRvbkV2ZW50IH0gZnJvbSAnLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvbic7XG5pbXBvcnQgU3Bpbm5lciBmcm9tICcuLi9lbGVtZW50cy9TcGlubmVyJztcbmltcG9ydCBTdHlsZWRMaXZlQmVhY29uSWNvbiBmcm9tICcuL1N0eWxlZExpdmVCZWFjb25JY29uJztcbmltcG9ydCB7IEljb24gYXMgQ2xvc2VJY29uIH0gZnJvbSAnLi4vLi4vLi4vLi4vcmVzL2ltZy9pbWFnZS12aWV3L2Nsb3NlLnN2Zyc7XG5pbXBvcnQgTGl2ZVRpbWVSZW1haW5pbmcgZnJvbSAnLi9MaXZlVGltZVJlbWFpbmluZyc7XG5pbXBvcnQgZGlzcGF0Y2hlciBmcm9tICcuLi8uLi8uLi9kaXNwYXRjaGVyL2Rpc3BhdGNoZXInO1xuaW1wb3J0IHsgVmlld1Jvb21QYXlsb2FkIH0gZnJvbSAnLi4vLi4vLi4vZGlzcGF0Y2hlci9wYXlsb2Fkcy9WaWV3Um9vbVBheWxvYWQnO1xuaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSAnLi4vLi4vLi4vZGlzcGF0Y2hlci9hY3Rpb25zJztcblxuY29uc3QgZ2V0TGFiZWwgPSAoaGFzTG9jYXRpb25QdWJsaXNoRXJyb3I6IGJvb2xlYW4sIGhhc1N0b3BTaGFyaW5nRXJyb3I6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgIGlmIChoYXNMb2NhdGlvblB1Ymxpc2hFcnJvcikge1xuICAgICAgICByZXR1cm4gX3QoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxzdCBzaGFyaW5nIHlvdXIgbGl2ZSBsb2NhdGlvbiwgcGxlYXNlIHRyeSBhZ2FpbicpO1xuICAgIH1cbiAgICBpZiAoaGFzU3RvcFNoYXJpbmdFcnJvcikge1xuICAgICAgICByZXR1cm4gX3QoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIHN0b3BwaW5nIHlvdXIgbGl2ZSBsb2NhdGlvbiwgcGxlYXNlIHRyeSBhZ2FpbicpO1xuICAgIH1cbiAgICByZXR1cm4gX3QoJ1lvdSBhcmUgc2hhcmluZyB5b3VyIGxpdmUgbG9jYXRpb24nKTtcbn07XG5cbmludGVyZmFjZSBSb29tTGl2ZVNoYXJlV2FybmluZ0lubmVyUHJvcHMge1xuICAgIGxpdmVCZWFjb25JZHM6IHN0cmluZ1tdO1xuICAgIHJvb21JZDogUm9vbVsncm9vbUlkJ107XG59XG5jb25zdCBSb29tTGl2ZVNoYXJlV2FybmluZ0lubmVyOiBSZWFjdC5GQzxSb29tTGl2ZVNoYXJlV2FybmluZ0lubmVyUHJvcHM+ID0gKHsgbGl2ZUJlYWNvbklkcywgcm9vbUlkIH0pID0+IHtcbiAgICBjb25zdCB7XG4gICAgICAgIG9uU3RvcFNoYXJpbmcsXG4gICAgICAgIG9uUmVzZXRMb2NhdGlvblB1Ymxpc2hFcnJvcixcbiAgICAgICAgYmVhY29uLFxuICAgICAgICBzdG9wcGluZ0luUHJvZ3Jlc3MsXG4gICAgICAgIGhhc1N0b3BTaGFyaW5nRXJyb3IsXG4gICAgICAgIGhhc0xvY2F0aW9uUHVibGlzaEVycm9yLFxuICAgIH0gPSB1c2VPd25MaXZlQmVhY29ucyhsaXZlQmVhY29uSWRzKTtcblxuICAgIGlmICghYmVhY29uKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGhhc0Vycm9yID0gaGFzU3RvcFNoYXJpbmdFcnJvciB8fCBoYXNMb2NhdGlvblB1Ymxpc2hFcnJvcjtcblxuICAgIC8vIGVhdCBldmVudHMgZnJvbSBidXR0b25zIHNvIG5hdmlnYXRlIHRvIHRpbGVcbiAgICAvLyBpcyBub3QgdHJpZ2dlcmVkXG4gICAgY29uc3Qgc3RvcFByb3BhZ2F0aW9uV3JhcHBlciA9IChjYWxsYmFjazogKCkgPT4gdm9pZCkgPT4gKGU/OiBCdXR0b25FdmVudCkgPT4ge1xuICAgICAgICBlPy5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb25CdXR0b25DbGljayA9ICgpID0+IHtcbiAgICAgICAgaWYgKGhhc0xvY2F0aW9uUHVibGlzaEVycm9yKSB7XG4gICAgICAgICAgICBvblJlc2V0TG9jYXRpb25QdWJsaXNoRXJyb3IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9uU3RvcFNoYXJpbmcoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBvbkNsaWNrID0gKCkgPT4ge1xuICAgICAgICBkaXNwYXRjaGVyLmRpc3BhdGNoPFZpZXdSb29tUGF5bG9hZD4oe1xuICAgICAgICAgICAgYWN0aW9uOiBBY3Rpb24uVmlld1Jvb20sXG4gICAgICAgICAgICByb29tX2lkOiBiZWFjb24ucm9vbUlkLFxuICAgICAgICAgICAgbWV0cmljc1RyaWdnZXI6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV2ZW50X2lkOiBiZWFjb24uYmVhY29uSW5mb0lkLFxuICAgICAgICAgICAgc2Nyb2xsX2ludG9fdmlldzogdHJ1ZSxcbiAgICAgICAgICAgIGhpZ2hsaWdodGVkOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPSdteF9Sb29tTGl2ZVNoYXJlV2FybmluZydcbiAgICAgICAgb25DbGljaz17b25DbGlja31cbiAgICA+XG4gICAgICAgIDxTdHlsZWRMaXZlQmVhY29uSWNvbiBjbGFzc05hbWU9XCJteF9Sb29tTGl2ZVNoYXJlV2FybmluZ19pY29uXCIgd2l0aEVycm9yPXtoYXNFcnJvcn0gLz5cblxuICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJteF9Sb29tTGl2ZVNoYXJlV2FybmluZ19sYWJlbFwiPlxuICAgICAgICAgICAgeyBnZXRMYWJlbChoYXNMb2NhdGlvblB1Ymxpc2hFcnJvciwgaGFzU3RvcFNoYXJpbmdFcnJvcikgfVxuICAgICAgICA8L3NwYW4+XG5cbiAgICAgICAgeyBzdG9wcGluZ0luUHJvZ3Jlc3MgJiZcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT0nbXhfUm9vbUxpdmVTaGFyZVdhcm5pbmdfc3Bpbm5lcic+PFNwaW5uZXIgaD17MTZ9IHc9ezE2fSAvPjwvc3Bhbj5cbiAgICAgICAgfVxuICAgICAgICB7ICFzdG9wcGluZ0luUHJvZ3Jlc3MgJiYgIWhhc0Vycm9yICYmIDxMaXZlVGltZVJlbWFpbmluZyBiZWFjb249e2JlYWNvbn0gLz4gfVxuXG4gICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICBjbGFzc05hbWU9J214X1Jvb21MaXZlU2hhcmVXYXJuaW5nX3N0b3BCdXR0b24nXG4gICAgICAgICAgICBkYXRhLXRlc3QtaWQ9J3Jvb20tbGl2ZS1zaGFyZS1wcmltYXJ5LWJ1dHRvbidcbiAgICAgICAgICAgIG9uQ2xpY2s9e3N0b3BQcm9wYWdhdGlvbldyYXBwZXIob25CdXR0b25DbGljayl9XG4gICAgICAgICAgICBraW5kPSdkYW5nZXInXG4gICAgICAgICAgICBlbGVtZW50PSdidXR0b24nXG4gICAgICAgICAgICBkaXNhYmxlZD17c3RvcHBpbmdJblByb2dyZXNzfVxuICAgICAgICA+XG4gICAgICAgICAgICB7IGhhc0Vycm9yID8gX3QoJ1JldHJ5JykgOiBfdCgnU3RvcCcpIH1cbiAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICB7IGhhc0xvY2F0aW9uUHVibGlzaEVycm9yICYmIDxBY2Nlc3NpYmxlQnV0dG9uXG4gICAgICAgICAgICBkYXRhLXRlc3QtaWQ9J3Jvb20tbGl2ZS1zaGFyZS13aXJlLWVycm9yLWNsb3NlLWJ1dHRvbidcbiAgICAgICAgICAgIHRpdGxlPXtfdCgnU3RvcCBhbmQgY2xvc2UnKX1cbiAgICAgICAgICAgIGVsZW1lbnQ9J2J1dHRvbidcbiAgICAgICAgICAgIGNsYXNzTmFtZT0nbXhfUm9vbUxpdmVTaGFyZVdhcm5pbmdfY2xvc2VCdXR0b24nXG4gICAgICAgICAgICBvbkNsaWNrPXtzdG9wUHJvcGFnYXRpb25XcmFwcGVyKG9uU3RvcFNoYXJpbmcpfVxuICAgICAgICA+XG4gICAgICAgICAgICA8Q2xvc2VJY29uIGNsYXNzTmFtZT0nbXhfUm9vbUxpdmVTaGFyZVdhcm5pbmdfY2xvc2VCdXR0b25JY29uJyAvPlxuICAgICAgICA8L0FjY2Vzc2libGVCdXR0b24+IH1cbiAgICA8L2Rpdj47XG59O1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICAgIHJvb21JZDogUm9vbVsncm9vbUlkJ107XG59XG5jb25zdCBSb29tTGl2ZVNoYXJlV2FybmluZzogUmVhY3QuRkM8UHJvcHM+ID0gKHsgcm9vbUlkIH0pID0+IHtcbiAgICAvLyBkbyB3ZSBoYXZlIGFuIGFjdGl2ZSBnZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uXG4gICAgY29uc3QgaXNNb25pdG9yaW5nTGl2ZUxvY2F0aW9uID0gdXNlRXZlbnRFbWl0dGVyU3RhdGUoXG4gICAgICAgIE93bkJlYWNvblN0b3JlLmluc3RhbmNlLFxuICAgICAgICBPd25CZWFjb25TdG9yZUV2ZW50Lk1vbml0b3JpbmdMaXZlUG9zaXRpb24sXG4gICAgICAgICgpID0+IE93bkJlYWNvblN0b3JlLmluc3RhbmNlLmlzTW9uaXRvcmluZ0xpdmVMb2NhdGlvbixcbiAgICApO1xuXG4gICAgY29uc3QgbGl2ZUJlYWNvbklkcyA9IHVzZUV2ZW50RW1pdHRlclN0YXRlKFxuICAgICAgICBPd25CZWFjb25TdG9yZS5pbnN0YW5jZSxcbiAgICAgICAgT3duQmVhY29uU3RvcmVFdmVudC5MaXZlbmVzc0NoYW5nZSxcbiAgICAgICAgKCkgPT4gT3duQmVhY29uU3RvcmUuaW5zdGFuY2UuZ2V0TGl2ZUJlYWNvbklkcyhyb29tSWQpLFxuICAgICk7XG5cbiAgICBpZiAoIWlzTW9uaXRvcmluZ0xpdmVMb2NhdGlvbiB8fCAhbGl2ZUJlYWNvbklkcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLy8gc3BsaXQgaW50byBvdXRlci9pbm5lciB0byBhdm9pZCB3YXRjaGluZyB2YXJpb3VzIHBhcnRzIG9mIGxpdmUgYmVhY29uIHN0YXRlXG4gICAgLy8gd2hlbiB0aGVyZSBhcmUgbm9uZVxuICAgIHJldHVybiA8Um9vbUxpdmVTaGFyZVdhcm5pbmdJbm5lciBsaXZlQmVhY29uSWRzPXtsaXZlQmVhY29uSWRzfSByb29tSWQ9e3Jvb21JZH0gLz47XG59O1xuXG5leHBv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