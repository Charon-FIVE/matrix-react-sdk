"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

/*
Copyright 2020 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class Draggable extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onMouseDown", event => {
      this.setState({
        location: {
          currentX: event.clientX,
          currentY: event.clientY
        }
      });
      document.addEventListener("mousemove", this.state.onMouseMove);
      document.addEventListener("mouseup", this.state.onMouseUp);
    });
    (0, _defineProperty2.default)(this, "onMouseUp", event => {
      document.removeEventListener("mousemove", this.state.onMouseMove);
      document.removeEventListener("mouseup", this.state.onMouseUp);
      this.props.onMouseUp(event);
    });
    this.state = {
      onMouseMove: this.onMouseMove.bind(this),
      onMouseUp: this.onMouseUp.bind(this),
      location: {
        currentX: 0,
        currentY: 0
      }
    };
  }

  onMouseMove(event) {
    const newLocation = this.props.dragFunc(this.state.location, event);
    this.setState({
      location: newLocation
    });
  }

  render() {
    return /*#__PURE__*/_react.default.createElement("div", {
      className: this.props.className,
      onMouseDown: this.onMouseDown.bind(this)
    });
  }

}

exports.default = Draggable;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEcmFnZ2FibGUiLCJSZWFjdCIsIkNvbXBvbmVudCIsImNvbnN0cnVjdG9yIiwicHJvcHMiLCJldmVudCIsInNldFN0YXRlIiwibG9jYXRpb24iLCJjdXJyZW50WCIsImNsaWVudFgiLCJjdXJyZW50WSIsImNsaWVudFkiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGF0ZSIsIm9uTW91c2VNb3ZlIiwib25Nb3VzZVVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJpbmQiLCJuZXdMb2NhdGlvbiIsImRyYWdGdW5jIiwicmVuZGVyIiwiY2xhc3NOYW1lIiwib25Nb3VzZURvd24iXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy92aWV3cy9lbGVtZW50cy9EcmFnZ2FibGUudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMCBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmludGVyZmFjZSBJUHJvcHMge1xuICAgIGNsYXNzTmFtZTogc3RyaW5nO1xuICAgIGRyYWdGdW5jOiAoY3VycmVudExvY2F0aW9uOiBJTG9jYXRpb25TdGF0ZSwgZXZlbnQ6IE1vdXNlRXZlbnQpID0+IElMb2NhdGlvblN0YXRlO1xuICAgIG9uTW91c2VVcDogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkO1xufVxuXG5pbnRlcmZhY2UgSVN0YXRlIHtcbiAgICBvbk1vdXNlTW92ZTogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkO1xuICAgIG9uTW91c2VVcDogKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB2b2lkO1xuICAgIGxvY2F0aW9uOiBJTG9jYXRpb25TdGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTG9jYXRpb25TdGF0ZSB7XG4gICAgY3VycmVudFg6IG51bWJlcjtcbiAgICBjdXJyZW50WTogbnVtYmVyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmFnZ2FibGUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wczogSVByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgb25Nb3VzZU1vdmU6IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG9uTW91c2VVcDogdGhpcy5vbk1vdXNlVXAuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIGxvY2F0aW9uOiB7XG4gICAgICAgICAgICAgICAgY3VycmVudFg6IDAsXG4gICAgICAgICAgICAgICAgY3VycmVudFk6IDAsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHByaXZhdGUgb25Nb3VzZURvd24gPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICBsb2NhdGlvbjoge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRYOiBldmVudC5jbGllbnRYLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRZOiBldmVudC5jbGllbnRZLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLnN0YXRlLm9uTW91c2VNb3ZlKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgdGhpcy5zdGF0ZS5vbk1vdXNlVXApO1xuICAgIH07XG5cbiAgICBwcml2YXRlIG9uTW91c2VVcCA9IChldmVudDogTW91c2VFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuc3RhdGUub25Nb3VzZU1vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLnN0YXRlLm9uTW91c2VVcCk7XG4gICAgICAgIHRoaXMucHJvcHMub25Nb3VzZVVwKGV2ZW50KTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvbk1vdXNlTW92ZShldmVudDogTW91c2VFdmVudCk6IHZvaWQge1xuICAgICAgICBjb25zdCBuZXdMb2NhdGlvbiA9IHRoaXMucHJvcHMuZHJhZ0Z1bmModGhpcy5zdGF0ZS5sb2NhdGlvbiwgZXZlbnQpO1xuXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgbG9jYXRpb246IG5ld0xvY2F0aW9uLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17dGhpcy5wcm9wcy5jbGFzc05hbWV9IG9uTW91c2VEb3duPXt0aGlzLm9uTW91c2VEb3duLmJpbmQodGhpcyl9IC8+O1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFnQkE7O0FBaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFCZSxNQUFNQSxTQUFOLFNBQXdCQyxjQUFBLENBQU1DLFNBQTlCLENBQXdEO0VBQ25FQyxXQUFXLENBQUNDLEtBQUQsRUFBZ0I7SUFDdkIsTUFBTUEsS0FBTjtJQUR1QixtREFhSkMsS0FBRCxJQUE2QjtNQUMvQyxLQUFLQyxRQUFMLENBQWM7UUFDVkMsUUFBUSxFQUFFO1VBQ05DLFFBQVEsRUFBRUgsS0FBSyxDQUFDSSxPQURWO1VBRU5DLFFBQVEsRUFBRUwsS0FBSyxDQUFDTTtRQUZWO01BREEsQ0FBZDtNQU9BQyxRQUFRLENBQUNDLGdCQUFULENBQTBCLFdBQTFCLEVBQXVDLEtBQUtDLEtBQUwsQ0FBV0MsV0FBbEQ7TUFDQUgsUUFBUSxDQUFDQyxnQkFBVCxDQUEwQixTQUExQixFQUFxQyxLQUFLQyxLQUFMLENBQVdFLFNBQWhEO0lBQ0gsQ0F2QjBCO0lBQUEsaURBeUJOWCxLQUFELElBQTZCO01BQzdDTyxRQUFRLENBQUNLLG1CQUFULENBQTZCLFdBQTdCLEVBQTBDLEtBQUtILEtBQUwsQ0FBV0MsV0FBckQ7TUFDQUgsUUFBUSxDQUFDSyxtQkFBVCxDQUE2QixTQUE3QixFQUF3QyxLQUFLSCxLQUFMLENBQVdFLFNBQW5EO01BQ0EsS0FBS1osS0FBTCxDQUFXWSxTQUFYLENBQXFCWCxLQUFyQjtJQUNILENBN0IwQjtJQUd2QixLQUFLUyxLQUFMLEdBQWE7TUFDVEMsV0FBVyxFQUFFLEtBQUtBLFdBQUwsQ0FBaUJHLElBQWpCLENBQXNCLElBQXRCLENBREo7TUFFVEYsU0FBUyxFQUFFLEtBQUtBLFNBQUwsQ0FBZUUsSUFBZixDQUFvQixJQUFwQixDQUZGO01BR1RYLFFBQVEsRUFBRTtRQUNOQyxRQUFRLEVBQUUsQ0FESjtRQUVORSxRQUFRLEVBQUU7TUFGSjtJQUhELENBQWI7RUFRSDs7RUFvQk9LLFdBQVcsQ0FBQ1YsS0FBRCxFQUEwQjtJQUN6QyxNQUFNYyxXQUFXLEdBQUcsS0FBS2YsS0FBTCxDQUFXZ0IsUUFBWCxDQUFvQixLQUFLTixLQUFMLENBQVdQLFFBQS9CLEVBQXlDRixLQUF6QyxDQUFwQjtJQUVBLEtBQUtDLFFBQUwsQ0FBYztNQUNWQyxRQUFRLEVBQUVZO0lBREEsQ0FBZDtFQUdIOztFQUVERSxNQUFNLEdBQUc7SUFDTCxvQkFBTztNQUFLLFNBQVMsRUFBRSxLQUFLakIsS0FBTCxDQUFXa0IsU0FBM0I7TUFBc0MsV0FBVyxFQUFFLEtBQUtDLFdBQUwsQ0FBaUJMLElBQWpCLENBQXNCLElBQXRCO0lBQW5ELEVBQVA7RUFDSDs7QUExQ2tFIn0=