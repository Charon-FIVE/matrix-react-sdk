"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _roomState = require("matrix-js-sdk/src/models/room-state");

var _classnames = _interopRequireDefault(require("classnames"));

var _event = require("matrix-js-sdk/src/@types/event");

var _BaseAvatar = _interopRequireDefault(require("./BaseAvatar"));

var _ImageView = _interopRequireDefault(require("../elements/ImageView"));

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _Modal = _interopRequireDefault(require("../../../Modal"));

var Avatar = _interopRequireWildcard(require("../../../Avatar"));

var _DMRoomMap = _interopRequireDefault(require("../../../utils/DMRoomMap"));

var _Media = require("../../../customisations/Media");

const _excluded = ["room", "oobData", "viewAvatarOnClick", "onClick", "className"];

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

class RoomAvatar extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "onRoomStateEvents", ev => {
      if (ev.getRoomId() !== this.props.room?.roomId || ev.getType() !== _event.EventType.RoomAvatar) return;
      this.setState({
        urls: RoomAvatar.getImageUrls(this.props)
      });
    });
    (0, _defineProperty2.default)(this, "onRoomAvatarClick", () => {
      const avatarUrl = Avatar.avatarUrlForRoom(this.props.room, null, null, null);
      const params = {
        src: avatarUrl,
        name: this.props.room.name
      };

      _Modal.default.createDialog(_ImageView.default, params, "mx_Dialog_lightbox", null, true);
    });
    this.state = {
      urls: RoomAvatar.getImageUrls(this.props)
    };
  }

  componentDidMount() {
    _MatrixClientPeg.MatrixClientPeg.get().on(_roomState.RoomStateEvent.Events, this.onRoomStateEvents);
  }

  componentWillUnmount() {
    const cli = _MatrixClientPeg.MatrixClientPeg.get();

    if (cli) {
      cli.removeListener(_roomState.RoomStateEvent.Events, this.onRoomStateEvents);
    }
  }

  static getDerivedStateFromProps(nextProps) {
    return {
      urls: RoomAvatar.getImageUrls(nextProps)
    };
  }

  static getImageUrls(props) {
    let oobAvatar = null;

    if (props.oobData.avatarUrl) {
      oobAvatar = (0, _Media.mediaFromMxc)(props.oobData.avatarUrl).getThumbnailOfSourceHttp(props.width, props.height, props.resizeMethod);
    }

    return [oobAvatar, // highest priority
    RoomAvatar.getRoomAvatarUrl(props)].filter(function (url) {
      return url !== null && url !== "";
    });
  }

  static getRoomAvatarUrl(props) {
    if (!props.room) return null;
    return Avatar.avatarUrlForRoom(props.room, props.width, props.height, props.resizeMethod);
  }

  render() {
    const _this$props = this.props,
          {
      room,
      oobData,
      viewAvatarOnClick,
      onClick,
      className
    } = _this$props,
          otherProps = (0, _objectWithoutProperties2.default)(_this$props, _excluded);
    const roomName = room ? room.name : oobData.name; // If the room is a DM, we use the other user's ID for the color hash
    // in order to match the room avatar with their avatar

    const idName = room ? _DMRoomMap.default.shared().getUserIdForRoomId(room.roomId) ?? room.roomId : oobData.roomId;
    return /*#__PURE__*/_react.default.createElement(_BaseAvatar.default, (0, _extends2.default)({}, otherProps, {
      className: (0, _classnames.default)(className, {
        mx_RoomAvatar_isSpaceRoom: room?.isSpaceRoom()
      }),
      name: roomName,
      idName: idName,
      urls: this.state.urls,
      onClick: viewAvatarOnClick && this.state.urls[0] ? this.onRoomAvatarClick : onClick
    }));
  }

}

exports.default = RoomAvatar;
(0, _defineProperty2.default)(RoomAvatar, "defaultProps", {
  width: 36,
  height: 36,
  resizeMethod: 'crop',
  oobData: {}
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSb29tQXZhdGFyIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiZXYiLCJnZXRSb29tSWQiLCJyb29tIiwicm9vbUlkIiwiZ2V0VHlwZSIsIkV2ZW50VHlwZSIsInNldFN0YXRlIiwidXJscyIsImdldEltYWdlVXJscyIsImF2YXRhclVybCIsIkF2YXRhciIsImF2YXRhclVybEZvclJvb20iLCJwYXJhbXMiLCJzcmMiLCJuYW1lIiwiTW9kYWwiLCJjcmVhdGVEaWFsb2ciLCJJbWFnZVZpZXciLCJzdGF0ZSIsImNvbXBvbmVudERpZE1vdW50IiwiTWF0cml4Q2xpZW50UGVnIiwiZ2V0Iiwib24iLCJSb29tU3RhdGVFdmVudCIsIkV2ZW50cyIsIm9uUm9vbVN0YXRlRXZlbnRzIiwiY29tcG9uZW50V2lsbFVubW91bnQiLCJjbGkiLCJyZW1vdmVMaXN0ZW5lciIsImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsIm5leHRQcm9wcyIsIm9vYkF2YXRhciIsIm9vYkRhdGEiLCJtZWRpYUZyb21NeGMiLCJnZXRUaHVtYm5haWxPZlNvdXJjZUh0dHAiLCJ3aWR0aCIsImhlaWdodCIsInJlc2l6ZU1ldGhvZCIsImdldFJvb21BdmF0YXJVcmwiLCJmaWx0ZXIiLCJ1cmwiLCJyZW5kZXIiLCJ2aWV3QXZhdGFyT25DbGljayIsIm9uQ2xpY2siLCJjbGFzc05hbWUiLCJvdGhlclByb3BzIiwicm9vbU5hbWUiLCJpZE5hbWUiLCJETVJvb21NYXAiLCJzaGFyZWQiLCJnZXRVc2VySWRGb3JSb29tSWQiLCJjbGFzc05hbWVzIiwibXhfUm9vbUF2YXRhcl9pc1NwYWNlUm9vbSIsImlzU3BhY2VSb29tIiwib25Sb29tQXZhdGFyQ2xpY2siXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy92aWV3cy9hdmF0YXJzL1Jvb21BdmF0YXIudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAxNSwgMjAxNiBPcGVuTWFya2V0IEx0ZFxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCwgeyBDb21wb25lbnRQcm9wcyB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFJvb20gfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbSc7XG5pbXBvcnQgeyBSZXNpemVNZXRob2QgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9AdHlwZXMvcGFydGlhbHMnO1xuaW1wb3J0IHsgTWF0cml4RXZlbnQgfSBmcm9tICdtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvZXZlbnQnO1xuaW1wb3J0IHsgUm9vbVN0YXRlRXZlbnQgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvbW9kZWxzL3Jvb20tc3RhdGVcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gXCJjbGFzc25hbWVzXCI7XG5pbXBvcnQgeyBFdmVudFR5cGUgfSBmcm9tIFwibWF0cml4LWpzLXNkay9zcmMvQHR5cGVzL2V2ZW50XCI7XG5cbmltcG9ydCBCYXNlQXZhdGFyIGZyb20gJy4vQmFzZUF2YXRhcic7XG5pbXBvcnQgSW1hZ2VWaWV3IGZyb20gJy4uL2VsZW1lbnRzL0ltYWdlVmlldyc7XG5pbXBvcnQgeyBNYXRyaXhDbGllbnRQZWcgfSBmcm9tICcuLi8uLi8uLi9NYXRyaXhDbGllbnRQZWcnO1xuaW1wb3J0IE1vZGFsIGZyb20gJy4uLy4uLy4uL01vZGFsJztcbmltcG9ydCAqIGFzIEF2YXRhciBmcm9tICcuLi8uLi8uLi9BdmF0YXInO1xuaW1wb3J0IERNUm9vbU1hcCBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvRE1Sb29tTWFwXCI7XG5pbXBvcnQgeyBtZWRpYUZyb21NeGMgfSBmcm9tIFwiLi4vLi4vLi4vY3VzdG9taXNhdGlvbnMvTWVkaWFcIjtcbmltcG9ydCB7IElPT0JEYXRhIH0gZnJvbSAnLi4vLi4vLi4vc3RvcmVzL1RocmVlcGlkSW52aXRlU3RvcmUnO1xuXG5pbnRlcmZhY2UgSVByb3BzIGV4dGVuZHMgT21pdDxDb21wb25lbnRQcm9wczx0eXBlb2YgQmFzZUF2YXRhcj4sIFwibmFtZVwiIHwgXCJpZE5hbWVcIiB8IFwidXJsXCIgfCBcIm9uQ2xpY2tcIj4ge1xuICAgIC8vIFJvb20gbWF5IGJlIGxlZnQgdW5zZXQgaGVyZSwgYnV0IGlmIGl0IGlzLFxuICAgIC8vIG9vYkRhdGEuYXZhdGFyVXJsIHNob3VsZCBiZSBzZXQgKGVsc2UgdGhlcmVcbiAgICAvLyB3b3VsZCBiZSBub3doZXJlIHRvIGdldCB0aGUgYXZhdGFyIGZyb20pXG4gICAgcm9vbT86IFJvb207XG4gICAgb29iRGF0YT86IElPT0JEYXRhICYge1xuICAgICAgICByb29tSWQ/OiBzdHJpbmc7XG4gICAgfTtcbiAgICB3aWR0aD86IG51bWJlcjtcbiAgICBoZWlnaHQ/OiBudW1iZXI7XG4gICAgcmVzaXplTWV0aG9kPzogUmVzaXplTWV0aG9kO1xuICAgIHZpZXdBdmF0YXJPbkNsaWNrPzogYm9vbGVhbjtcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG4gICAgb25DbGljaz8oKTogdm9pZDtcbn1cblxuaW50ZXJmYWNlIElTdGF0ZSB7XG4gICAgdXJsczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb21BdmF0YXIgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8SVByb3BzLCBJU3RhdGU+IHtcbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgd2lkdGg6IDM2LFxuICAgICAgICBoZWlnaHQ6IDM2LFxuICAgICAgICByZXNpemVNZXRob2Q6ICdjcm9wJyxcbiAgICAgICAgb29iRGF0YToge30sXG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKHByb3BzOiBJUHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICB1cmxzOiBSb29tQXZhdGFyLmdldEltYWdlVXJscyh0aGlzLnByb3BzKSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIE1hdHJpeENsaWVudFBlZy5nZXQoKS5vbihSb29tU3RhdGVFdmVudC5FdmVudHMsIHRoaXMub25Sb29tU3RhdGVFdmVudHMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcbiAgICAgICAgY29uc3QgY2xpID0gTWF0cml4Q2xpZW50UGVnLmdldCgpO1xuICAgICAgICBpZiAoY2xpKSB7XG4gICAgICAgICAgICBjbGkucmVtb3ZlTGlzdGVuZXIoUm9vbVN0YXRlRXZlbnQuRXZlbnRzLCB0aGlzLm9uUm9vbVN0YXRlRXZlbnRzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RGVyaXZlZFN0YXRlRnJvbVByb3BzKG5leHRQcm9wczogSVByb3BzKTogSVN0YXRlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHVybHM6IFJvb21BdmF0YXIuZ2V0SW1hZ2VVcmxzKG5leHRQcm9wcyksXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblJvb21TdGF0ZUV2ZW50cyA9IChldjogTWF0cml4RXZlbnQpID0+IHtcbiAgICAgICAgaWYgKGV2LmdldFJvb21JZCgpICE9PSB0aGlzLnByb3BzLnJvb20/LnJvb21JZCB8fCBldi5nZXRUeXBlKCkgIT09IEV2ZW50VHlwZS5Sb29tQXZhdGFyKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgICB1cmxzOiBSb29tQXZhdGFyLmdldEltYWdlVXJscyh0aGlzLnByb3BzKSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgc3RhdGljIGdldEltYWdlVXJscyhwcm9wczogSVByb3BzKTogc3RyaW5nW10ge1xuICAgICAgICBsZXQgb29iQXZhdGFyID0gbnVsbDtcbiAgICAgICAgaWYgKHByb3BzLm9vYkRhdGEuYXZhdGFyVXJsKSB7XG4gICAgICAgICAgICBvb2JBdmF0YXIgPSBtZWRpYUZyb21NeGMocHJvcHMub29iRGF0YS5hdmF0YXJVcmwpLmdldFRodW1ibmFpbE9mU291cmNlSHR0cChcbiAgICAgICAgICAgICAgICBwcm9wcy53aWR0aCxcbiAgICAgICAgICAgICAgICBwcm9wcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgcHJvcHMucmVzaXplTWV0aG9kLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgb29iQXZhdGFyLCAvLyBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgICAgICBSb29tQXZhdGFyLmdldFJvb21BdmF0YXJVcmwocHJvcHMpLFxuICAgICAgICBdLmZpbHRlcihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgICAgIHJldHVybiAodXJsICE9PSBudWxsICYmIHVybCAhPT0gXCJcIik7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGdldFJvb21BdmF0YXJVcmwocHJvcHM6IElQcm9wcyk6IHN0cmluZyB7XG4gICAgICAgIGlmICghcHJvcHMucm9vbSkgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgcmV0dXJuIEF2YXRhci5hdmF0YXJVcmxGb3JSb29tKHByb3BzLnJvb20sIHByb3BzLndpZHRoLCBwcm9wcy5oZWlnaHQsIHByb3BzLnJlc2l6ZU1ldGhvZCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblJvb21BdmF0YXJDbGljayA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgYXZhdGFyVXJsID0gQXZhdGFyLmF2YXRhclVybEZvclJvb20oXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJvb20sXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIHNyYzogYXZhdGFyVXJsLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5wcm9wcy5yb29tLm5hbWUsXG4gICAgICAgIH07XG5cbiAgICAgICAgTW9kYWwuY3JlYXRlRGlhbG9nKEltYWdlVmlldywgcGFyYW1zLCBcIm14X0RpYWxvZ19saWdodGJveFwiLCBudWxsLCB0cnVlKTtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgY29uc3QgeyByb29tLCBvb2JEYXRhLCB2aWV3QXZhdGFyT25DbGljaywgb25DbGljaywgY2xhc3NOYW1lLCAuLi5vdGhlclByb3BzIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgICAgIGNvbnN0IHJvb21OYW1lID0gcm9vbSA/IHJvb20ubmFtZSA6IG9vYkRhdGEubmFtZTtcbiAgICAgICAgLy8gSWYgdGhlIHJvb20gaXMgYSBETSwgd2UgdXNlIHRoZSBvdGhlciB1c2VyJ3MgSUQgZm9yIHRoZSBjb2xvciBoYXNoXG4gICAgICAgIC8vIGluIG9yZGVyIHRvIG1hdGNoIHRoZSByb29tIGF2YXRhciB3aXRoIHRoZWlyIGF2YXRhclxuICAgICAgICBjb25zdCBpZE5hbWUgPSByb29tID8gKERNUm9vbU1hcC5zaGFyZWQoKS5nZXRVc2VySWRGb3JSb29tSWQocm9vbS5yb29tSWQpID8/IHJvb20ucm9vbUlkKSA6IG9vYkRhdGEucm9vbUlkO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QmFzZUF2YXRhclxuICAgICAgICAgICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyhjbGFzc05hbWUsIHtcbiAgICAgICAgICAgICAgICAgICAgbXhfUm9vbUF2YXRhcl9pc1NwYWNlUm9vbTogcm9vbT8uaXNTcGFjZVJvb20oKSxcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICBuYW1lPXtyb29tTmFtZX1cbiAgICAgICAgICAgICAgICBpZE5hbWU9e2lkTmFtZX1cbiAgICAgICAgICAgICAgICB1cmxzPXt0aGlzLnN0YXRlLnVybHN9XG4gICAgICAgICAgICAgICAgb25DbGljaz17dmlld0F2YXRhck9uQ2xpY2sgJiYgdGhpcy5zdGF0ZS51cmxzWzBdID8gdGhpcy5vblJvb21BdmF0YXJDbGljayA6IG9uQ2xpY2t9XG4gICAgICAgICAgICAvPlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBZ0JBOztBQUlBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQXVCZSxNQUFNQSxVQUFOLFNBQXlCQyxjQUFBLENBQU1DLFNBQS9CLENBQXlEO0VBUXBFQyxXQUFXLENBQUNDLEtBQUQsRUFBZ0I7SUFDdkIsTUFBTUEsS0FBTjtJQUR1Qix5REF5QkVDLEVBQUQsSUFBcUI7TUFDN0MsSUFBSUEsRUFBRSxD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