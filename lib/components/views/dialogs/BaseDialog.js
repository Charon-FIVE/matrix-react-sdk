"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _reactFocusLock = _interopRequireDefault(require("react-focus-lock"));

var _classnames = _interopRequireDefault(require("classnames"));

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var _MatrixClientPeg = require("../../../MatrixClientPeg");

var _languageHandler = require("../../../languageHandler");

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

var _Heading = _interopRequireDefault(require("../typography/Heading"));

var _PosthogTrackers = require("../../../PosthogTrackers");

var _KeyBindingsManager = require("../../../KeyBindingsManager");

var _KeyboardShortcuts = require("../../../accessibility/KeyboardShortcuts");

/*
Copyright 2017 Vector Creations Ltd
Copyright 2018, 2019 New Vector Ltd
Copyright 2019 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

/*
 * Basic container for modal dialogs.
 *
 * Includes a div for the title, and a keypress handler which cancels the
 * dialog on escape.
 */
class BaseDialog extends _react.default.Component {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "matrixClient", void 0);
    (0, _defineProperty2.default)(this, "onKeyDown", e => {
      if (this.props.onKeyDown) {
        this.props.onKeyDown(e);
      }

      const action = (0, _KeyBindingsManager.getKeyBindingsManager)().getAccessibilityAction(e);

      switch (action) {
        case _KeyboardShortcuts.KeyBindingAction.Escape:
          if (!this.props.hasCancel) break;
          e.stopPropagation();
          e.preventDefault();
          this.props.onFinished(false);
          break;
      }
    });
    (0, _defineProperty2.default)(this, "onCancelClick", e => {
      this.props.onFinished(false);
    });
    this.matrixClient = _MatrixClientPeg.MatrixClientPeg.get();
  }

  render() {
    let cancelButton;

    if (this.props.hasCancel) {
      cancelButton = /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
        onClick: this.onCancelClick,
        className: "mx_Dialog_cancelButton",
        "aria-label": (0, _languageHandler._t)("Close dialog")
      });
    }

    let headerImage;

    if (this.props.headerImage) {
      headerImage = /*#__PURE__*/_react.default.createElement("img", {
        className: "mx_Dialog_titleImage",
        src: this.props.headerImage,
        alt: ""
      });
    }

    const lockProps = {
      "onKeyDown": this.onKeyDown,
      "role": "dialog",
      // This should point to a node describing the dialog.
      // If we were about to completely follow this recommendation we'd need to
      // make all the components relying on BaseDialog to be aware of it.
      // So instead we will use the whole content as the description.
      // Description comes first and if the content contains more text,
      // AT users can skip its presentation.
      "aria-describedby": this.props.contentId
    };

    if (this.props["aria-label"]) {
      lockProps["aria-label"] = this.props["aria-label"];
    } else {
      lockProps["aria-labelledby"] = "mx_BaseDialog_title";
    }

    return /*#__PURE__*/_react.default.createElement(_MatrixClientContext.default.Provider, {
      value: this.matrixClient
    }, /*#__PURE__*/_react.default.createElement(_PosthogTrackers.PosthogScreenTracker, {
      screenName: this.props.screenName
    }), /*#__PURE__*/_react.default.createElement(_reactFocusLock.default, {
      returnFocus: true,
      lockProps: lockProps,
      className: (0, _classnames.default)({
        [this.props.className]: true,
        'mx_Dialog_fixedWidth': this.props.fixedWidth
      })
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: (0, _classnames.default)('mx_Dialog_header', {
        'mx_Dialog_headerWithButton': !!this.props.headerButton,
        'mx_Dialog_headerWithCancel': !!cancelButton
      })
    }, /*#__PURE__*/_react.default.createElement(_Heading.default, {
      size: "h2",
      className: (0, _classnames.default)('mx_Dialog_title', this.props.titleClass),
      id: "mx_BaseDialog_title"
    }, headerImage, this.props.title), this.props.headerButton, cancelButton), this.props.children));
  }

}

exports.default = BaseDialog;
(0, _defineProperty2.default)(BaseDialog, "defaultProps", {
  hasCancel: true,
  fixedWidth: true
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCYXNlRGlhbG9nIiwiUmVhY3QiLCJDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiZSIsIm9uS2V5RG93biIsImFjdGlvbiIsImdldEtleUJpbmRpbmdzTWFuYWdlciIsImdldEFjY2Vzc2liaWxpdHlBY3Rpb24iLCJLZXlCaW5kaW5nQWN0aW9uIiwiRXNjYXBlIiwiaGFzQ2FuY2VsIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJvbkZpbmlzaGVkIiwibWF0cml4Q2xpZW50IiwiTWF0cml4Q2xpZW50UGVnIiwiZ2V0IiwicmVuZGVyIiwiY2FuY2VsQnV0dG9uIiwib25DYW5jZWxDbGljayIsIl90IiwiaGVhZGVySW1hZ2UiLCJsb2NrUHJvcHMiLCJjb250ZW50SWQiLCJzY3JlZW5OYW1lIiwiY2xhc3NOYW1lcyIsImNsYXNzTmFtZSIsImZpeGVkV2lkdGgiLCJoZWFkZXJCdXR0b24iLCJ0aXRsZUNsYXNzIiwidGl0bGUiLCJjaGlsZHJlbiJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3ZpZXdzL2RpYWxvZ3MvQmFzZURpYWxvZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDE3IFZlY3RvciBDcmVhdGlvbnMgTHRkXG5Db3B5cmlnaHQgMjAxOCwgMjAxOSBOZXcgVmVjdG9yIEx0ZFxuQ29weXJpZ2h0IDIwMTkgVGhlIE1hdHJpeC5vcmcgRm91bmRhdGlvbiBDLkkuQy5cblxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbnlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbllvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuXG4gICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cblVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbmRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbldJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxubGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IEZvY3VzTG9jayBmcm9tICdyZWFjdC1mb2N1cy1sb2NrJztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50IH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL2NsaWVudFwiO1xuXG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiwgeyBCdXR0b25FdmVudCB9IGZyb20gJy4uL2VsZW1lbnRzL0FjY2Vzc2libGVCdXR0b24nO1xuaW1wb3J0IHsgTWF0cml4Q2xpZW50UGVnIH0gZnJvbSAnLi4vLi4vLi4vTWF0cml4Q2xpZW50UGVnJztcbmltcG9ydCB7IF90IH0gZnJvbSBcIi4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IE1hdHJpeENsaWVudENvbnRleHQgZnJvbSBcIi4uLy4uLy4uL2NvbnRleHRzL01hdHJpeENsaWVudENvbnRleHRcIjtcbmltcG9ydCBIZWFkaW5nIGZyb20gJy4uL3R5cG9ncmFwaHkvSGVhZGluZyc7XG5pbXBvcnQgeyBJRGlhbG9nUHJvcHMgfSBmcm9tIFwiLi9JRGlhbG9nUHJvcHNcIjtcbmltcG9ydCB7IFBvc3Rob2dTY3JlZW5UcmFja2VyLCBTY3JlZW5OYW1lIH0gZnJvbSBcIi4uLy4uLy4uL1Bvc3Rob2dUcmFja2Vyc1wiO1xuaW1wb3J0IHsgZ2V0S2V5QmluZGluZ3NNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL0tleUJpbmRpbmdzTWFuYWdlclwiO1xuaW1wb3J0IHsgS2V5QmluZGluZ0FjdGlvbiB9IGZyb20gXCIuLi8uLi8uLi9hY2Nlc3NpYmlsaXR5L0tleWJvYXJkU2hvcnRjdXRzXCI7XG5cbmludGVyZmFjZSBJUHJvcHMgZXh0ZW5kcyBJRGlhbG9nUHJvcHMge1xuICAgIC8vIFdoZXRoZXIgdGhlIGRpYWxvZyBzaG91bGQgaGF2ZSBhICdjbG9zZScgYnV0dG9uIHRoYXQgd2lsbFxuICAgIC8vIGNhdXNlIHRoZSBkaWFsb2cgdG8gYmUgY2FuY2VsbGVkLiBUaGlzIHNob3VsZCBvbmx5IGJlIHNldFxuICAgIC8vIHRvIGZhbHNlIGlmIHRoZXJlIGlzIG5vdGhpbmcgdGhlIGFwcCBjYW4gc2Vuc2libHkgZG8gaWYgdGhlXG4gICAgLy8gZGlhbG9nIGlzIGNhbmNlbGxlZCwgZWcuIFwiV2UgY2FuJ3QgcmVzdG9yZSB5b3VyIHNlc3Npb24gYW5kXG4gICAgLy8gdGhlIGFwcCBjYW5ub3Qgd29ya1wiLiBEZWZhdWx0OiB0cnVlLlxuICAgIGhhc0NhbmNlbD86IGJvb2xlYW47XG5cbiAgICAvLyBjYWxsZWQgd2hlbiBhIGtleSBpcyBwcmVzc2VkXG4gICAgb25LZXlEb3duPzogKGU6IEtleWJvYXJkRXZlbnQgfCBSZWFjdC5LZXlib2FyZEV2ZW50KSA9PiB2b2lkO1xuXG4gICAgLy8gQ1NTIGNsYXNzIHRvIGFwcGx5IHRvIGRpYWxvZyBkaXZcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XG5cbiAgICAvLyBpZiB0cnVlLCBkaWFsb2cgY29udGFpbmVyIGlzIDYwJSBvZiB0aGUgdmlld3BvcnQgd2lkdGguIE90aGVyd2lzZSxcbiAgICAvLyB0aGUgY29udGFpbmVyIHdpbGwgaGF2ZSBubyBmaXhlZCBzaXplLCBhbGxvd2luZyBpdHMgY29udGVudHMgdG9cbiAgICAvLyBkZXRlcm1pbmUgaXRzIHNpemUuIERlZmF1bHQ6IHRydWUuXG4gICAgZml4ZWRXaWR0aD86IGJvb2xlYW47XG5cbiAgICAvLyBUaXRsZSBmb3IgdGhlIGRpYWxvZy5cbiAgICB0aXRsZT86IEpTWC5FbGVtZW50IHwgc3RyaW5nO1xuICAgIC8vIFNwZWNpZmljIGFyaWEgbGFiZWwgdG8gdXNlLCBpZiBub3QgcHJvdmlkZWQgd2lsbCBzZXQgYXJpYS1sYWJlbGxlZEJ5IHRvIG14X0RpYWxvZ190aXRsZVxuICAgIFwiYXJpYS1sYWJlbFwiPzogc3RyaW5nO1xuXG4gICAgLy8gUGF0aCB0byBhbiBpY29uIHRvIHB1dCBpbiB0aGUgaGVhZGVyXG4gICAgaGVhZGVySW1hZ2U/OiBzdHJpbmc7XG5cbiAgICAvLyBjaGlsZHJlbiBzaG91bGQgYmUgdGhlIGNvbnRlbnQgb2YgdGhlIGRpYWxvZ1xuICAgIGNoaWxkcmVuPzogUmVhY3QuUmVhY3ROb2RlO1xuXG4gICAgLy8gSWQgb2YgY29udGVudCBlbGVtZW50XG4gICAgLy8gSWYgcHJvdmlkZWQsIHRoaXMgaXMgdXNlZCB0byBhZGQgYSBhcmlhLWRlc2NyaWJlZGJ5IGF0dHJpYnV0ZVxuICAgIGNvbnRlbnRJZD86IHN0cmluZztcblxuICAgIC8vIG9wdGlvbmFsIGFkZGl0aW9uYWwgY2xhc3MgZm9yIHRoZSB0aXRsZSBlbGVtZW50IChiYXNpY2FsbHkgYW55dGhpbmcgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIGNsYXNzbmFtZXMpXG4gICAgdGl0bGVDbGFzcz86IHN0cmluZyB8IHN0cmluZ1tdO1xuXG4gICAgaGVhZGVyQnV0dG9uPzogSlNYLkVsZW1lbnQ7XG5cbiAgICAvLyBvcHRpb25hbCBQb3N0aG9nIFNjcmVlbk5hbWUgdG8gc3VwcGx5IGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhpcyBkaWFsb2dcbiAgICBzY3JlZW5OYW1lPzogU2NyZWVuTmFtZTtcbn1cblxuLypcbiAqIEJhc2ljIGNvbnRhaW5lciBmb3IgbW9kYWwgZGlhbG9ncy5cbiAqXG4gKiBJbmNsdWRlcyBhIGRpdiBmb3IgdGhlIHRpdGxlLCBhbmQgYSBrZXlwcmVzcyBoYW5kbGVyIHdoaWNoIGNhbmNlbHMgdGhlXG4gKiBkaWFsb2cgb24gZXNjYXBlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCYXNlRGlhbG9nIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PElQcm9wcz4ge1xuICAgIHByaXZhdGUgbWF0cml4Q2xpZW50OiBNYXRyaXhDbGllbnQ7XG5cbiAgICBwdWJsaWMgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICAgICAgaGFzQ2FuY2VsOiB0cnVlLFxuICAgICAgICBmaXhlZFdpZHRoOiB0cnVlLFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgdGhpcy5tYXRyaXhDbGllbnQgPSBNYXRyaXhDbGllbnRQZWcuZ2V0KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvbktleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCB8IFJlYWN0LktleWJvYXJkRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub25LZXlEb3duKSB7XG4gICAgICAgICAgICB0aGlzLnByb3BzLm9uS2V5RG93bihlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGdldEtleUJpbmRpbmdzTWFuYWdlcigpLmdldEFjY2Vzc2liaWxpdHlBY3Rpb24oZSk7XG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIEtleUJpbmRpbmdBY3Rpb24uRXNjYXBlOlxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcm9wcy5oYXNDYW5jZWwpIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5vbkZpbmlzaGVkKGZhbHNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcml2YXRlIG9uQ2FuY2VsQ2xpY2sgPSAoZTogQnV0dG9uRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5wcm9wcy5vbkZpbmlzaGVkKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgcHVibGljIHJlbmRlcigpOiBKU1guRWxlbWVudCB7XG4gICAgICAgIGxldCBjYW5jZWxCdXR0b247XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmhhc0NhbmNlbCkge1xuICAgICAgICAgICAgY2FuY2VsQnV0dG9uID0gKFxuICAgICAgICAgICAgICAgIDxBY2Nlc3NpYmxlQnV0dG9uIG9uQ2xpY2s9e3RoaXMub25DYW5jZWxDbGlja30gY2xhc3NOYW1lPVwibXhfRGlhbG9nX2NhbmNlbEJ1dHRvblwiIGFyaWEtbGFiZWw9e190KFwiQ2xvc2UgZGlhbG9nXCIpfSAvPlxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXJJbWFnZTtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuaGVhZGVySW1hZ2UpIHtcbiAgICAgICAgICAgIGhlYWRlckltYWdlID0gPGltZyBjbGFzc05hbWU9XCJteF9EaWFsb2dfdGl0bGVJbWFnZVwiIHNyYz17dGhpcy5wcm9wcy5oZWFkZXJJbWFnZX0gYWx0PVwiXCIgLz47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBsb2NrUHJvcHMgPSB7XG4gICAgICAgICAgICBcIm9uS2V5RG93blwiOiB0aGlzLm9uS2V5RG93bixcbiAgICAgICAgICAgIFwicm9sZVwiOiBcImRpYWxvZ1wiLFxuICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgcG9pbnQgdG8gYSBub2RlIGRlc2NyaWJpbmcgdGhlIGRpYWxvZy5cbiAgICAgICAgICAgIC8vIElmIHdlIHdlcmUgYWJvdXQgdG8gY29tcGxldGVseSBmb2xsb3cgdGhpcyByZWNvbW1lbmRhdGlvbiB3ZSdkIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIG1ha2UgYWxsIHRoZSBjb21wb25lbnRzIHJlbHlpbmcgb24gQmFzZURpYWxvZyB0byBiZSBhd2FyZSBvZiBpdC5cbiAgICAgICAgICAgIC8vIFNvIGluc3RlYWQgd2Ugd2lsbCB1c2UgdGhlIHdob2xlIGNvbnRlbnQgYXMgdGhlIGRlc2NyaXB0aW9uLlxuICAgICAgICAgICAgLy8gRGVzY3JpcHRpb24gY29tZXMgZmlyc3QgYW5kIGlmIHRoZSBjb250ZW50IGNvbnRhaW5zIG1vcmUgdGV4dCxcbiAgICAgICAgICAgIC8vIEFUIHVzZXJzIGNhbiBza2lwIGl0cyBwcmVzZW50YXRpb24uXG4gICAgICAgICAgICBcImFyaWEtZGVzY3JpYmVkYnlcIjogdGhpcy5wcm9wcy5jb250ZW50SWQsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHNbXCJhcmlhLWxhYmVsXCJdKSB7XG4gICAgICAgICAgICBsb2NrUHJvcHNbXCJhcmlhLWxhYmVsXCJdID0gdGhpcy5wcm9wc1tcImFyaWEtbGFiZWxcIl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2NrUHJvcHNbXCJhcmlhLWxhYmVsbGVkYnlcIl0gPSBcIm14X0Jhc2VEaWFsb2dfdGl0bGVcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TWF0cml4Q2xpZW50Q29udGV4dC5Qcm92aWRlciB2YWx1ZT17dGhpcy5tYXRyaXhDbGllbnR9PlxuICAgICAgICAgICAgICAgIDxQb3N0aG9nU2NyZWVuVHJhY2tlciBzY3JlZW5OYW1lPXt0aGlzLnByb3BzLnNjcmVlbk5hbWV9IC8+XG4gICAgICAgICAgICAgICAgPEZvY3VzTG9ja1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Gb2N1cz17dHJ1ZX1cbiAgICAgICAgICAgICAgICAgICAgbG9ja1Byb3BzPXtsb2NrUHJvcHN9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBbdGhpcy5wcm9wcy5jbGFzc05hbWVdOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ214X0RpYWxvZ19maXhlZFdpZHRoJzogdGhpcy5wcm9wcy5maXhlZFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdteF9EaWFsb2dfaGVhZGVyJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ214X0RpYWxvZ19oZWFkZXJXaXRoQnV0dG9uJzogISF0aGlzLnByb3BzLmhlYWRlckJ1dHRvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdteF9EaWFsb2dfaGVhZGVyV2l0aENhbmNlbCc6ICEhY2FuY2VsQnV0dG9uLFxuICAgICAgICAgICAgICAgICAgICB9KX0+XG4gICAgICAgICAgICAgICAgICAgICAgICA8SGVhZGluZyBzaXplPSdoMicgY2xhc3NOYW1lPXtjbGFzc05hbWVzKCdteF9EaWFsb2dfdGl0bGUnLCB0aGlzLnByb3BzLnRpdGxlQ2xhc3MpfSBpZD0nbXhfQmFzZURpYWxvZ190aXRsZSc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyBoZWFkZXJJbWFnZSB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnByb3BzLnRpdGxlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvSGVhZGluZz5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgdGhpcy5wcm9wcy5oZWFkZXJCdXR0b24gfVxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjYW5jZWxCdXR0b24gfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgeyB0aGlzLnByb3BzLmNoaWxkcmVuIH1cbiAgICAgICAgICAgICAgICA8L0ZvY3VzTG9jaz5cbiAgICAgICAgICAgIDwvTWF0cml4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