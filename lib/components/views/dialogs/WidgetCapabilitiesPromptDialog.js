"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _matrixWidgetApi = require("matrix-widget-api");

var _utils = require("matrix-js-sdk/src/utils");

var _BaseDialog = _interopRequireDefault(require("./BaseDialog"));

var _languageHandler = require("../../../languageHandler");

var _objects = require("../../../utils/objects");

var _StyledCheckbox = _interopRequireDefault(require("../elements/StyledCheckbox"));

var _DialogButtons = _interopRequireDefault(require("../elements/DialogButtons"));

var _LabelledToggleSwitch = _interopRequireDefault(require("../elements/LabelledToggleSwitch"));

var _CapabilityText = require("../../../widgets/CapabilityText");

/*
Copyright 2020 - 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
class WidgetCapabilitiesPromptDialog extends _react.default.PureComponent {
  constructor(props) {
    super(props);
    (0, _defineProperty2.default)(this, "eventPermissionsMap", new Map());
    (0, _defineProperty2.default)(this, "onToggle", capability => {
      const newStates = (0, _objects.objectShallowClone)(this.state.booleanStates);
      newStates[capability] = !newStates[capability];
      this.setState({
        booleanStates: newStates
      });
    });
    (0, _defineProperty2.default)(this, "onRememberSelectionChange", newVal => {
      this.setState({
        rememberSelection: newVal
      });
    });
    (0, _defineProperty2.default)(this, "onSubmit", async ev => {
      this.closeAndTryRemember(Object.entries(this.state.booleanStates).filter(_ref => {
        let [_, isSelected] = _ref;
        return isSelected;
      }).map(_ref2 => {
        let [cap] = _ref2;
        return cap;
      }));
    });
    (0, _defineProperty2.default)(this, "onReject", async ev => {
      this.closeAndTryRemember([]); // nothing was approved
    });

    const parsedEvents = _matrixWidgetApi.WidgetEventCapability.findEventCapabilities(this.props.requestedCapabilities);

    parsedEvents.forEach(e => this.eventPermissionsMap.set(e.raw, e));
    const states = {};
    this.props.requestedCapabilities.forEach(c => states[c] = true);
    this.state = {
      booleanStates: states,
      rememberSelection: true
    };
  }

  closeAndTryRemember(approved) {
    this.props.onFinished({
      approved,
      remember: this.state.rememberSelection
    });
  }

  render() {
    // We specifically order the timeline capabilities down to the bottom. The capability text
    // generation cares strongly about this.
    const orderedCapabilities = Object.entries(this.state.booleanStates).sort((_ref3, _ref4) => {
      let [capA] = _ref3;
      let [capB] = _ref4;
      const isTimelineA = (0, _matrixWidgetApi.isTimelineCapability)(capA);
      const isTimelineB = (0, _matrixWidgetApi.isTimelineCapability)(capB);
      if (!isTimelineA && !isTimelineB) return (0, _utils.lexicographicCompare)(capA, capB);
      if (isTimelineA && !isTimelineB) return 1;
      if (!isTimelineA && isTimelineB) return -1;
      if (isTimelineA && isTimelineB) return (0, _utils.lexicographicCompare)(capA, capB);
      return 0;
    });
    const checkboxRows = orderedCapabilities.map((_ref5, i) => {
      let [cap, isChecked] = _ref5;

      const text = _CapabilityText.CapabilityText.for(cap, this.props.widgetKind);

      const byline = text.byline ? /*#__PURE__*/_react.default.createElement("span", {
        className: "mx_WidgetCapabilitiesPromptDialog_byline"
      }, text.byline) : null;
      return /*#__PURE__*/_react.default.createElement("div", {
        className: "mx_WidgetCapabilitiesPromptDialog_cap",
        key: cap + i
      }, /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
        checked: isChecked,
        onChange: () => this.onToggle(cap)
      }, text.primary), byline);
    });
    return /*#__PURE__*/_react.default.createElement(_BaseDialog.default, {
      className: "mx_WidgetCapabilitiesPromptDialog",
      onFinished: this.props.onFinished,
      title: (0, _languageHandler._t)("Approve widget permissions")
    }, /*#__PURE__*/_react.default.createElement("form", {
      onSubmit: this.onSubmit
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_Dialog_content"
    }, /*#__PURE__*/_react.default.createElement("div", {
      className: "text-muted"
    }, (0, _languageHandler._t)("This widget would like to:")), checkboxRows, /*#__PURE__*/_react.default.createElement(_DialogButtons.default, {
      primaryButton: (0, _languageHandler._t)("Approve"),
      cancelButton: (0, _languageHandler._t)("Decline All"),
      onPrimaryButtonClick: this.onSubmit,
      onCancel: this.onReject,
      additive: /*#__PURE__*/_react.default.createElement(_LabelledToggleSwitch.default, {
        value: this.state.rememberSelection,
        toggleInFront: true,
        onChange: this.onRememberSelectionChange,
        label: (0, _languageHandler._t)("Remember my selection for this widget")
      })
    }))));
  }

}

exports.default = WidgetCapabilitiesPromptDialog;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJXaWRnZXRDYXBhYmlsaXRpZXNQcm9tcHREaWFsb2ciLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJjb25zdHJ1Y3RvciIsInByb3BzIiwiTWFwIiwiY2FwYWJpbGl0eSIsIm5ld1N0YXRlcyIsIm9iamVjdFNoYWxsb3dDbG9uZSIsInN0YXRlIiwiYm9vbGVhblN0YXRlcyIsInNldFN0YXRlIiwibmV3VmFsIiwicmVtZW1iZXJTZWxlY3Rpb24iLCJldiIsImNsb3NlQW5kVHJ5UmVtZW1iZXIiLCJPYmplY3QiLCJlbnRyaWVzIiwiZmlsdGVyIiwiXyIsImlzU2VsZWN0ZWQiLCJtYXAiLCJjYXAiLCJwYXJzZWRFdmVudHMiLCJXaWRnZXRFdmVudENhcGFiaWxpdHkiLCJmaW5kRXZlbnRDYXBhYmlsaXRpZXMiLCJyZXF1ZXN0ZWRDYXBhYmlsaXRpZXMiLCJmb3JFYWNoIiwiZSIsImV2ZW50UGVybWlzc2lvbnNNYXAiLCJzZXQiLCJyYXciLCJzdGF0ZXMiLCJjIiwiYXBwcm92ZWQiLCJvbkZpbmlzaGVkIiwicmVtZW1iZXIiLCJyZW5kZXIiLCJvcmRlcmVkQ2FwYWJpbGl0aWVzIiwic29ydCIsImNhcEEiLCJjYXBCIiwiaXNUaW1lbGluZUEiLCJpc1RpbWVsaW5lQ2FwYWJpbGl0eSIsImlzVGltZWxpbmVCIiwibGV4aWNvZ3JhcGhpY0NvbXBhcmUiLCJjaGVja2JveFJvd3MiLCJpIiwiaXNDaGVja2VkIiwidGV4dCIsIkNhcGFiaWxpdHlUZXh0IiwiZm9yIiwid2lkZ2V0S2luZCIsImJ5bGluZSIsIm9uVG9nZ2xlIiwicHJpbWFyeSIsIl90Iiwib25TdWJtaXQiLCJvblJlamVjdCIsIm9uUmVtZW1iZXJTZWxlY3Rpb25DaGFuZ2UiXSwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy92aWV3cy9kaWFsb2dzL1dpZGdldENhcGFiaWxpdGllc1Byb21wdERpYWxvZy50c3giXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkNvcHlyaWdodCAyMDIwIC0gMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge1xuICAgIENhcGFiaWxpdHksXG4gICAgaXNUaW1lbGluZUNhcGFiaWxpdHksXG4gICAgV2lkZ2V0LFxuICAgIFdpZGdldEV2ZW50Q2FwYWJpbGl0eSxcbiAgICBXaWRnZXRLaW5kLFxufSBmcm9tIFwibWF0cml4LXdpZGdldC1hcGlcIjtcbmltcG9ydCB7IGxleGljb2dyYXBoaWNDb21wYXJlIH0gZnJvbSBcIm1hdHJpeC1qcy1zZGsvc3JjL3V0aWxzXCI7XG5cbmltcG9ydCBCYXNlRGlhbG9nIGZyb20gXCIuL0Jhc2VEaWFsb2dcIjtcbmltcG9ydCB7IF90IH0gZnJvbSBcIi4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlclwiO1xuaW1wb3J0IHsgSURpYWxvZ1Byb3BzIH0gZnJvbSBcIi4vSURpYWxvZ1Byb3BzXCI7XG5pbXBvcnQgeyBvYmplY3RTaGFsbG93Q2xvbmUgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbHMvb2JqZWN0c1wiO1xuaW1wb3J0IFN0eWxlZENoZWNrYm94IGZyb20gXCIuLi9lbGVtZW50cy9TdHlsZWRDaGVja2JveFwiO1xuaW1wb3J0IERpYWxvZ0J1dHRvbnMgZnJvbSBcIi4uL2VsZW1lbnRzL0RpYWxvZ0J1dHRvbnNcIjtcbmltcG9ydCBMYWJlbGxlZFRvZ2dsZVN3aXRjaCBmcm9tIFwiLi4vZWxlbWVudHMvTGFiZWxsZWRUb2dnbGVTd2l0Y2hcIjtcbmltcG9ydCB7IENhcGFiaWxpdHlUZXh0IH0gZnJvbSBcIi4uLy4uLy4uL3dpZGdldHMvQ2FwYWJpbGl0eVRleHRcIjtcblxuaW50ZXJmYWNlIElQcm9wcyBleHRlbmRzIElEaWFsb2dQcm9wcyB7XG4gICAgcmVxdWVzdGVkQ2FwYWJpbGl0aWVzOiBTZXQ8Q2FwYWJpbGl0eT47XG4gICAgd2lkZ2V0OiBXaWRnZXQ7XG4gICAgd2lkZ2V0S2luZDogV2lkZ2V0S2luZDsgLy8gVE9ETzogUmVmYWN0b3IgaW50byB0aGUgV2lkZ2V0IGNsYXNzXG59XG5cbmludGVyZmFjZSBJQm9vbGVhblN0YXRlcyB7XG4gICAgLy8gQHRzLWlnbm9yZSAtIFRTIHdhbnRzIGEgc3RyaW5nIGtleSwgYnV0IHdlIGtub3cgYmV0dGVyXG4gICAgW2NhcGFiaWxpdHk6IENhcGFiaWxpdHldOiBib29sZWFuO1xufVxuXG5pbnRlcmZhY2UgSVN0YXRlIHtcbiAgICBib29sZWFuU3RhdGVzOiBJQm9vbGVhblN0YXRlcztcbiAgICByZW1lbWJlclNlbGVjdGlvbjogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2lkZ2V0Q2FwYWJpbGl0aWVzUHJvbXB0RGlhbG9nIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudDxJUHJvcHMsIElTdGF0ZT4ge1xuICAgIHByaXZhdGUgZXZlbnRQZXJtaXNzaW9uc01hcCA9IG5ldyBNYXA8Q2FwYWJpbGl0eSwgV2lkZ2V0RXZlbnRDYXBhYmlsaXR5PigpO1xuXG4gICAgY29uc3RydWN0b3IocHJvcHM6IElQcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VkRXZlbnRzID0gV2lkZ2V0RXZlbnRDYXBhYmlsaXR5LmZpbmRFdmVudENhcGFiaWxpdGllcyh0aGlzLnByb3BzLnJlcXVlc3RlZENhcGFiaWxpdGllcyk7XG4gICAgICAgIHBhcnNlZEV2ZW50cy5mb3JFYWNoKGUgPT4gdGhpcy5ldmVudFBlcm1pc3Npb25zTWFwLnNldChlLnJhdywgZSkpO1xuXG4gICAgICAgIGNvbnN0IHN0YXRlczogSUJvb2xlYW5TdGF0ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5wcm9wcy5yZXF1ZXN0ZWRDYXBhYmlsaXRpZXMuZm9yRWFjaChjID0+IHN0YXRlc1tjXSA9IHRydWUpO1xuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICAgICAgICBib29sZWFuU3RhdGVzOiBzdGF0ZXMsXG4gICAgICAgICAgICByZW1lbWJlclNlbGVjdGlvbjogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIG9uVG9nZ2xlID0gKGNhcGFiaWxpdHk6IENhcGFiaWxpdHkpID0+IHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGVzID0gb2JqZWN0U2hhbGxvd0Nsb25lKHRoaXMuc3RhdGUuYm9vbGVhblN0YXRlcyk7XG4gICAgICAgIG5ld1N0YXRlc1tjYXBhYmlsaXR5XSA9ICFuZXdTdGF0ZXNbY2FwYWJpbGl0eV07XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoeyBib29sZWFuU3RhdGVzOiBuZXdTdGF0ZXMgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25SZW1lbWJlclNlbGVjdGlvbkNoYW5nZSA9IChuZXdWYWw6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7IHJlbWVtYmVyU2VsZWN0aW9uOiBuZXdWYWwgfSk7XG4gICAgfTtcblxuICAgIHByaXZhdGUgb25TdWJtaXQgPSBhc3luYyAoZXYpID0+IHtcbiAgICAgICAgdGhpcy5jbG9zZUFuZFRyeVJlbWVtYmVyKE9iamVjdC5lbnRyaWVzKHRoaXMuc3RhdGUuYm9vbGVhblN0YXRlcylcbiAgICAgICAgICAgIC5maWx0ZXIoKFtfLCBpc1NlbGVjdGVkXSkgPT4gaXNTZWxlY3RlZClcbiAgICAgICAgICAgIC5tYXAoKFtjYXBdKSA9PiBjYXApKTtcbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBvblJlamVjdCA9IGFzeW5jIChldikgPT4ge1xuICAgICAgICB0aGlzLmNsb3NlQW5kVHJ5UmVtZW1iZXIoW10pOyAvLyBub3RoaW5nIHdhcyBhcHByb3ZlZFxuICAgIH07XG5cbiAgICBwcml2YXRlIGNsb3NlQW5kVHJ5UmVtZW1iZXIoYXBwcm92ZWQ6IENhcGFiaWxpdHlbXSkge1xuICAgICAgICB0aGlzLnByb3BzLm9uRmluaXNoZWQoeyBhcHByb3ZlZCwgcmVtZW1iZXI6IHRoaXMuc3RhdGUucmVtZW1iZXJTZWxlY3Rpb24gfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbmRlcigpIHtcbiAgICAgICAgLy8gV2Ugc3BlY2lmaWNhbGx5IG9yZGVyIHRoZSB0aW1lbGluZSBjYXBhYmlsaXRpZXMgZG93biB0byB0aGUgYm90dG9tLiBUaGUgY2FwYWJpbGl0eSB0ZXh0XG4gICAgICAgIC8vIGdlbmVyYXRpb24gY2FyZXMgc3Ryb25nbHkgYWJvdXQgdGhpcy5cbiAgICAgICAgY29uc3Qgb3JkZXJlZENhcGFiaWxpdGllcyA9IE9iamVjdC5lbnRyaWVzKHRoaXMuc3RhdGUuYm9vbGVhblN0YXRlcykuc29ydCgoW2NhcEFdLCBbY2FwQl0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzVGltZWxpbmVBID0gaXNUaW1lbGluZUNhcGFiaWxpdHkoY2FwQSk7XG4gICAgICAgICAgICBjb25zdCBpc1RpbWVsaW5lQiA9IGlzVGltZWxpbmVDYXBhYmlsaXR5KGNhcEIpO1xuXG4gICAgICAgICAgICBpZiAoIWlzVGltZWxpbmVBICYmICFpc1RpbWVsaW5lQikgcmV0dXJuIGxleGljb2dyYXBoaWNDb21wYXJlKGNhcEEsIGNhcEIpO1xuICAgICAgICAgICAgaWYgKGlzVGltZWxpbmVBICYmICFpc1RpbWVsaW5lQikgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoIWlzVGltZWxpbmVBICYmIGlzVGltZWxpbmVCKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoaXNUaW1lbGluZUEgJiYgaXNUaW1lbGluZUIpIHJldHVybiBsZXhpY29ncmFwaGljQ29tcGFyZShjYXBBLCBjYXBCKTtcblxuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBjaGVja2JveFJvd3MgPSBvcmRlcmVkQ2FwYWJpbGl0aWVzLm1hcCgoW2NhcCwgaXNDaGVja2VkXSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IENhcGFiaWxpdHlUZXh0LmZvcihjYXAsIHRoaXMucHJvcHMud2lkZ2V0S2luZCk7XG4gICAgICAgICAgICBjb25zdCBieWxpbmUgPSB0ZXh0LmJ5bGluZVxuICAgICAgICAgICAgICAgID8gPHNwYW4gY2xhc3NOYW1lPVwibXhfV2lkZ2V0Q2FwYWJpbGl0aWVzUHJvbXB0RGlhbG9nX2J5bGluZVwiPnsgdGV4dC5ieWxpbmUgfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA6IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9XaWRnZXRDYXBhYmlsaXRpZXNQcm9tcHREaWFsb2dfY2FwXCIga2V5PXtjYXAgKyBpfT5cbiAgICAgICAgICAgICAgICAgICAgPFN0eWxlZENoZWNrYm94XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtpc0NoZWNrZWR9XG4gICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy5vblRvZ2dsZShjYXApfVxuICAgICAgICAgICAgICAgICAgICA+eyB0ZXh0LnByaW1hcnkgfTwvU3R5bGVkQ2hlY2tib3g+XG4gICAgICAgICAgICAgICAgICAgIHsgYnlsaW5lIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8QmFzZURpYWxvZ1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X1dpZGdldENhcGFiaWxpdGllc1Byb21wdERpYWxvZ1wiXG4gICAgICAgICAgICAgICAgb25GaW5pc2hlZD17dGhpcy5wcm9wcy5vbkZpbmlzaGVkfVxuICAgICAgICAgICAgICAgIHRpdGxlPXtfdChcIkFwcHJvdmUgd2lkZ2V0IHBlcm1pc3Npb25zXCIpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxmb3JtIG9uU3VibWl0PXt0aGlzLm9uU3VibWl0fT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9EaWFsb2dfY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ0ZXh0LW11dGVkXCI+eyBfdChcIlRoaXMgd2lkZ2V0IHdvdWxkIGxpa2UgdG86XCIpIH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY2hlY2tib3hSb3dzIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxEaWFsb2dCdXR0b25zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeUJ1dHRvbj17X3QoXCJBcHByb3ZlXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvbj17X3QoXCJEZWNsaW5lIEFsbFwiKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblByaW1hcnlCdXR0b25DbGljaz17dGhpcy5vblN1Ym1pdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNhbmNlbD17dGhpcy5vblJlamVjdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRpdGl2ZT17XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxMYWJlbGxlZFRvZ2dsZVN3aXRjaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3RoaXMuc3RhdGUucmVtZW1iZXJTZWxlY3Rpb259XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVJbkZyb250PXt0cnVlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9e3RoaXMub25SZW1lbWJlclNlbGVjdGlvbkNoYW5nZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsPXtfdChcIlJlbWVtYmVyIG15IHNlbGVjdGlvbiBmb3IgdGhpcyB3aWRnZXRcIil9IC8+fVxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9mb3JtPlxuICAgICAgICAgICAgPC9CYXNlRGlhbG9nPlxuICAgICAgICApO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFnQkE7O0FBQ0E7O0FBT0E7O0FBRUE7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFDZSxNQUFNQSw4QkFBTixTQUE2Q0MsY0FBQSxDQUFNQyxhQUFuRCxDQUFpRjtFQUc1RkMsV0FBVyxDQUFDQyxLQUFELEVBQWdCO0lBQ3ZCLE1BQU1BLEtBQU47SUFEdUIsMkRBRkcsSUFBSUMsR0FBSixFQUVIO0lBQUEsZ0RBZVBDLFVBQUQsSUFBNEI7TUFDM0MsTUFBTUMs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