"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _react = _interopRequireWildcard(require("react"));

var _room = require("matrix-js-sdk/src/models/room");

var _languageHandler = require("../../../languageHandler");

var _BaseDialog = _interopRequireDefault(require("./BaseDialog"));

var _SearchBox = _interopRequireDefault(require("../../structures/SearchBox"));

var _SpaceStore = _interopRequireDefault(require("../../../stores/spaces/SpaceStore"));

var _RoomAvatar = _interopRequireDefault(require("../avatars/RoomAvatar"));

var _AccessibleButton = _interopRequireDefault(require("../elements/AccessibleButton"));

var _AutoHideScrollbar = _interopRequireDefault(require("../../structures/AutoHideScrollbar"));

var _StyledCheckbox = _interopRequireDefault(require("../elements/StyledCheckbox"));

var _MatrixClientContext = _interopRequireDefault(require("../../../contexts/MatrixClientContext"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

/*
Copyright 2021 The Matrix.org Foundation C.I.C.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/
const Entry = _ref => {
  let {
    room,
    checked,
    onChange
  } = _ref;
  const localRoom = room instanceof _room.Room;
  let description;

  if (localRoom) {
    description = (0, _languageHandler._t)("%(count)s members", {
      count: room.getJoinedMemberCount()
    });

    const numChildRooms = _SpaceStore.default.instance.getChildRooms(room.roomId).length;

    if (numChildRooms > 0) {
      description += " Â· " + (0, _languageHandler._t)("%(count)s rooms", {
        count: numChildRooms
      });
    }
  }

  return /*#__PURE__*/_react.default.createElement("label", {
    className: "mx_ManageRestrictedJoinRuleDialog_entry"
  }, /*#__PURE__*/_react.default.createElement("div", null, /*#__PURE__*/_react.default.createElement("div", null, localRoom ? /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
    room: room,
    height: 20,
    width: 20
  }) : /*#__PURE__*/_react.default.createElement(_RoomAvatar.default, {
    oobData: room,
    height: 20,
    width: 20
  }), /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_ManageRestrictedJoinRuleDialog_entry_name"
  }, room.name)), description && /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_entry_description"
  }, description)), /*#__PURE__*/_react.default.createElement(_StyledCheckbox.default, {
    onChange: onChange ? e => onChange(e.target.checked) : null,
    checked: checked,
    disabled: !onChange
  }));
};

const addAllParents = (set, room) => {
  const cli = room.client;
  const parents = Array.from(_SpaceStore.default.instance.getKnownParents(room.roomId)).map(parentId => cli.getRoom(parentId));
  parents.forEach(parent => {
    if (set.has(parent)) return;
    set.add(parent);
    addAllParents(set, parent);
  });
};

const ManageRestrictedJoinRuleDialog = _ref2 => {
  let {
    room,
    selected = [],
    onFinished
  } = _ref2;
  const cli = room.client;
  const [newSelected, setNewSelected] = (0, _react.useState)(new Set(selected));
  const [query, setQuery] = (0, _react.useState)("");
  const lcQuery = query.toLowerCase().trim();
  const [spacesContainingRoom, otherEntries] = (0, _react.useMemo)(() => {
    const parents = new Set();
    addAllParents(parents, room);
    return [Array.from(parents), selected.map(roomId => {
      const room = cli.getRoom(roomId);

      if (!room) {
        return {
          roomId,
          name: roomId
        };
      }

      if (room.getMyMembership() !== "join" || !room.isSpaceRoom()) {
        return room;
      }
    }).filter(Boolean)];
  }, [cli, selected, room]);
  const [filteredSpacesContainingRoom, filteredOtherEntries] = (0, _react.useMemo)(() => [spacesContainingRoom.filter(r => r.name.toLowerCase().includes(lcQuery)), otherEntries.filter(r => r.name.toLowerCase().includes(lcQuery))], [spacesContainingRoom, otherEntries, lcQuery]);

  const onChange = (checked, room) => {
    if (checked) {
      newSelected.add(room.roomId);
    } else {
      newSelected.delete(room.roomId);
    }

    setNewSelected(new Set(newSelected));
  };

  let inviteOnlyWarning;

  if (newSelected.size < 1) {
    inviteOnlyWarning = /*#__PURE__*/_react.default.createElement("div", {
      className: "mx_ManageRestrictedJoinRuleDialog_section_info"
    }, (0, _languageHandler._t)("You're removing all spaces. Access will default to invite only"));
  }

  return /*#__PURE__*/_react.default.createElement(_BaseDialog.default, {
    title: (0, _languageHandler._t)("Select spaces"),
    className: "mx_ManageRestrictedJoinRuleDialog",
    onFinished: onFinished,
    fixedWidth: false
  }, /*#__PURE__*/_react.default.createElement("p", null, (0, _languageHandler._t)("Decide which spaces can access this room. " + "If a space is selected, its members can find and join <RoomName/>.", {}, {
    RoomName: () => /*#__PURE__*/_react.default.createElement("b", null, room.name)
  })), /*#__PURE__*/_react.default.createElement(_MatrixClientContext.default.Provider, {
    value: cli
  }, /*#__PURE__*/_react.default.createElement(_SearchBox.default, {
    className: "mx_textinput_icon mx_textinput_search",
    placeholder: (0, _languageHandler._t)("Search spaces"),
    onSearch: setQuery,
    autoFocus: true
  }), /*#__PURE__*/_react.default.createElement(_AutoHideScrollbar.default, {
    className: "mx_ManageRestrictedJoinRuleDialog_content"
  }, filteredSpacesContainingRoom.length > 0 ? /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_section"
  }, /*#__PURE__*/_react.default.createElement("h3", null, room.isSpaceRoom() ? (0, _languageHandler._t)("Spaces you know that contain this space") : (0, _languageHandler._t)("Spaces you know that contain this room")), filteredSpacesContainingRoom.map(space => {
    return /*#__PURE__*/_react.default.createElement(Entry, {
      key: space.roomId,
      room: space,
      checked: newSelected.has(space.roomId),
      onChange: checked => {
        onChange(checked, space);
      }
    });
  })) : undefined, filteredOtherEntries.length > 0 ? /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_section"
  }, /*#__PURE__*/_react.default.createElement("h3", null, (0, _languageHandler._t)("Other spaces or rooms you might not know")), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_section_info"
  }, /*#__PURE__*/_react.default.createElement("div", null, (0, _languageHandler._t)("These are likely ones other room admins are a part of."))), filteredOtherEntries.map(space => {
    return /*#__PURE__*/_react.default.createElement(Entry, {
      key: space.roomId,
      room: space,
      checked: newSelected.has(space.roomId),
      onChange: checked => {
        onChange(checked, space);
      }
    });
  })) : null, filteredSpacesContainingRoom.length + filteredOtherEntries.length < 1 ? /*#__PURE__*/_react.default.createElement("span", {
    className: "mx_ManageRestrictedJoinRuleDialog_noResults"
  }, (0, _languageHandler._t)("No results")) : undefined), /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_footer"
  }, inviteOnlyWarning, /*#__PURE__*/_react.default.createElement("div", {
    className: "mx_ManageRestrictedJoinRuleDialog_footer_buttons"
  }, /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    kind: "primary_outline",
    onClick: () => onFinished()
  }, (0, _languageHandler._t)("Cancel")), /*#__PURE__*/_react.default.createElement(_AccessibleButton.default, {
    kind: "primary",
    onClick: () => onFinished(Array.from(newSelected))
  }, (0, _languageHandler._t)("Confirm"))))));
};

var _default = ManageRestrictedJoinRuleDialog;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnRyeSIsInJvb20iLCJjaGVja2VkIiwib25DaGFuZ2UiLCJsb2NhbFJvb20iLCJSb29tIiwiZGVzY3JpcHRpb24iLCJfdCIsImNvdW50IiwiZ2V0Sm9pbmVkTWVtYmVyQ291bnQiLCJudW1DaGlsZFJvb21zIiwiU3BhY2VTdG9yZSIsImluc3RhbmNlIiwiZ2V0Q2hpbGRSb29tcyIsInJvb21JZCIsImxlbmd0aCIsIm5hbWUiLCJlIiwidGFyZ2V0IiwiYWRkQWxsUGFyZW50cyIsInNldCIsImNsaSIsImNsaWVudCIsInBhcmVudHMiLCJBcnJheSIsImZyb20iLCJnZXRLbm93blBhcmVudHMiLCJtYXAiLCJwYXJlbnRJZCIsImdldFJvb20iLCJmb3JFYWNoIiwicGFyZW50IiwiaGFzIiwiYWRkIiwiTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nIiwic2VsZWN0ZWQiLCJvbkZpbmlzaGVkIiwibmV3U2VsZWN0ZWQiLCJzZXROZXdTZWxlY3RlZCIsInVzZVN0YXRlIiwiU2V0IiwicXVlcnkiLCJzZXRRdWVyeSIsImxjUXVlcnkiLCJ0b0xvd2VyQ2FzZSIsInRyaW0iLCJzcGFjZXNDb250YWluaW5nUm9vbSIsIm90aGVyRW50cmllcyIsInVzZU1lbW8iLCJnZXRNeU1lbWJlcnNoaXAiLCJpc1NwYWNlUm9vbSIsImZpbHRlciIsIkJvb2xlYW4iLCJmaWx0ZXJlZFNwYWNlc0NvbnRhaW5pbmdSb29tIiwiZmlsdGVyZWRPdGhlckVudHJpZXMiLCJyIiwiaW5jbHVkZXMiLCJkZWxldGUiLCJpbnZpdGVPbmx5V2FybmluZyIsInNpemUiLCJSb29tTmFtZSIsInNwYWNlIiwidW5kZWZpbmVkIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvdmlld3MvZGlhbG9ncy9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2cudHN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5Db3B5cmlnaHQgMjAyMSBUaGUgTWF0cml4Lm9yZyBGb3VuZGF0aW9uIEMuSS5DLlxuXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xueW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcblxuVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG5TZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG5saW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5cbmltcG9ydCBSZWFjdCwgeyB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgUm9vbSB9IGZyb20gXCJtYXRyaXgtanMtc2RrL3NyYy9tb2RlbHMvcm9vbVwiO1xuXG5pbXBvcnQgeyBfdCB9IGZyb20gJy4uLy4uLy4uL2xhbmd1YWdlSGFuZGxlcic7XG5pbXBvcnQgeyBJRGlhbG9nUHJvcHMgfSBmcm9tIFwiLi9JRGlhbG9nUHJvcHNcIjtcbmltcG9ydCBCYXNlRGlhbG9nIGZyb20gXCIuL0Jhc2VEaWFsb2dcIjtcbmltcG9ydCBTZWFyY2hCb3ggZnJvbSBcIi4uLy4uL3N0cnVjdHVyZXMvU2VhcmNoQm94XCI7XG5pbXBvcnQgU3BhY2VTdG9yZSBmcm9tIFwiLi4vLi4vLi4vc3RvcmVzL3NwYWNlcy9TcGFjZVN0b3JlXCI7XG5pbXBvcnQgUm9vbUF2YXRhciBmcm9tIFwiLi4vYXZhdGFycy9Sb29tQXZhdGFyXCI7XG5pbXBvcnQgQWNjZXNzaWJsZUJ1dHRvbiBmcm9tIFwiLi4vZWxlbWVudHMvQWNjZXNzaWJsZUJ1dHRvblwiO1xuaW1wb3J0IEF1dG9IaWRlU2Nyb2xsYmFyIGZyb20gXCIuLi8uLi9zdHJ1Y3R1cmVzL0F1dG9IaWRlU2Nyb2xsYmFyXCI7XG5pbXBvcnQgU3R5bGVkQ2hlY2tib3ggZnJvbSBcIi4uL2VsZW1lbnRzL1N0eWxlZENoZWNrYm94XCI7XG5pbXBvcnQgTWF0cml4Q2xpZW50Q29udGV4dCBmcm9tIFwiLi4vLi4vLi4vY29udGV4dHMvTWF0cml4Q2xpZW50Q29udGV4dFwiO1xuXG5pbnRlcmZhY2UgSVByb3BzIGV4dGVuZHMgSURpYWxvZ1Byb3BzIHtcbiAgICByb29tOiBSb29tO1xuICAgIHNlbGVjdGVkPzogc3RyaW5nW107XG59XG5cbmNvbnN0IEVudHJ5ID0gKHsgcm9vbSwgY2hlY2tlZCwgb25DaGFuZ2UgfSkgPT4ge1xuICAgIGNvbnN0IGxvY2FsUm9vbSA9IHJvb20gaW5zdGFuY2VvZiBSb29tO1xuXG4gICAgbGV0IGRlc2NyaXB0aW9uO1xuICAgIGlmIChsb2NhbFJvb20pIHtcbiAgICAgICAgZGVzY3JpcHRpb24gPSBfdChcIiUoY291bnQpcyBtZW1iZXJzXCIsIHsgY291bnQ6IHJvb20uZ2V0Sm9pbmVkTWVtYmVyQ291bnQoKSB9KTtcbiAgICAgICAgY29uc3QgbnVtQ2hpbGRSb29tcyA9IFNwYWNlU3RvcmUuaW5zdGFuY2UuZ2V0Q2hpbGRSb29tcyhyb29tLnJvb21JZCkubGVuZ3RoO1xuICAgICAgICBpZiAobnVtQ2hpbGRSb29tcyA+IDApIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uICs9IFwiIMK3IFwiICsgX3QoXCIlKGNvdW50KXMgcm9vbXNcIiwgeyBjb3VudDogbnVtQ2hpbGRSb29tcyB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiA8bGFiZWwgY2xhc3NOYW1lPVwibXhfTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nX2VudHJ5XCI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIHsgbG9jYWxSb29tXG4gICAgICAgICAgICAgICAgICAgID8gPFJvb21BdmF0YXIgcm9vbT17cm9vbX0gaGVpZ2h0PXsyMH0gd2lkdGg9ezIwfSAvPlxuICAgICAgICAgICAgICAgICAgICA6IDxSb29tQXZhdGFyIG9vYkRhdGE9e3Jvb219IGhlaWdodD17MjB9IHdpZHRoPXsyMH0gLz5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibXhfTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nX2VudHJ5X25hbWVcIj57IHJvb20ubmFtZSB9PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICB7IGRlc2NyaXB0aW9uICYmIDxkaXYgY2xhc3NOYW1lPVwibXhfTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nX2VudHJ5X2Rlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgeyBkZXNjcmlwdGlvbiB9XG4gICAgICAgICAgICA8L2Rpdj4gfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPFN0eWxlZENoZWNrYm94XG4gICAgICAgICAgICBvbkNoYW5nZT17b25DaGFuZ2UgPyAoZSkgPT4gb25DaGFuZ2UoZS50YXJnZXQuY2hlY2tlZCkgOiBudWxsfVxuICAgICAgICAgICAgY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgIGRpc2FibGVkPXshb25DaGFuZ2V9XG4gICAgICAgIC8+XG4gICAgPC9sYWJlbD47XG59O1xuXG5jb25zdCBhZGRBbGxQYXJlbnRzID0gKHNldDogU2V0PFJvb20+LCByb29tOiBSb29tKTogdm9pZCA9PiB7XG4gICAgY29uc3QgY2xpID0gcm9vbS5jbGllbnQ7XG4gICAgY29uc3QgcGFyZW50cyA9IEFycmF5LmZyb20oU3BhY2VTdG9yZS5pbnN0YW5jZS5nZXRLbm93blBhcmVudHMocm9vbS5yb29tSWQpKS5tYXAocGFyZW50SWQgPT4gY2xpLmdldFJvb20ocGFyZW50SWQpKTtcblxuICAgIHBhcmVudHMuZm9yRWFjaChwYXJlbnQgPT4ge1xuICAgICAgICBpZiAoc2V0LmhhcyhwYXJlbnQpKSByZXR1cm47XG4gICAgICAgIHNldC5hZGQocGFyZW50KTtcbiAgICAgICAgYWRkQWxsUGFyZW50cyhzZXQsIHBhcmVudCk7XG4gICAgfSk7XG59O1xuXG5jb25zdCBNYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2c6IFJlYWN0LkZDPElQcm9wcz4gPSAoeyByb29tLCBzZWxlY3RlZCA9IFtdLCBvbkZpbmlzaGVkIH0pID0+IHtcbiAgICBjb25zdCBjbGkgPSByb29tLmNsaWVudDtcbiAgICBjb25zdCBbbmV3U2VsZWN0ZWQsIHNldE5ld1NlbGVjdGVkXSA9IHVzZVN0YXRlKG5ldyBTZXQ8c3RyaW5nPihzZWxlY3RlZCkpO1xuICAgIGNvbnN0IFtxdWVyeSwgc2V0UXVlcnldID0gdXNlU3RhdGUoXCJcIik7XG4gICAgY29uc3QgbGNRdWVyeSA9IHF1ZXJ5LnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuXG4gICAgY29uc3QgW3NwYWNlc0NvbnRhaW5pbmdSb29tLCBvdGhlckVudHJpZXNdID0gdXNlTWVtbygoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBuZXcgU2V0PFJvb20+KCk7XG4gICAgICAgIGFkZEFsbFBhcmVudHMocGFyZW50cywgcm9vbSk7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBBcnJheS5mcm9tKHBhcmVudHMpLFxuICAgICAgICAgICAgc2VsZWN0ZWQubWFwKHJvb21JZCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9vbSA9IGNsaS5nZXRSb29tKHJvb21JZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyb29tKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHJvb21JZCwgbmFtZTogcm9vbUlkIH0gYXMgUm9vbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb20uZ2V0TXlNZW1iZXJzaGlwKCkgIT09IFwiam9pblwiIHx8ICFyb29tLmlzU3BhY2VSb29tKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJvb207XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgICBdO1xuICAgIH0sIFtjbGksIHNlbGVjdGVkLCByb29tXSk7XG5cbiAgICBjb25zdCBbZmlsdGVyZWRTcGFjZXNDb250YWluaW5nUm9vbSwgZmlsdGVyZWRPdGhlckVudHJpZXNdID0gdXNlTWVtbygoKSA9PiBbXG4gICAgICAgIHNwYWNlc0NvbnRhaW5pbmdSb29tLmZpbHRlcihyID0+IHIubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxjUXVlcnkpKSxcbiAgICAgICAgb3RoZXJFbnRyaWVzLmZpbHRlcihyID0+IHIubmFtZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxjUXVlcnkpKSxcbiAgICBdLCBbc3BhY2VzQ29udGFpbmluZ1Jvb20sIG90aGVyRW50cmllcywgbGNRdWVyeV0pO1xuXG4gICAgY29uc3Qgb25DaGFuZ2UgPSAoY2hlY2tlZDogYm9vbGVhbiwgcm9vbTogUm9vbSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoY2hlY2tlZCkge1xuICAgICAgICAgICAgbmV3U2VsZWN0ZWQuYWRkKHJvb20ucm9vbUlkKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1NlbGVjdGVkLmRlbGV0ZShyb29tLnJvb21JZCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0TmV3U2VsZWN0ZWQobmV3IFNldChuZXdTZWxlY3RlZCkpO1xuICAgIH07XG5cbiAgICBsZXQgaW52aXRlT25seVdhcm5pbmc7XG4gICAgaWYgKG5ld1NlbGVjdGVkLnNpemUgPCAxKSB7XG4gICAgICAgIGludml0ZU9ubHlXYXJuaW5nID0gPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfc2VjdGlvbl9pbmZvXCI+XG4gICAgICAgICAgICB7IF90KFwiWW91J3JlIHJlbW92aW5nIGFsbCBzcGFjZXMuIEFjY2VzcyB3aWxsIGRlZmF1bHQgdG8gaW52aXRlIG9ubHlcIikgfVxuICAgICAgICA8L2Rpdj47XG4gICAgfVxuXG4gICAgcmV0dXJuIDxCYXNlRGlhbG9nXG4gICAgICAgIHRpdGxlPXtfdChcIlNlbGVjdCBzcGFjZXNcIil9XG4gICAgICAgIGNsYXNzTmFtZT1cIm14X01hbmFnZVJlc3RyaWN0ZWRKb2luUnVsZURpYWxvZ1wiXG4gICAgICAgIG9uRmluaXNoZWQ9e29uRmluaXNoZWR9XG4gICAgICAgIGZpeGVkV2lkdGg9e2ZhbHNlfVxuICAgID5cbiAgICAgICAgPHA+XG4gICAgICAgICAgICB7IF90KFwiRGVjaWRlIHdoaWNoIHNwYWNlcyBjYW4gYWNjZXNzIHRoaXMgcm9vbS4gXCIgK1xuICAgICAgICAgICAgICAgIFwiSWYgYSBzcGFjZSBpcyBzZWxlY3RlZCwgaXRzIG1lbWJlcnMgY2FuIGZpbmQgYW5kIGpvaW4gPFJvb21OYW1lLz4uXCIsIHt9LCB7XG4gICAgICAgICAgICAgICAgUm9vbU5hbWU6ICgpID0+IDxiPnsgcm9vbS5uYW1lIH08L2I+LFxuICAgICAgICAgICAgfSkgfVxuICAgICAgICA8L3A+XG4gICAgICAgIDxNYXRyaXhDbGllbnRDb250ZXh0LlByb3ZpZGVyIHZhbHVlPXtjbGl9PlxuICAgICAgICAgICAgPFNlYXJjaEJveFxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cIm14X3RleHRpbnB1dF9pY29uIG14X3RleHRpbnB1dF9zZWFyY2hcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtfdChcIlNlYXJjaCBzcGFjZXNcIil9XG4gICAgICAgICAgICAgICAgb25TZWFyY2g9e3NldFF1ZXJ5fVxuICAgICAgICAgICAgICAgIGF1dG9Gb2N1cz17dHJ1ZX1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8QXV0b0hpZGVTY3JvbGxiYXIgY2xhc3NOYW1lPVwibXhfTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nX2NvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICB7IGZpbHRlcmVkU3BhY2VzQ29udGFpbmluZ1Jvb20ubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9vbS5pc1NwYWNlUm9vbSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gX3QoXCJTcGFjZXMgeW91IGtub3cgdGhhdCBjb250YWluIHRoaXMgc3BhY2VcIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBfdChcIlNwYWNlcyB5b3Uga25vdyB0aGF0IGNvbnRhaW4gdGhpcyByb29tXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDM+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IGZpbHRlcmVkU3BhY2VzQ29udGFpbmluZ1Jvb20ubWFwKHNwYWNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gPEVudHJ5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c3BhY2Uucm9vbUlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb29tPXtzcGFjZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17bmV3U2VsZWN0ZWQuaGFzKHNwYWNlLnJvb21JZCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoY2hlY2tlZDogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2UoY2hlY2tlZCwgc3BhY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApIDogdW5kZWZpbmVkIH1cblxuICAgICAgICAgICAgICAgIHsgZmlsdGVyZWRPdGhlckVudHJpZXMubGVuZ3RoID4gMCA/IChcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfc2VjdGlvblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGgzPnsgX3QoXCJPdGhlciBzcGFjZXMgb3Igcm9vbXMgeW91IG1pZ2h0IG5vdCBrbm93XCIpIH08L2gzPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfc2VjdGlvbl9pbmZvXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj57IF90KFwiVGhlc2UgYXJlIGxpa2VseSBvbmVzIG90aGVyIHJvb20gYWRtaW5zIGFyZSBhIHBhcnQgb2YuXCIpIH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBmaWx0ZXJlZE90aGVyRW50cmllcy5tYXAoc3BhY2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8RW50cnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtzcGFjZS5yb29tSWR9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb209e3NwYWNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkPXtuZXdTZWxlY3RlZC5oYXMoc3BhY2Uucm9vbUlkKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhjaGVja2VkOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZShjaGVja2VkLCBzcGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLz47XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSB9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICkgOiBudWxsIH1cblxuICAgICAgICAgICAgICAgIHsgZmlsdGVyZWRTcGFjZXNDb250YWluaW5nUm9vbS5sZW5ndGggKyBmaWx0ZXJlZE90aGVyRW50cmllcy5sZW5ndGggPCAxXG4gICAgICAgICAgICAgICAgICAgID8gPHNwYW4gY2xhc3NOYW1lPVwibXhfTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nX25vUmVzdWx0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgeyBfdChcIk5vIHJlc3VsdHNcIikgfVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9BdXRvSGlkZVNjcm9sbGJhcj5cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgeyBpbnZpdGVPbmx5V2FybmluZyB9XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJteF9NYW5hZ2VSZXN0cmljdGVkSm9pblJ1bGVEaWFsb2dfZm9vdGVyX2J1dHRvbnNcIj5cbiAgICAgICAgICAgICAgICAgICAgPEFjY2Vzc2libGVCdXR0b24ga2luZD1cInByaW1hcnlfb3V0bGluZVwiIG9uQ2xpY2s9eygpID0+IG9uRmluaXNoZWQoKX0+XG4gICAgICAgICAgICAgICAgICAgICAgICB7IF90KFwiQ2FuY2VsXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8QWNjZXNzaWJsZUJ1dHRvbiBraW5kPVwicHJpbWFyeVwiIG9uQ2xpY2s9eygpID0+IG9uRmluaXNoZWQoQXJyYXkuZnJvbShuZXdTZWxlY3RlZCkpfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHsgX3QoXCJDb25maXJtXCIpIH1cbiAgICAgICAgICAgICAgICAgICAgPC9BY2Nlc3NpYmxlQnV0dG9uPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvTWF0cml4Q2xpZW50Q29udGV4dC5Qcm92aWRlcj5cbiAgICA8L0Jhc2VEaWFsb2c+O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFuYWdlUmVzdHJpY3RlZEpvaW5SdWxlRGlhbG9nO1xuXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQWdCQTs7QUFDQTs7QUFFQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXFCQSxNQUFNQSxLQUFLLEdBQUcsUUFBaUM7RUFBQSxJQUFoQztJQUFFQyxJQUFGO0lBQVFDLE9BQVI7SUFBaUJDO0VBQWpCLENBQWdDO0VBQzNDLE1BQU1DLFNBQVMsR0FBR0gsSUFBSSxZQUFZSSxVQUFsQztFQUVBLElBQUlDLFdBQUo7O0VBQ0EsSUFBSUYsU0FBSixFQUFlO0lBQ1hFLFdBQVcsR0FBRyxJQUFBQyxtQkFB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